{"version":3,"file":"ej2-image-editor.umd.min.js","sources":["../src/image-editor/image-editor.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, NotifyPropertyChanges, Property, addClass, removeClass, extend } from '@syncfusion/ej2-base';\nimport { Event, EventHandler, getComponent, getInstance, isNullOrUndefined, L10n, getUniqueID } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { DropDownButton } from '@syncfusion/ej2-splitbuttons';\nimport { ColorPicker, Uploader, Slider } from '@syncfusion/ej2-inputs';\nimport { createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { Complex, compile, compile as templateCompiler, Browser, detach, select, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Interface for image finetune values.\n */\nvar FinetuneSettings = /** @class */ (function (_super) {\n    __extends(FinetuneSettings, _super);\n    function FinetuneSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"brightness\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"contrast\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"hue\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"saturation\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"exposure\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"opacity\", void 0);\n    __decorate([\n        Property(null)\n    ], FinetuneSettings.prototype, \"blur\", void 0);\n    return FinetuneSettings;\n}(ChildProperty));\nexport { FinetuneSettings };\n/**\n * Image Editor is a graphical user interface that helps to edit an image by performing actions like selection,\n * cropping, rotating, inserting text and shapes (rectangles, ellipses, lines), and drawing free hand on top of an image.\n *\n ```html\n * <div id='imageeditor'></div>\n * ```\n * ```typescript\n * <script>\n * var imageObj = new ImageEditor({});\n * imageObj.appendTo(\"#imageeditor\");\n * </script>\n * ```\n */\nvar ImageEditor = /** @class */ (function (_super) {\n    __extends(ImageEditor, _super);\n    /**\n     *\n     * Constructor for creating the widget\n     *\n     * @param  {ImageEditorModel} options - Specifies the image editor model\n     * @param  {string|HTMLDivElement} element - Specifies the target element\n     */\n    function ImageEditor(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.degree = 0; // current rotated state\n        _this.isUndoRedo = false;\n        _this.dragCanvas = false;\n        _this.dragElement = '';\n        _this.keyHistory = ''; // text history\n        _this.tempKeyHistory = ''; // restore text history on cancel\n        _this.mouseDownPoint = { x: 0, y: 0 };\n        _this.previousPoint = { x: 0, y: 0 }; // updates prev x and y points in mouseMove\n        _this.dragPoint = { startX: 0, startY: 0, endX: 0, endY: 0 }; // updates drag start and end points in mousedown and mousemove\n        _this.diffPoint = { x: 0, y: 0 }; // updates resize points\n        _this.oldPoint = {};\n        _this.objColl = []; // shapes, text obj collection\n        _this.undoRedoColl = [];\n        _this.isImageLoaded = false; // collection of Image Data mainly used for reset state\n        _this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        _this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null }; // restore stroke settings on cancel\n        _this.textSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n        _this.tempTextSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false }; // restore text settings on cancel\n        _this.toolbarHeight = 46;\n        _this.togglePan = false; // toggle pan\n        _this.disablePan = false; // auto enable / disable pan while zooming\n        _this.currFlipState = ''; // current flipped state\n        _this.touchEndPoint = {};\n        _this.undoRedoStep = 0;\n        _this.togglePen = false; // toggle free hand drawing\n        _this.currentToolbar = 'main';\n        _this.textStartPoints = { x: 0, y: 0 }; // restore text styles on cancel\n        _this.fontSizeColl = []; // collection of font sizes\n        _this.textRow = 1; // text area row count\n        _this.activeObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [] };\n        _this.tempActiveObj = { activePoint: { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 },\n            flipObjColl: [] }; // for undo redo\n        _this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false, isInitialLine: false,\n            isCustomCrop: false, isZoomed: false, isUndoZoom: false, isUndoAction: false, isFiltered: false, isSave: false };\n        _this.defToolbarItems = [];\n        _this.isTimer = false; // mobile mode text area rendering on long touch\n        _this.isFirstMove = false; // for pinch zoom\n        _this.startTouches = []; // for pinch zoom\n        _this.tempTouches = []; // for pinch zoom\n        _this.adjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n            exposure: 0, sharpen: false, bw: false }; // for toolbar slider value\n        _this.tempAdjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0, blur: 0,\n            exposure: 0, sharpen: false, bw: false }; // for temp toolbar slider value\n        _this.adjustmentValue = ''; // for internal slider value\n        _this.initialAdjustmentValue = '';\n        _this.tempAdjustmentValue = ''; // for temp internal slider value\n        _this.currentFilter = ''; // current filter selected from toolbar\n        _this.tempFilter = ''; // restore filter style on cancel\n        _this.canvasFilter = 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' + // current filter style applied to lowerCanvas\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n        _this.tempUndoRedoColl = [];\n        _this.tempUndoRedoStep = 0;\n        // Revamp new properties\n        _this.zoomFactor = 0; // Current zoom factor\n        _this.tempZoomFactor = 0; // Restore zoom factor on cancel\n        _this.destLeft = 0; // Current image left position\n        _this.destTop = 0; // Current image top position\n        _this.srcLeft = 0; // Original image left position\n        _this.srcTop = 0; // Original image top position\n        _this.cropDestPoints = { startX: 0, startY: 0, width: 0, height: 0 }; // To redraw old image when navigate to crop tab\n        _this.flipColl = []; // To store flip order\n        _this.isReverseRotate = false; // True when rotate method is called from iteration\n        _this.isReverseFlip = false; // True when rotate method is called from iteration\n        _this.isPreventDragging = false; // Shapes dragging is prevented when crop region is inside shape points\n        _this.isRotateZoom = false; // To restore zoomed image on selection crop selection\n        // eslint-disable-next-line\n        _this.rotateFlipColl = []; // Transformation collection for redrawing image on rotate and flip\n        _this.isCircleCrop = false; // Specifies whether circle crop is enabled or not\n        _this.rotatedDestPoints = { startX: 0, startY: 0, width: 0, height: 0 };\n        _this.croppedDegree = 0; // Specifies the degree when crop is performed\n        _this.isFreehandDrawingPoint = false; // Specifies whether mouse cursor is on freehand drawing point or not\n        _this.isFreehandDrawEditing = false; // Specifies whether freehand drawing is in editing mode or not\n        _this.tempFreeHandDrawEditingStyles = { strokeColor: null, fillColor: null, strokeWidth: null }; // Restore freehand drawing styles on cancel\n        _this.totalPannedInternalPoint = { x: 0, y: 0 }; // To store total panned point internally in rotated state\n        _this.totalPannedClientPoint = { x: 0, y: 0 }; // To store total panned point in client coordinates in rotated state\n        _this.totalPannedPoint = { x: 0, y: 0 }; // To store current panned point in non-rotated state\n        _this.isCropTab = false; // Specifies whether crop tab is selected or not\n        _this.cropZoomFactor = 0; // Specifies the zoom factor when crop selection is performed\n        _this.defaultZoomFactor = 0; // Specifies the zoom factor when crop selection is not performed\n        _this.fileName = ''; // Specifies the file name of the image on initial loading\n        _this.isBrightnessAdjusted = false; // Specifies whether brightness is adjusted or not, to adjust opacity (combination)\n        _this.isInitialLoading = false; // Specifies whether image is loaded for the first time or not (for applying initial filter)\n        // For Free Hand Drawing\n        _this.freehandDrawObj = { lastWidth: 0, lastVelocity: 0, time: 0, pointX: 0, pointY: 0 };\n        _this.points = [];\n        // eslint-disable-next-line\n        _this.pointColl = {};\n        _this.pointCounter = 0;\n        _this.freehandCounter = 0;\n        _this.isFreehandDrawing = false;\n        _this.tempFreehandCounter = 0;\n        _this.lastPan = { x: 0, y: 0 }; // To store last pan point\n        _this.selectedFreehandColor = '#42a5f5';\n        _this.isFreehandDrawCustomized = false;\n        _this.isShapeInserted = false;\n        _this.isAllowCropPan = false;\n        _this.tempPannedPoint = { x: 0, y: 0 };\n        _this.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n            totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {}, rotateFlipColl: [],\n            degree: 0, currFlipState: '', destPoints: { startX: 0, startY: 0, width: 0, height: 0 },\n            srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '' };\n        _this.afterCropActions = [];\n        _this.isCancelAction = false;\n        _this.isFreehandPointMoved = false;\n        _this.isTouch = false;\n        _this.freehandDownPoint = { x: 0, y: 0 };\n        _this.tempFlipPanPoint = { x: 0, y: 0 };\n        _this.currentFreehandDrawIndex = 0; // Specifies id for every freehand drawing - uses while deleting\n        _this.tempCurrentFreehandDrawIndex = 0; // Specifies id for every freehand drawing - uses while cancelling\n        _this.preventZoomBtn = false;\n        _this.cancelObjColl = [];\n        _this.cancelPointColl = [];\n        _this.rotatedFlipCropSelection = false;\n        return _this;\n    }\n    ImageEditor_1 = ImageEditor;\n    ImageEditor.prototype.preRender = function () {\n        // pre render code snippets\n        this.element.id = this.element.id || getUniqueID('ej2-image-editor');\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        this.themeColl = {\n            Bootstrap5: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Bootstrap5Dark: { primaryColor: '#0d6efd', secondaryColor: '#fff' },\n            Tailwind: { primaryColor: '#4f46e5', secondaryColor: '#fff' },\n            TailwindDark: { primaryColor: '#22d3ee', secondaryColor: '#fff' },\n            Fluent: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            FluentDark: { primaryColor: '#0078d4', secondaryColor: '#fff' },\n            Bootstrap4: { primaryColor: '#007bff', secondaryColor: '#fff' },\n            Bootstrap: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            BootstrapDark: { primaryColor: '#317ab9', secondaryColor: '#fff' },\n            Material: { primaryColor: '#e3165b', secondaryColor: '#fff' },\n            MaterialDark: { primaryColor: '#00b0ff', secondaryColor: '#fff' },\n            Fabric: { primaryColor: '#0078d6', secondaryColor: '#fff' },\n            FabricDark: { primaryColor: '#0074cc', secondaryColor: '#fff' },\n            Highcontrast: { primaryColor: '#000000', secondaryColor: '#fff' }\n        };\n        this.defaultLocale = {\n            Crop: 'Crop',\n            ZoomIn: 'Zoom In',\n            ZoomOut: 'Zoom Out',\n            Undo: 'Undo',\n            Redo: 'Redo',\n            Transform: 'Transform',\n            Annotation: 'Annotation',\n            Finetune: 'Finetune',\n            Brightness: 'Brightness',\n            Contrast: 'Contrast',\n            Hue: 'Hue',\n            Saturation: 'Saturation',\n            Opacity: 'Opacity',\n            Blur: 'Blur',\n            Sharpen: 'Sharpen',\n            Exposure: 'Exposure',\n            Filter: 'Filter',\n            Default: 'Default',\n            Chrome: 'Chrome',\n            Cold: 'Cold',\n            Warm: 'Warm',\n            Grayscale: 'Grayscale',\n            BlackAndWhite: 'Black and White',\n            Sepia: 'Sepia',\n            Invert: 'Invert',\n            Text: 'Add Text',\n            Pen: 'Pen',\n            Reset: 'Reset',\n            Save: 'Save',\n            Select: 'Select',\n            RotateLeft: 'Rotate Left',\n            RotateRight: 'Rotate Right',\n            HorizontalFlip: 'Horizontal Flip',\n            VerticalFlip: 'Vertical Flip',\n            OK: 'OK',\n            Cancel: 'Cancel',\n            FillColor: 'Fill Color',\n            StrokeColor: 'Stroke Color',\n            StrokeWidth: 'Stroke Width',\n            FontFamily: 'Font Family',\n            FontStyle: 'Font Style',\n            FontSize: 'Font Size',\n            FontColor: 'Font Color',\n            Pan: 'Pan',\n            Move: 'Move',\n            Load: 'Load',\n            Custom: 'Custom',\n            Square: 'Square',\n            Circle: 'Circle',\n            Ellipse: 'Ellipse',\n            Rectangle: 'Rectangle',\n            Line: 'Line',\n            Bold: 'Bold',\n            Italic: 'Italic',\n            BoldItalic: 'Bold Italic',\n            XSmall: 'X-Small',\n            Small: 'Small',\n            Medium: 'Medium',\n            Large: 'Large',\n            XLarge: 'X-Large',\n            ABC: 'ABC',\n            Browse: 'Browse'\n        };\n        this.l10n = new L10n('image-editor', this.defaultLocale, this.locale);\n    };\n    /**\n     *\n     * To Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    ImageEditor.prototype.render = function () {\n        this.initialize();\n    };\n    /**\n     * To get component name.\n     *\n     * @returns {string} - Module Name\n     * @private\n     */\n    ImageEditor.prototype.getModuleName = function () {\n        return 'image-editor';\n    };\n    /**\n     *\n     * To get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     * @private\n     */\n    ImageEditor.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     *\n     * Called internally if any of the property value changed.\n     *\n     * @param  {ImageEditorModel} newProperties - Specifies new properties\n     * @param  {ImageEditorModel} oldProperties - Specifies old properties\n     * @returns {void}\n     * @private\n     */\n    ImageEditor.prototype.onPropertyChanged = function (newProperties, oldProperties) {\n        for (var _i = 0, _a = Object.keys(newProperties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProperties.cssClass) {\n                        removeClass([this.element], oldProperties.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    if (newProperties.cssClass) {\n                        addClass([this.element], newProperties.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    break;\n                case 'disabled':\n                    if (newProperties.disabled) {\n                        this.element.classList.add('e-disabled');\n                        this.unwireEvent();\n                    }\n                    else {\n                        this.element.classList.remove('e-disabled');\n                        this.wireEvent();\n                    }\n                    break;\n                case 'height':\n                    this.element.style.height = newProperties.height;\n                    break;\n                case 'width':\n                    this.element.style.width = newProperties.width;\n                    break;\n                case 'theme':\n                    if (newProperties.theme) {\n                        this.updateTheme();\n                        this.upperContext.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n                        this.upperContext.fillStyle = this.themeColl[this.theme]['secondaryColor'];\n                    }\n                    break;\n                case 'finetuneSettings':\n                    if (newProperties.finetuneSettings) {\n                        this.finetuneSettings = newProperties.finetuneSettings;\n                        this.updateFinetunes();\n                    }\n                    break;\n                case 'locale':\n                    if (newProperties.locale) {\n                        this.l10n.setLocale(newProperties.locale);\n                        this.refreshToolbar('main');\n                    }\n                    break;\n                case 'allowUndoRedo':\n                    if (newProperties.allowUndoRedo) {\n                        this.allowUndoRedo = true;\n                    }\n                    else {\n                        this.allowUndoRedo = false;\n                    }\n                    this.refreshToolbar('main');\n                    break;\n                case 'toolbar':\n                    break;\n                case 'toolbarTemplate':\n                    break;\n            }\n        }\n    };\n    ImageEditor.prototype.destroy = function () {\n        var classList = [];\n        this.element.removeAttribute('tabindex');\n        if (this.cssClass) {\n            classList = classList.concat(this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        removeClass([this.element], classList);\n        if (!this.element.getAttribute('class')) {\n            this.element.removeAttribute('class');\n        }\n        this.destroySubComponents();\n        this.unwireEvent();\n        _super.prototype.destroy.call(this);\n        this.element.innerHTML = '';\n    };\n    ImageEditor.prototype.initialize = function () {\n        this.updateFinetunes();\n        this.createToolbar();\n        this.createContextualToolbar();\n        this.createCanvas();\n        this.wireEvent();\n        this.lowerContext.filter = this.canvasFilter = this.initialAdjustmentValue = this.adjustmentValue = this.getDefaultFilter();\n        if (this.cssClass) {\n            addClass([this.element], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (this.element) {\n            createSpinner({\n                target: this.element\n            });\n        }\n    };\n    ImageEditor.prototype.getDefaultFilter = function () {\n        return 'brightness(' + 1 + ') ' + 'contrast(' + 100 + '%) ' + 'hue-rotate(' + 0 + 'deg) ' +\n            'saturate(' + 100 + '%) ' + 'opacity(' + 1 + ') ' + 'blur(' + 0 + 'px) ' + 'sepia(0%) ' + 'grayscale(0%) ' + 'invert(0%)';\n    };\n    ImageEditor.prototype.updateFinetunes = function () {\n        if (this.finetuneSettings) {\n            if (this.finetuneSettings.brightness) {\n                this.adjustmentLevel.brightness = this.finetuneSettings.brightness.defaultValue;\n                this.tempAdjustmentLevel.brightness = this.finetuneSettings.brightness.defaultValue;\n            }\n            if (this.finetuneSettings.contrast) {\n                this.adjustmentLevel.contrast = this.finetuneSettings.contrast.defaultValue;\n                this.tempAdjustmentLevel.contrast = this.finetuneSettings.contrast.defaultValue;\n            }\n            if (this.finetuneSettings.hue) {\n                this.adjustmentLevel.hue = this.finetuneSettings.hue.defaultValue;\n                this.tempAdjustmentLevel.hue = this.finetuneSettings.hue.defaultValue;\n            }\n            if (this.finetuneSettings.saturation) {\n                this.adjustmentLevel.saturation = this.finetuneSettings.saturation.defaultValue;\n                this.tempAdjustmentLevel.saturation = this.finetuneSettings.saturation.defaultValue;\n            }\n            if (this.finetuneSettings.exposure) {\n                this.adjustmentLevel.exposure = this.finetuneSettings.exposure.defaultValue;\n                this.tempAdjustmentLevel.exposure = this.finetuneSettings.exposure.defaultValue;\n            }\n            if (this.finetuneSettings.opacity) {\n                this.adjustmentLevel.opacity = this.finetuneSettings.opacity.defaultValue;\n                this.tempAdjustmentLevel.opacity = this.finetuneSettings.opacity.defaultValue;\n            }\n            if (this.finetuneSettings.blur) {\n                this.adjustmentLevel.blur = this.finetuneSettings.blur.defaultValue;\n                this.tempAdjustmentLevel.blur = this.finetuneSettings.blur.defaultValue;\n            }\n            this.isInitialLoading = true;\n        }\n    };\n    ImageEditor.prototype.initializeFilter = function () {\n        this.setBrightness(this.adjustmentLevel.brightness);\n        this.setContrast(this.adjustmentLevel.contrast);\n        this.setHue(this.adjustmentLevel.hue);\n        this.setSaturation(this.adjustmentLevel.saturation);\n        this.setExposure(this.adjustmentLevel.exposure);\n        this.setOpacity(this.adjustmentLevel.opacity);\n        this.setBlur(this.adjustmentLevel.blur);\n    };\n    /**\n     *\n     * This Method will add events to component (element, event, method, current reference)\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.wireEvent = function () {\n        EventHandler.add(document, 'keydown', this.keyDownEventHandler, this);\n        EventHandler.add(document, 'keypress', this.keyUpEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousedown', this.mouseDownEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(document, 'mouseup', this.mouseUpEventHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler, this);\n        EventHandler.add(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler, this);\n        EventHandler.add(document, 'mouseup', this.canvasMouseUpHandler, this);\n        EventHandler.add(this.upperCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.lowerCanvas, 'touchstart', this.touchStartHandler, this);\n        EventHandler.add(this.upperCanvas, 'dblclick', this.findTextPoint, this);\n        EventHandler.add(this.textArea, 'mousedown', this.findTextPoint, this);\n        EventHandler.add(this.lowerCanvas, 'mousewheel DOMMouseScroll', this.handleScroll, this);\n        EventHandler.add(this.upperCanvas, 'mousewheel DOMMouseScroll', this.handleScroll, this);\n        window.addEventListener('resize', this.windowResizeHandler.bind(this));\n        if ((!Browser.isIos && Browser.info.name !== 'safari')) {\n            screen.orientation.addEventListener('change', this.screenOrientation.bind(this));\n        }\n    };\n    /**\n     *\n     * This Method will remove events from component\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.unwireEvent = function () {\n        EventHandler.remove(document, 'keydown', this.keyDownEventHandler);\n        EventHandler.remove(document, 'keypress', this.keyUpEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousedown', this.mouseDownEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mousemove', this.mouseMoveEventHandler);\n        EventHandler.remove(this.upperCanvas, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(document, 'mouseup', this.mouseUpEventHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousedown', this.canvasMouseDownHandler);\n        EventHandler.remove(this.lowerCanvas, 'mousemove', this.canvasMouseMoveHandler);\n        EventHandler.remove(this.lowerCanvas, 'mouseup', this.canvasMouseUpHandler);\n        EventHandler.remove(document, 'mouseup', this.canvasMouseUpHandler);\n    };\n    ImageEditor.prototype.destroySubComponents = function () {\n        var inputElement = this.element.querySelectorAll('input.e-control');\n        var btnElement = this.element.querySelectorAll('button.e-control');\n        for (var i = 0, len = inputElement.length; i < len; i++) {\n            if (inputElement[i].classList.contains('e-color-picker')) {\n                getComponent(inputElement[i], 'color-picker').destroy();\n                detach(select('input#' + inputElement[i].id, this.element));\n            }\n        }\n        for (var i = 0, len = btnElement.length; i < len; i++) {\n            if (btnElement[i].classList.contains('e-dropdown-btn')) {\n                getComponent(btnElement[i], 'dropdown-btn').destroy();\n                detach(select('button#' + btnElement[i].id, this.element));\n            }\n            else if (btnElement[i].classList.contains('e-btn')) {\n                getComponent(btnElement[i], 'btn').destroy();\n                detach(select('button#' + btnElement[i].id, this.element));\n            }\n        }\n    };\n    ImageEditor.prototype.updateTheme = function () {\n        if (this.theme !== '') {\n            this.theme = this.toPascalCase(this.theme);\n        }\n    };\n    ImageEditor.prototype.toPascalCase = function (str) {\n        var strArr = [];\n        if (!isNullOrUndefined(str)) {\n            strArr = str.toLowerCase().split('-');\n        }\n        for (var i = 0; i < strArr.length; i++) {\n            strArr[i] = strArr[i].charAt(0).toUpperCase() + strArr[i].slice(1);\n        }\n        return strArr.join('');\n    };\n    ImageEditor.prototype.createCanvas = function () {\n        this.element.style.boxSizing = 'border-box';\n        var height = this.toolbarHeight;\n        this.element.style.width = this.width;\n        this.element.style.height = this.height;\n        var canvasWrapper = this.element.appendChild(this.createElement('div', { id: this.element.id + '_canvasWrapper',\n            className: 'e-canvas-wrapper', attrs: { style: 'height:' + (this.element.offsetHeight - height - 2) + 'px; width:' +\n                    (this.element.offsetWidth - 2)\n                    + 'px; position: relative; overflow: hidden; margin: 0 auto;' }\n        }));\n        this.lowerCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_lowerCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.upperCanvas = canvasWrapper.appendChild(this.createElement('canvas', {\n            id: this.element.id + '_upperCanvas', attrs: { name: 'canvasImage' }\n        }));\n        this.inMemoryCanvas = this.createElement('canvas', {\n            id: this.element.id + '_inMemoryCanvas', attrs: { name: 'canvasImage' }\n        });\n        this.textArea = canvasWrapper.appendChild(this.createElement('textarea', {\n            id: this.element.id + '_textArea', className: 'e-textarea', attrs: { name: 'textArea' }\n        }));\n        this.textArea.setAttribute('spellcheck', 'false');\n        this.lowerCanvas.style.width = this.upperCanvas.style.width = this.inMemoryCanvas.style.width = '100%';\n        this.lowerCanvas.style.height = this.upperCanvas.style.height = this.inMemoryCanvas.style.height = '100%';\n        this.upperCanvas.style.position = this.lowerCanvas.style.position = this.textArea.style.position = 'absolute';\n        this.textArea.style.backgroundColor = 'transparent';\n        this.textArea.style.display = 'none';\n        this.textArea.style.resize = 'none';\n        this.lowerContext = this.lowerCanvas.getContext('2d');\n        this.baseImg = this.createElement('img', {\n            id: this.element.id + '_orgImg', attrs: { name: 'Image', crossorigin: 'anonymous' }\n        });\n        this.upperCanvas.style.cursor = 'default';\n        this.upperCanvas.style.display = 'none';\n        this.upperContext = this.upperCanvas.getContext('2d');\n        this.inMemoryContext = this.inMemoryCanvas.getContext('2d');\n    };\n    ImageEditor.prototype.createToolbar = function () {\n        var _this = this;\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.length > 0)) {\n            this.element.appendChild(this.createElement('div', {\n                id: this.element.id + '_toolbarArea', className: 'e-toolbar-area'\n            }));\n            if (this.toolbarTemplate) {\n                this.toolbarTemplateFn();\n            }\n            else {\n                var toolbarItems = { cssClass: 'e-image-upload', align: 'Left', type: 'Input',\n                    tooltipText: this.l10n.getConstant('Browse'), template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg' }) };\n                if (isNullOrUndefined(this.defToolbarItems)) {\n                    this.defToolbarItems = [];\n                }\n                this.defToolbarItems.push(toolbarItems);\n                var toolbarArea = document.getElementById(this.element.id + '_toolbarArea');\n                var toolbar_1 = this.createElement('div', {\n                    id: this.element.id + '_toolbar'\n                });\n                toolbarArea.appendChild(toolbar_1);\n                var uploadItems = [\n                    {\n                        cssClass: 'e-image-upload',\n                        align: 'Left', type: 'Input',\n                        tooltipText: this.l10n.getConstant('Browse'),\n                        template: new Uploader({\n                            allowedExtensions: '.jpg, .jpeg, .png,.svg',\n                            selected: function () {\n                                if (Browser.isDevice) {\n                                    if (_this.defToolbarItems.length > 0 &&\n                                        (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar')))) {\n                                        getComponent(document.getElementById(_this.element.id + '_toolbar'), 'toolbar').destroy();\n                                    }\n                                    if (!isNullOrUndefined(document.getElementById(_this.element.id + '_bottomToolbar'))) {\n                                        getComponent(document.getElementById(_this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                                    }\n                                    _this.initToolbarItem(false, Browser.isDevice, null);\n                                    _this.createBottomToolbar();\n                                }\n                                else {\n                                    if (_this.defToolbarItems.length > 0 &&\n                                        (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar')))) {\n                                        getComponent(document.getElementById(_this.element.id + '_toolbar'), 'toolbar').destroy();\n                                    }\n                                    _this.initToolbarItem(false, false, null);\n                                }\n                            }\n                        })\n                    }\n                ];\n                new Toolbar({ items: uploadItems, width: '100%',\n                    created: function () {\n                        _this.trigger('toolbarCreated', { toolbarType: 'main' });\n                    },\n                    clicked: this.defToolbarClicked.bind(this) }, '#' + this.element.id + '_toolbar');\n                this.createLeftToolbarControls();\n            }\n            if (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar'))) {\n                this.toolbarHeight = document.getElementById(this.element.id + '_toolbar').clientHeight;\n            }\n        }\n        else {\n            this.toolbarHeight = 0;\n        }\n    };\n    ImageEditor.prototype.createContextualToolbar = function () {\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.length > 0)) {\n            this.element.appendChild(this.createElement('div', { id: this.element.id + '_contextualToolbarArea',\n                className: 'e-contextual-toolbar-wrapper e-hide', attrs: { style: 'position: absolute;' }\n            }));\n            var toolbarArea = document.getElementById(this.element.id + '_contextualToolbarArea');\n            var toolbar_2 = this.createElement('div', { id: this.element.id + '_contextualToolbar' });\n            toolbarArea.appendChild(toolbar_2);\n        }\n    };\n    ImageEditor.prototype.updateContextualToolbar = function (type, cType) {\n        if (this.toolbarTemplate) {\n            this.toolbarTemplateFn();\n        }\n        else {\n            var toolbarArea = this.element.querySelector('#' + this.element.id + '_toolbarArea');\n            var contextualToolbarArea = this.element.querySelector('#' + this.element.id + '_contextualToolbarArea');\n            contextualToolbarArea.classList.remove('e-hide');\n            contextualToolbarArea.style.left = toolbarArea.offsetLeft + 'px';\n            if (type === 'filter') {\n                if (document.getElementById(this.element.id + '_toolbar') && this.defToolbarItems.length > 0) {\n                    getComponent(document.getElementById(this.element.id + '_toolbar'), 'toolbar').destroy();\n                }\n                if (Browser.isDevice) {\n                    this.initToolbarItem(false, true, true);\n                }\n                else {\n                    this.initToolbarItem(true, null, null);\n                }\n                this.refreshSlider();\n                this.initFilterToolbarItem();\n            }\n            else {\n                if (document.querySelector('#' + this.element.id + '_contextualToolbar').classList.contains('e-control')) {\n                    getComponent(document.getElementById(this.element.id + '_contextualToolbar'), 'toolbar').destroy();\n                }\n                this.refreshSlider();\n                this.renderSlider(cType);\n            }\n            if (Browser.isDevice) {\n                var cHt = contextualToolbarArea.offsetHeight;\n                var ht = this.element.querySelector('#' + this.element.id + '_canvasWrapper').offsetHeight;\n                contextualToolbarArea.style.top = this.toolbarHeight + ht - cHt + 'px';\n            }\n            else {\n                contextualToolbarArea.style.top = this.toolbarHeight + 'px';\n            }\n        }\n    };\n    ImageEditor.prototype.createBottomToolbar = function () {\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.length > 0)) {\n            this.element.appendChild(this.createElement('div', {\n                id: this.element.id + '_bottomToolbarArea', className: 'e-bottom-toolbar'\n            }));\n            if (!this.toolbarTemplate) {\n                document.getElementById(this.element.id + '_canvasWrapper').style.height = (this.element.offsetHeight\n                    - this.toolbarHeight * 2) - 3 + 'px';\n                var toolbarArea = document.getElementById(this.element.id + '_bottomToolbarArea');\n                var toolbarElem = this.createElement('div', {\n                    id: this.element.id + '_bottomToolbar'\n                });\n                toolbarArea.appendChild(toolbarElem);\n            }\n            this.initBottomToolbar();\n        }\n    };\n    ImageEditor.prototype.initBottomToolbar = function () {\n        var _this = this;\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.length > 0)) {\n            if (this.toolbarTemplate) {\n                this.toolbarTemplateFn();\n            }\n            else {\n                var items = this.getMainToolbarItem();\n                new Toolbar({ items: items, width: '100%',\n                    created: function () {\n                        _this.renderAnnotationBtn();\n                        _this.renderCropBtn();\n                        _this.renderTransformBtn();\n                        _this.trigger('toolbarCreated', { toolbarType: 'main' });\n                    },\n                    clicked: this.defToolbarClicked.bind(this)\n                }, '#' + this.element.id + '_bottomToolbar');\n                if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_bottomToolbar')))) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var toolbar_3 = getComponent(this.element.id + '_bottomToolbar', 'toolbar');\n                    toolbar_3.refreshOverflow();\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.toolbarTemplateFn = function () {\n        var template;\n        var templateID = this.element.id + '_toolbar';\n        var toolbarArea = this.element.querySelector('#' + this.element.id + '_toolbarArea');\n        if (this.toolbarTemplate) {\n            this.toolbarFn = this.templateParser(this.toolbarTemplate);\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.isReact) {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            }\n            else if (this.isAngular) {\n                var templateColl = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID);\n                template = (templateColl[0].nodeType === 3) ? templateColl[1] : templateColl[0];\n            }\n            else {\n                template = this.toolbarFn({ type: 'toolbar' }, this, 'Template', templateID)[0];\n            }\n            toolbarArea.appendChild(template);\n            this.renderReactTemplates();\n        }\n    };\n    ImageEditor.prototype.templateParser = function (template) {\n        if (template) {\n            try {\n                if (document.querySelectorAll(template).length) {\n                    return templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (error) {\n                return templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    ImageEditor.prototype.getLeftToolbarItem = function (isOkBtn) {\n        var toolbarItems = [];\n        if (!isOkBtn) {\n            toolbarItems.push({ cssClass: 'e-image-upload', align: 'Left', type: 'Input', template: new Uploader({ allowedExtensions: '.jpg, .jpeg, .png,.svg' }) });\n            toolbarItems.push({ visible: false, cssClass: 'e-image-position e-btn e-flat', tooltipText: this.l10n.getConstant('Browse'), align: 'Left' });\n        }\n        if (this.allowUndoRedo) {\n            if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Undo') > -1)) {\n                toolbarItems.push({ id: this.element.id + '_undo', prefixIcon: 'e-icons e-undo', cssClass: 'top-icon e-undo',\n                    tooltipText: this.l10n.getConstant('Undo'), align: 'Left' });\n            }\n            if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Redo') > -1)) {\n                toolbarItems.push({ id: this.element.id + '_redo', prefixIcon: 'e-icons e-redo', cssClass: 'top-icon e-redo',\n                    tooltipText: this.l10n.getConstant('Redo'), align: 'Left' });\n            }\n        }\n        if (!this.preventZoomBtn) {\n            if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('ZoomOut') > -1)) {\n                toolbarItems.push({ id: this.element.id + '_zoomOut', prefixIcon: 'e-icons e-zoom-out', cssClass: 'top-icon e-dec-zoom',\n                    tooltipText: this.l10n.getConstant('ZoomOut'), align: 'Left' });\n            }\n            if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('ZoomIn') > -1)) {\n                toolbarItems.push({ id: this.element.id + '_zoomIn', prefixIcon: 'e-icons e-zoom-in', cssClass: 'top-icon e-inc-zoom',\n                    tooltipText: this.l10n.getConstant('ZoomIn'), align: 'Left' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('left');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.getRightToolbarItem = function (isOkBtn) {\n        var toolbarItems = [];\n        if (isOkBtn) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Reset') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_reset', prefixIcon: 'e-icons e-btn-reset', cssClass: 'top-icon e-img-reset',\n                tooltipText: this.l10n.getConstant('Reset'), align: 'Right' });\n        }\n        if (!isOkBtn) {\n            if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Save') > -1)) {\n                toolbarItems.push({ id: this.element.id + '_save', prefixIcon: 'e-icons e-btn-save', cssClass: 'top-icon e-save',\n                    tooltipText: this.l10n.getConstant('Save'), align: 'Right', template: '<button id=\"' + this.element.id + '_saveBtn\"></button>' });\n            }\n        }\n        var tempToolbarItems = this.processToolbar('right');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.getMainToolbarItem = function (isApplyOption) {\n        var toolbarItems = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Crop') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_crop', tooltipText: this.l10n.getConstant('Crop'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_cropBtn\"></button>'\n            });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Annotate') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_annotation', tooltipText: this.l10n.getConstant('Annotation'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_annotationBtn\"></button>' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Transform') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_transform', tooltipText: this.l10n.getConstant('Transform'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_transformBtn\"></button>'\n            });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Finetune') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_adjustment', prefixIcon: 'e-icons e-adjustment', cssClass: 'top-icon e-adjustment',\n                tooltipText: this.l10n.getConstant('Finetune'), align: 'Center' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Filter') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_filter', prefixIcon: 'e-icons e-filters', cssClass: 'top-icon e-filters',\n                tooltipText: this.l10n.getConstant('Filter'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (isApplyOption) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.getZoomToolbarItem = function () {\n        var toolbarItems = [];\n        return toolbarItems;\n    };\n    ImageEditor.prototype.processToolbar = function (position) {\n        var toolbarItems = [];\n        if (this.toolbar) {\n            for (var i = 0, len = this.toolbar.length; i < len; i++) {\n                if (typeof (this.toolbar[i]) === 'object') {\n                    if (isNullOrUndefined(this.toolbar[i].align)) {\n                        if (position === 'left') {\n                            toolbarItems.push(this.toolbar[i]);\n                        }\n                    }\n                    else if (this.toolbar[i].align.toLowerCase() === position) {\n                        toolbarItems.push(this.toolbar[i]);\n                    }\n                }\n            }\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.processSubToolbar = function (items) {\n        var toolbarItems = [];\n        if (items) {\n            for (var i = 0, len = items.length; i < len; i++) {\n                if (typeof (items[i]) === 'object') {\n                    items[i].align = 'Center';\n                    toolbarItems.push(items[i]);\n                }\n            }\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.isToolbar = function () {\n        return (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.length > 0)\n            || !isNullOrUndefined(this.toolbarTemplate));\n    };\n    ImageEditor.prototype.initToolbarItem = function (isApplyOption, isDevice, isOkBtn) {\n        var _this = this;\n        if (this.isToolbar()) {\n            var leftItem = this.getLeftToolbarItem(isOkBtn);\n            var rightItem = this.getRightToolbarItem(isOkBtn);\n            var mainItem = this.getMainToolbarItem(isApplyOption);\n            var zoomItem = this.getZoomToolbarItem();\n            if (isDevice) {\n                this.defToolbarItems = leftItem.concat(rightItem);\n            }\n            else {\n                this.defToolbarItems = leftItem.concat(mainItem, rightItem, zoomItem);\n            }\n            new Toolbar({\n                width: '100%',\n                items: this.defToolbarItems,\n                clicked: this.defToolbarClicked.bind(this),\n                created: function () {\n                    if (!isDevice) {\n                        _this.renderAnnotationBtn();\n                        _this.renderCropBtn();\n                        _this.renderTransformBtn();\n                    }\n                    _this.renderSaveBtn();\n                    _this.trigger('toolbarCreated', { toolbarType: 'main' });\n                }\n            }, '#' + this.element.id + '_toolbar');\n            this.createLeftToolbarControls();\n            this.enableDisableToolbarBtn();\n            if (this.isToolbar() && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                var toolbar_4 = getComponent(this.element.id + '_toolbar', 'toolbar');\n                toolbar_4.refreshOverflow();\n            }\n        }\n    };\n    ImageEditor.prototype.enableDisableToolbarBtn = function () {\n        var undo = document.querySelector('#' + this.element.id + '_undo');\n        if (!isNullOrUndefined(undo) && this.undoRedoStep === 0) {\n            undo.classList.add('e-disabled');\n            undo.parentElement.classList.add('e-overlay');\n        }\n        else if (!isNullOrUndefined(undo)) {\n            undo.classList.remove('e-disabled');\n            undo.parentElement.classList.remove('e-overlay');\n        }\n        var redo = document.querySelector('#' + this.element.id + '_redo');\n        if (!isNullOrUndefined(redo) && (this.undoRedoStep === this.undoRedoColl.length)) {\n            redo.classList.add('e-disabled');\n            redo.parentElement.classList.add('e-overlay');\n        }\n        else if (!isNullOrUndefined(redo) && (this.undoRedoStep === 0 && this.undoRedoColl.length > 0)) {\n            redo.classList.remove('e-disabled');\n            redo.parentElement.classList.remove('e-overlay');\n        }\n        else if (!isNullOrUndefined(redo)) {\n            redo.classList.remove('e-disabled');\n            redo.parentElement.classList.remove('e-overlay');\n        }\n        var zoomIn = document.querySelector('#' + this.element.id + '_zoomIn');\n        if (!isNullOrUndefined(zoomIn) && this.zoomFactor >= 2) {\n            zoomIn.classList.add('e-disabled');\n            zoomIn.parentElement.classList.add('e-overlay');\n        }\n        else if (!isNullOrUndefined(zoomIn)) {\n            zoomIn.classList.remove('e-disabled');\n            zoomIn.parentElement.classList.remove('e-overlay');\n        }\n        var zoomOut = document.querySelector('#' + this.element.id + '_zoomOut');\n        if (!isNullOrUndefined(zoomOut) && this.zoomFactor === 0) {\n            zoomOut.classList.add('e-disabled');\n            zoomOut.parentElement.classList.add('e-overlay');\n        }\n        else if (!isNullOrUndefined(zoomOut)) {\n            zoomOut.classList.remove('e-disabled');\n            zoomOut.parentElement.classList.remove('e-overlay');\n        }\n        var pan = document.querySelector('#' + this.element.id + '_pan');\n        if (!isNullOrUndefined(pan) && this.zoomFactor === 0) {\n            pan.style.display = 'none';\n        }\n        else if (!isNullOrUndefined(pan)) {\n            pan.style.display = 'block';\n        }\n    };\n    ImageEditor.prototype.createLeftToolbarControls = function () {\n        if (this.defToolbarItems !== undefined && this.defToolbarItems.length > 0 &&\n            (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n            var uploadDiv = document.getElementById(this.element.id + '_toolbar')\n                .querySelector('.e-image-upload');\n            if (uploadDiv) {\n                var uploadElem = uploadDiv.getElementsByTagName('input')[0];\n                var uploadBtnElem = uploadDiv.getElementsByTagName('button')[0];\n                uploadBtnElem.className = 'e-tbar-btn e-tbtn-txt e-btn top-icon';\n                uploadBtnElem.innerHTML = '';\n                uploadBtnElem.appendChild(this.createElement('span', {\n                    className: 'e-btn-icon e-icons e-upload-icon e-icon-left'\n                }));\n                uploadElem.onchange = this.fileSelect.bind(this, uploadElem);\n            }\n        }\n    };\n    ImageEditor.prototype.cropSelectedState = function () {\n        if (!isNullOrUndefined(this.activeObj.shape) && this.activeObj.shape.split('-')[0] === 'crop') {\n            this.okBtn();\n        }\n    };\n    ImageEditor.prototype.renderAnnotationBtn = function () {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        var items = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Pen') > -1)) {\n            items.push({ text: this.l10n.getConstant('Pen'), id: 'pen', iconCss: 'e-icons e-free-pen' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Line') > -1)) {\n            items.push({ text: this.l10n.getConstant('Line'), id: 'line', iconCss: 'e-icons e-line' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Rectangle') > -1)) {\n            items.push({ text: this.l10n.getConstant('Rectangle'), id: 'rectangle', iconCss: 'e-icons e-rectangle' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Ellipse') > -1)) {\n            items.push({ text: this.l10n.getConstant('Ellipse'), id: 'ellipse', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Text') > -1)) {\n            items.push({ text: this.l10n.getConstant('Text'), id: 'text', iconCss: 'e-icons e-add-text' });\n        }\n        var drpDownBtn = new DropDownButton({ items: items, iconCss: 'e-icons e-annotation',\n            cssClass: 'e-image-popup',\n            open: function (args) {\n                if (_this.currObjType.isUndoAction) {\n                    _this.refreshUndoRedoColl();\n                }\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n            },\n            select: function (args) {\n                _this.cropSelectedState();\n                var isCropSelection = false;\n                var splitWords;\n                if (_this.activeObj.shape !== undefined) {\n                    splitWords = _this.activeObj.shape.split('-');\n                }\n                if (splitWords === undefined && _this.currObjType.isCustomCrop) {\n                    isCropSelection = true;\n                }\n                else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                    isCropSelection = true;\n                }\n                _this.currObjType.isCustomCrop = false;\n                if (isCropSelection || _this.togglePan) {\n                    _this.refreshActiveObj();\n                    _this.upperContext.clearRect(0, 0, _this.upperCanvas.width, _this.upperCanvas.height);\n                    _this.refreshToolbar('main');\n                }\n                switch (args.item.id) {\n                    case 'pen':\n                        proxy.tempFreehandCounter = proxy.freehandCounter;\n                        proxy.tempCurrentFreehandDrawIndex = proxy.currentFreehandDrawIndex;\n                        proxy.currentToolbar = 'pen';\n                        _this.freeHandDraw(true);\n                        break;\n                    case 'text':\n                        proxy.currentToolbar = 'text';\n                        _this.drawShapeText();\n                        break;\n                    default:\n                        proxy.currentToolbar = 'shapes';\n                        proxy.drawShape((args.item.id).toLowerCase());\n                        break;\n                }\n                _this.updateToolbarItems();\n            }\n        });\n        // Render initialized DropDownButton.\n        drpDownBtn.appendTo('#' + this.element.id + '_annotationBtn');\n    };\n    ImageEditor.prototype.renderCropBtn = function () {\n        var _this = this;\n        var items = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('CustomSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Custom'), id: 'custom', iconCss: 'e-icons e-custom' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('CircleSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Circle'), id: 'circle', iconCss: 'e-icons e-circle' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('SquareSelection') > -1)) {\n            items.push({ text: this.l10n.getConstant('Square'), id: 'square', iconCss: 'e-icons e-square' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('RatioSelection') > -1)) {\n            items.push({ text: '3:2', id: '3:2', iconCss: 'e-icons e-custom-a' });\n            items.push({ text: '4:3', id: '4:3', iconCss: 'e-icons e-custom-b' });\n            items.push({ text: '5:4', id: '5:4', iconCss: 'e-icons e-custom-c' });\n            items.push({ text: '7:5', id: '7:5', iconCss: 'e-icons e-custom-d' });\n            items.push({ text: '16:9', id: '16:9', iconCss: 'e-icons e-custom-e' });\n        }\n        var drpDownBtn = new DropDownButton({\n            open: function (args) {\n                if (_this.currObjType.isUndoAction) {\n                    _this.refreshUndoRedoColl();\n                }\n                if (_this.togglePan) {\n                    _this.cancelPan();\n                }\n                if (Browser.isDevice) {\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        args.element.parentElement.offsetHeight + 'px';\n                }\n                if (!isNullOrUndefined(_this.activeObj.shape) && _this.activeObj.shape.split('-').length > 1) {\n                    document.getElementById(_this.activeObj.shape.split('-')[1]).classList.add('e-selected');\n                }\n            },\n            items: items, select: this.cropSelect.bind(this),\n            iconCss: 'e-icons e-select', cssClass: 'e-image-popup'\n        });\n        drpDownBtn.appendTo('#' + this.element.id + '_cropBtn');\n    };\n    ImageEditor.prototype.renderTransformBtn = function () {\n        var _this = this;\n        var items = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('RotateLeft') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateLeft'), id: 'rotateleft', iconCss: 'e-icons e-anti-clock-wise' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('RotateRight') > -1)) {\n            items.push({ text: this.l10n.getConstant('RotateRight'), id: 'rotateright', iconCss: 'e-icons e-clock-wise' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('FlipHorizontal') > -1)) {\n            items.push({ text: this.l10n.getConstant('HorizontalFlip'), id: 'horizontalflip', iconCss: 'e-icons e-horizontal-flip' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('FlipVertical') > -1)) {\n            items.push({ text: this.l10n.getConstant('VerticalFlip'), id: 'verticalflip', iconCss: 'e-icons e-vertical-flip' });\n        }\n        var drpDownBtn = new DropDownButton({\n            open: function (args) {\n                if (_this.currObjType.isUndoAction) {\n                    _this.refreshUndoRedoColl();\n                }\n                if (Browser.isDevice) {\n                    var ht = args.element.parentElement.offsetHeight;\n                    args.element.parentElement.style.display = 'none';\n                    args.element.parentElement.style.top = drpDownBtn.element.getBoundingClientRect().top -\n                        ht + 'px';\n                    args.element.parentElement.style.display = 'block';\n                }\n            },\n            items: items, select: this.transformSelect.bind(this),\n            iconCss: 'e-icons e-transform', cssClass: 'e-image-popup'\n        });\n        drpDownBtn.appendTo('#' + this.element.id + '_transformBtn');\n    };\n    ImageEditor.prototype.renderSaveBtn = function () {\n        var imageEditorObj = getInstance(document.getElementById(this.element.id), ImageEditor_1);\n        var saveItems = [\n            { text: 'JPEG', id: 'jpeg' },\n            { text: 'PNG', id: 'png' },\n            { text: 'SVG', id: 'svg' }\n        ];\n        var ddbElem = document.getElementById(this.element.id + '_saveBtn');\n        if (ddbElem) {\n            // Initialize the DropDownButton component.\n            var saveDrpDownBtn = new DropDownButton({ items: saveItems, cssClass: 'e-caret-hide e-image-popup', iconCss: 'e-icons e-save',\n                select: function (args) {\n                    imageEditorObj.export(args.item.text);\n                }\n            });\n            saveDrpDownBtn.appendTo('#' + this.element.id + '_saveBtn');\n        }\n    };\n    ImageEditor.prototype.cropSelect = function (args) {\n        this.isCropTab = true;\n        this.zoomFactor = this.cropZoomFactor;\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var previousObj = this.getCurrentObj();\n        previousObj.objColl = extend([], this.objColl, [], true);\n        previousObj.pointColl = extend([], this.pointColl, [], true);\n        previousObj.afterCropActions = this.afterCropActions;\n        var text = args.item.id;\n        this.currentToolbar = 'crop';\n        this.currSelectionPoint = null;\n        this.select(text);\n        this.refreshToolbar('main', true, true);\n        this.refreshDropDownBtn(true);\n        this.updateUndoRedoColl('selectionTransform', previousObj, previousObj.objColl, previousObj.pointColl, prevCropObj);\n        this.enableDisableToolbarBtn();\n    };\n    ImageEditor.prototype.transformSelect = function (args) {\n        this.cropSelectedState();\n        this.currentSelectionPoint = null;\n        this.performTransformation(args.item.id);\n    };\n    ImageEditor.prototype.performTransformation = function (text) {\n        var tempZoomFactor = this.defaultZoomFactor;\n        var isUndoRedo = this.isUndoRedo;\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        if (this.defaultZoomFactor !== 0) {\n            this.transformCurrentObj = this.getCurrentObj();\n            this.transformCurrentObj.objColl = extend([], this.objColl, null, true);\n            this.transformCurrentObj.pointColl = extend({}, this.pointColl, null, true);\n            this.transformCurrentObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            this.isUndoRedo = true;\n            if (this.defaultZoomFactor > 0) {\n                this.zoom(-this.defaultZoomFactor);\n            }\n            else {\n                this.zoom(Math.abs(this.defaultZoomFactor));\n            }\n            this.isUndoRedo = isUndoRedo;\n        }\n        this.updateTransform(text);\n        if (tempZoomFactor !== 0) {\n            this.isUndoRedo = true;\n            this.zoom(tempZoomFactor);\n            this.isUndoRedo = isUndoRedo;\n            var state = '';\n            if (text === 'rotateleft' || text === 'rotateright') {\n                state = 'rotate';\n            }\n            else if (text === 'horizontalflip' || text === 'verticalflip') {\n                state = 'flip';\n            }\n            this.updateUndoRedoColl(state, this.transformCurrentObj, this.transformCurrentObj.objColl, this.transformCurrentObj.pointColl, prevCropObj);\n            this.transformCurrentObj = null;\n        }\n    };\n    ImageEditor.prototype.updateTransform = function (text) {\n        switch (text.toLowerCase()) {\n            case 'rotateleft':\n                this.rotate(-90);\n                break;\n            case 'rotateright':\n                this.rotate(90);\n                break;\n            case 'horizontalflip':\n                this.flip('Horizontal');\n                break;\n            case 'verticalflip':\n                this.flip('Vertical');\n                break;\n        }\n    };\n    ImageEditor.prototype.getShapesToolbarItem = function (items) {\n        var toolbarItems = [];\n        if (items.indexOf('fillColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: this.element.id + '_fillcolor',\n                cssClass: 'top-icon e-fill', tooltipText: this.l10n.getConstant('FillColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + this.element.id + '_fillColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: this.element.id + '_strokecolor',\n                cssClass: 'top-icon e-stroke', tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + this.element.id + '_borderColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ id: this.element.id + '_strokeWidth', cssClass: 'top-icon e-size', tooltipText: 'Stroke Width', align: 'Center',\n                type: 'Input', template: '<button id=\"' + this.element.id + '_borderWidthBtn\"></button>' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.initShapesToolbarItem = function (items) {\n        var _this = this;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getShapesToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.createShapeColor(items);\n                _this.createShapeBtn(items);\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                _this.trigger('toolbarCreated', { toolbarType: 'shapes' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.element.id + '_bottomToolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + this.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + this.element.id + '_toolbar');\n        }\n        this.enableDisableToolbarBtn();\n    };\n    ImageEditor.prototype.createShapeColor = function (items) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        if (items.indexOf('fillColor') > -1) {\n            this.element.querySelector('.e-template.e-fill').appendChild(this.createElement('input', {\n                id: this.element.id + '_shape_fill'\n            }));\n            var fillColor = new ColorPicker({\n                modeSwitcher: false, noColor: true, value: '',\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-fill-color',\n                change: function (args) {\n                    _this.pushActItemIntoObj();\n                    var prevCropObj = extend({}, _this.cropObj, {}, true);\n                    var prevObj = _this.getCurrentObj();\n                    prevObj.objColl = extend([], _this.objColl, [], true);\n                    prevObj.pointColl = extend([], _this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], _this.afterCropActions, [], true);\n                    _this.objColl.pop();\n                    proxy.activeObj.strokeSettings.fillColor = args.currentValue.hex;\n                    proxy.strokeSettings.fillColor = proxy.activeObj.strokeSettings.fillColor;\n                    _this.objColl.push(_this.activeObj);\n                    _this.updateUndoRedoColl('shapeTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                    proxy.redrawShape(proxy.objColl[proxy.objColl.length - 1]);\n                    if (args.currentValue.rgba === '') {\n                        fillDDB_1.element.children[0].classList.add('e-nocolor-item');\n                    }\n                    else {\n                        fillDDB_1.element.children[0].classList.remove('e-nocolor-item');\n                        fillDDB_1.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    }\n                    fillDDB_1.toggle();\n                }\n            }, '#' + this.element.id + '_shape_fill');\n            var fillDDB_1 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fillDDB_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = _this.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-shape-fill-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + this.element.id + '_fillColorBtn');\n            fillColor.inline = true;\n            this.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview').classList.add('e-nocolor-item');\n        }\n        if (items.indexOf('strokeColor') > -1) {\n            this.element.querySelector('.e-template.e-stroke').appendChild(this.createElement('input', {\n                id: this.element.id + '_shape_stroke'\n            }));\n            var strokeColor = new ColorPicker({\n                modeSwitcher: false, noColor: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-shape-stroke-color',\n                change: function (args) {\n                    _this.pushActItemIntoObj();\n                    var prevCropObj = extend({}, _this.cropObj, {}, true);\n                    var prevObj = _this.getCurrentObj();\n                    prevObj.objColl = extend([], _this.objColl, [], true);\n                    prevObj.pointColl = extend([], _this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], _this.afterCropActions, [], true);\n                    _this.objColl.pop();\n                    proxy.activeObj.strokeSettings.strokeColor = args.currentValue.hex;\n                    proxy.strokeSettings.strokeColor = proxy.activeObj.strokeSettings.strokeColor;\n                    if (!proxy.togglePen) {\n                        _this.objColl.push(_this.activeObj);\n                        proxy.updateUndoRedoColl('shapeTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                        proxy.redrawShape(proxy.objColl[proxy.objColl.length - 1]);\n                    }\n                    strokeDDB_1.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_1.toggle();\n                }\n            }, '#' + this.element.id + '_shape_stroke');\n            var strokeDDB_1 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = _this.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-shape-stroke-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + this.element.id + '_borderColorBtn');\n            strokeColor.inline = true;\n            this.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview').style.background = '#fff';\n        }\n    };\n    ImageEditor.prototype.createShapeBtn = function (items) {\n        var _this = this;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('XSmall') },\n            { id: '2', text: this.l10n.getConstant('Small') },\n            { id: '3', text: this.l10n.getConstant('Medium') },\n            { id: '4', text: this.l10n.getConstant('Large') },\n            { id: '5', text: this.l10n.getConstant('XLarge') }\n        ];\n        if (items.indexOf('strokeWidth') > -1) {\n            var strokeWidthBtn = document.getElementById(this.element.id + '_borderWidthBtn');\n            var spanElem_1 = document.createElement('span');\n            spanElem_1.innerHTML = this.l10n.getConstant('Small');\n            spanElem_1.className = 'e-shape-stroke-width';\n            strokeWidthBtn.appendChild(spanElem_1);\n            // Initialize the DropDownButton component.\n            var drpDownBtn_1 = new DropDownButton({ items: strokeWidthItems,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = spanElem_1.innerHTML;\n                    if (activeBtn !== '') {\n                        args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                    }\n                },\n                select: function (args) {\n                    _this.pushActItemIntoObj();\n                    var prevCropObj = extend({}, _this.cropObj, {}, true);\n                    var prevObj = _this.getCurrentObj();\n                    prevObj.objColl = extend([], _this.objColl, [], true);\n                    prevObj.pointColl = extend([], _this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], _this.afterCropActions, [], true);\n                    _this.objColl.pop();\n                    spanElem_1.textContent = args.item.text;\n                    _this.activeObj.strokeSettings.strokeWidth = parseInt(args.item.id, 10);\n                    _this.activeObj.strokeSettings.strokeWidth *= 2;\n                    _this.strokeSettings.strokeWidth = _this.activeObj.strokeSettings.strokeWidth;\n                    _this.objColl.push(_this.activeObj);\n                    _this.updateUndoRedoColl('shapeTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                    _this.redrawShape(_this.objColl[_this.objColl.length - 1]);\n                    if (Browser.isDevice) {\n                        if (!isNullOrUndefined(document.getElementById(_this.element.id + '_bottomToolbar'))) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_5 = getComponent(_this.element.id + '_bottomToolbar', 'toolbar');\n                            toolbar_5.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar'))) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_6 = getComponent(_this.element.id + '_toolbar', 'toolbar');\n                            toolbar_6.refreshOverflow();\n                        }\n                    }\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_1.appendTo('#' + this.element.id + '_borderWidthBtn');\n        }\n    };\n    ImageEditor.prototype.getTextToolbarItem = function (items) {\n        var toolbarItems = [];\n        if (items.indexOf('fontFamily') > -1) {\n            toolbarItems.push({ id: this.element.id + '_fontFamily', cssClass: 'top-icon e-img-font-family',\n                tooltipText: this.l10n.getConstant('FontFamily'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_fontFamilyBtn\"></button>' });\n        }\n        if (items.indexOf('fontStyle') > -1) {\n            toolbarItems.push({ id: this.element.id + '_fontStyle', cssClass: 'top-icon e-img-font-style',\n                tooltipText: this.l10n.getConstant('FontStyle'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_fontStyleBtn\"></button>' });\n        }\n        if (items.indexOf('fontSize') > -1) {\n            toolbarItems.push({ id: this.element.id + '_fontSize', cssClass: 'top-icon e-img-font-size',\n                tooltipText: this.l10n.getConstant('FontSize'), align: 'Center',\n                template: '<button id=\"' + this.element.id + '_fontSizeBtn\"></button>' });\n        }\n        if (items.indexOf('fontColor') > -1) {\n            toolbarItems.push({ cssClass: 'top-icon e-text-font-color', id: this.element.id + '_text_strokecolor',\n                tooltipText: this.l10n.getConstant('FontColor'), align: 'Center',\n                type: 'Input', template: '<button id=\"' + this.element.id + '_fontColorBtn\"></button>' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.getFontFamilyItems = function () {\n        if (Browser.isDevice) {\n            return [{ id: 'arial', text: 'ABC' }, { id: 'calibri', text: 'ABC' }, { id: 'georgia', text: 'ABC' },\n                { id: 'roboto', text: 'ABC' }, { id: 'tahoma', text: 'ABC' }];\n        }\n        return [{ id: 'arial', text: 'Arial' }, { id: 'calibri', text: 'Calibri' }, { id: 'georgia', text: 'Georgia' },\n            { id: 'roboto', text: 'Roboto' }, { id: 'tahoma', text: 'Tahoma' }];\n    };\n    ImageEditor.prototype.getFontSizeItems = function () {\n        if (Browser.isDevice) {\n            return [{ id: 'default', text: this.l10n.getConstant('ABC') }, { id: 'bold', text: this.l10n.getConstant('ABC') },\n                { id: 'italic', text: this.l10n.getConstant('ABC') }, { id: 'bolditalic', text: this.l10n.getConstant('ABC') }];\n        }\n        return [{ id: 'default', text: this.l10n.getConstant('Default') }, { id: 'bold', text: this.l10n.getConstant('Bold') },\n            { id: 'italic', text: this.l10n.getConstant('Italic') }, { id: 'bolditalic', text: this.l10n.getConstant('BoldItalic') }];\n    };\n    ImageEditor.prototype.initTextToolbarItem = function (items) {\n        var _this = this;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getTextToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.createTextColor(items);\n                _this.createTextBtn(items);\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                _this.trigger('toolbarCreated', { toolbarType: 'text' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.element.id + '_bottomToolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + this.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + this.element.id + '_toolbar');\n        }\n        this.enableDisableToolbarBtn();\n    };\n    ImageEditor.prototype.createTextColor = function (items) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        if (items.indexOf('fontColor') > -1) {\n            this.element.querySelector('.e-template.e-text-font-color').appendChild(this.createElement('input', {\n                id: this.element.id + '_text_font'\n            }));\n            var fontColor = new ColorPicker({\n                modeSwitcher: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-text-fontt-color',\n                change: function (args) {\n                    _this.pushActItemIntoObj();\n                    var prevCropObj = extend({}, _this.cropObj, {}, true);\n                    var prevObj = _this.getCurrentObj();\n                    prevObj.objColl = extend([], _this.objColl, [], true);\n                    prevObj.pointColl = extend([], _this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], _this.afterCropActions, [], true);\n                    _this.objColl.pop();\n                    if (proxy.textArea.style.display === 'none') {\n                        proxy.strokeSettings.strokeColor = proxy.activeObj.strokeSettings.strokeColor = args.currentValue.hex;\n                        if (!proxy.togglePen) {\n                            _this.objColl.push(_this.activeObj);\n                            proxy.updateUndoRedoColl('shapeTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                            proxy.redrawShape(proxy.objColl[proxy.objColl.length - 1]);\n                        }\n                    }\n                    else if (proxy.textArea.style.display === 'block') {\n                        proxy.textArea.style.color = args.currentValue.hex;\n                        var temp = proxy.activeObj.strokeSettings.strokeColor;\n                        proxy.activeObj.strokeSettings.strokeColor = args.currentValue.hex;\n                        _this.objColl.push(_this.activeObj);\n                        _this.updateUndoRedoColl('textAreaCustomization', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                        _this.objColl.pop();\n                        proxy.activeObj.strokeSettings.strokeColor = temp;\n                    }\n                    else if (!proxy.togglePen) {\n                        _this.objColl.push(_this.activeObj);\n                        _this.updateUndoRedoColl('shapeTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                        proxy.redrawShape(proxy.objColl[proxy.objColl.length - 1]);\n                    }\n                    strokeDDB_2.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_2.toggle();\n                }\n            }, '#' + this.element.id + '_text_font');\n            var strokeDDB_2 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB_2.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = _this.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-text-fontt-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + this.element.id + '_fontColorBtn');\n            fontColor.inline = true;\n            this.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview').style.background\n                = '#fff';\n        }\n    };\n    ImageEditor.prototype.pushActItemIntoObj = function () {\n        if (this.textArea.style.display === 'none') {\n            this.objColl.push(this.activeObj);\n        }\n        else {\n            var temp = extend({}, this.activeObj, {}, true);\n            this.setTextBoxStylesToActObj();\n            this.objColl.push(this.activeObj);\n            this.activeObj = temp;\n        }\n    };\n    ImageEditor.prototype.createTextBtn = function (items) {\n        var _this = this;\n        if (items.indexOf('fontFamily') > -1) {\n            var fontNameBtn = document.getElementById(this.element.id + '_fontFamilyBtn');\n            var spanElem_2 = document.createElement('span');\n            if (Browser.isDevice) {\n                spanElem_2.innerHTML = 'ABC';\n                spanElem_2.setAttribute('style', 'font-family: arial');\n            }\n            else {\n                spanElem_2.innerHTML = 'Arial';\n            }\n            spanElem_2.className = 'e-text-font-family';\n            fontNameBtn.appendChild(spanElem_2);\n            var fontFamilyBtn_1 = new DropDownButton({ items: this.getFontFamilyItems(),\n                cssClass: 'e-font-family',\n                createPopupOnClick: true,\n                beforeItemRender: function (args) {\n                    args.element.setAttribute('style', 'font-family:' + args.element.id);\n                },\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontFamilyBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var fontFamily;\n                    if (_this.textArea.style.display === 'block') {\n                        fontFamily = _this.textArea.style.fontFamily;\n                    }\n                    else {\n                        fontFamily = _this.activeObj.textSettings.fontFamily;\n                    }\n                    args.element.querySelector('[id *= ' + '\"' + fontFamily.toLowerCase()\n                        + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    _this.pushActItemIntoObj();\n                    var objColl = extend([], _this.objColl, [], true);\n                    var prevCropObj = extend({}, _this.cropObj, {}, true);\n                    var prevObj = _this.getCurrentObj();\n                    prevObj.objColl = extend([], _this.objColl, [], true);\n                    prevObj.pointColl = extend([], _this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], _this.afterCropActions, [], true);\n                    _this.objColl.pop();\n                    spanElem_2.textContent = args.item.text;\n                    if (Browser.isDevice) {\n                        spanElem_2.setAttribute('style', 'font-family:' + args.item.id);\n                    }\n                    if (_this.textArea.style.display === 'block') {\n                        _this.updateFontRatio(_this.activeObj, true);\n                        var temp = _this.activeObj.textSettings.fontFamily;\n                        _this.activeObj.textSettings.fontFamily = _this.toPascalCase(args.item.id);\n                        _this.redrawText();\n                        _this.objColl.push(_this.activeObj);\n                        _this.updateUndoRedoColl('textAreaCustomization', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                        _this.objColl.pop();\n                        _this.upperContext.clearRect(0, 0, _this.upperCanvas.width, _this.upperCanvas.height);\n                        var width = _this.activeObj.activePoint.width +\n                            _this.activeObj.textSettings.fontSize * 0.25;\n                        _this.textArea.style.width = width + 'px';\n                        _this.textArea.style.fontFamily = _this.toPascalCase(args.item.id);\n                        _this.activeObj.textSettings.fontFamily = temp;\n                        _this.updateFontStyles();\n                    }\n                    else {\n                        _this.updateFontRatio(_this.activeObj);\n                        _this.textSettings.fontFamily = _this.activeObj.textSettings.fontFamily = _this.toPascalCase(args.item.id);\n                        _this.redrawText();\n                        _this.objColl.push(_this.activeObj);\n                        _this.updateUndoRedoColl('shapeTransform', prevObj, objColl, extend([], _this.pointColl, [], true), prevCropObj);\n                        _this.redrawShape(_this.objColl[_this.objColl.length - 1]);\n                    }\n                }\n            });\n            fontFamilyBtn_1.appendTo('#' + this.element.id + '_fontFamilyBtn');\n        }\n        if (items.indexOf('fontStyle') > -1) {\n            var fontStyleBtnElem = document.getElementById(this.element.id + '_fontStyleBtn');\n            var span1Elem_1 = document.createElement('span');\n            if (Browser.isDevice) {\n                span1Elem_1.innerHTML = this.l10n.getConstant('ABC');\n            }\n            else {\n                span1Elem_1.innerHTML = this.l10n.getConstant('Default');\n            }\n            span1Elem_1.className = 'e-text-font-style';\n            fontStyleBtnElem.appendChild(span1Elem_1);\n            var fontStyleBtn_1 = new DropDownButton({ items: this.getFontSizeItems(),\n                cssClass: 'e-font-style',\n                createPopupOnClick: true,\n                beforeItemRender: function (args) {\n                    if (Browser.isDevice) {\n                        if (args.element.id === 'bold') {\n                            args.element.setAttribute('style', 'font-weight: bold');\n                        }\n                        else if (args.element.id === 'italic') {\n                            args.element.setAttribute('style', 'font-style: italic');\n                        }\n                        else if (args.element.id === 'bolditalic') {\n                            args.element.setAttribute('style', 'font-style: italic;font-weight: bold');\n                        }\n                    }\n                },\n                open: function (args) {\n                    var fontStyle = 'default';\n                    if (_this.textArea.style.display === 'block') {\n                        if (_this.textArea.style.fontWeight === 'bold') {\n                            fontStyle = 'bold';\n                        }\n                        if (_this.textArea.style.fontStyle === 'italic') {\n                            fontStyle = fontStyle.replace('default', '');\n                            fontStyle += 'italic';\n                        }\n                    }\n                    else {\n                        if (_this.activeObj.textSettings.bold) {\n                            fontStyle = 'bold';\n                        }\n                        if (_this.activeObj.textSettings.italic) {\n                            fontStyle = fontStyle.replace('default', '');\n                            fontStyle += 'italic';\n                        }\n                    }\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontStyleBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    args.element.querySelector('[id *= ' + '\"' + fontStyle + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    if (Browser.isDevice) {\n                        if (args.item.id === 'bold') {\n                            span1Elem_1.setAttribute('style', 'font-weight: bold');\n                        }\n                        else if (args.item.id === 'italic') {\n                            span1Elem_1.setAttribute('style', 'font-style: italic');\n                        }\n                        else if (args.item.id === 'bolditalic') {\n                            span1Elem_1.setAttribute('style', 'font-style: italic;font-weight: bold');\n                        }\n                        _this.applyFontStyle(args.item.id);\n                    }\n                    else {\n                        span1Elem_1.textContent = args.item.text;\n                        _this.applyFontStyle(args.item.id);\n                    }\n                }\n            });\n            fontStyleBtn_1.appendTo('#' + this.element.id + '_fontStyleBtn');\n        }\n        if (items.indexOf('fontSize') > -1) {\n            var fontSizeBtnElem = document.getElementById(this.element.id + '_fontSizeBtn');\n            var fontSizeSpanElem_1 = document.createElement('span');\n            var fontSizes = this.getFontSizes();\n            fontSizeSpanElem_1.innerHTML = fontSizes[0].text;\n            fontSizeSpanElem_1.className = 'e-text-font-size';\n            fontSizeBtnElem.appendChild(fontSizeSpanElem_1);\n            var fontSizeBtn_1 = new DropDownButton({\n                cssClass: 'e-font-size',\n                items: fontSizes,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = fontSizeBtn_1.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = fontSizeSpanElem_1.innerHTML;\n                    args.element.querySelector('[aria-label *= ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    _this.pushActItemIntoObj();\n                    var prevCropObj = extend({}, _this.cropObj, {}, true);\n                    var prevObj = _this.getCurrentObj();\n                    prevObj.objColl = extend([], _this.objColl, [], true);\n                    prevObj.pointColl = extend([], _this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], _this.afterCropActions, [], true);\n                    _this.objColl.pop();\n                    fontSizeSpanElem_1.textContent = args.item.text;\n                    if (_this.textArea.style.display === 'block') {\n                        _this.updateFontRatio(_this.activeObj, true);\n                        var temp = _this.activeObj.textSettings.fontSize;\n                        _this.activeObj.textSettings.fontSize = parseInt(_this.fontSizeColl[(parseInt(args.item.text, 10) - 1)].text, 10);\n                        _this.objColl.push(_this.activeObj);\n                        _this.updateUndoRedoColl('textAreaCustomization', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                        _this.objColl.pop();\n                        var textStyle = '';\n                        if (_this.textArea.style.fontWeight === 'bold') {\n                            textStyle = 'bold ';\n                        }\n                        if (_this.textArea.style.fontStyle === 'italic') {\n                            textStyle = 'italic ';\n                        }\n                        if (_this.textArea.style.fontWeight === 'bold' && _this.textArea.style.fontStyle === 'italic') {\n                            textStyle = 'italic bold ';\n                        }\n                        _this.upperContext.font = textStyle + _this.activeObj.textSettings.fontSize + 'px' + ' ' + _this.textArea.style.fontFamily;\n                        var rows = _this.textArea.value.split('\\n');\n                        var text = _this.getMaxText(true);\n                        var width = _this.upperContext.measureText(text).width +\n                            _this.activeObj.textSettings.fontSize * 0.5;\n                        _this.textArea.style.width = width + 'px';\n                        _this.textArea.style.height = rows.length * (_this.activeObj.textSettings.fontSize + _this.activeObj.textSettings.fontSize * 0.25) + 'px';\n                        _this.activeObj.textSettings.fontSize = temp;\n                        _this.upperContext.font = _this.activeObj.textSettings.fontSize + 'px' + ' ' + _this.activeObj.textSettings.fontFamily;\n                        _this.textArea.style.fontSize = parseInt(_this.fontSizeColl[(parseInt(args.item.text, 10) - 1)].text, 10) + 'px';\n                        if (_this.textArea.style.fontFamily === 'georgia') {\n                            _this.textArea.style.width = parseFloat(_this.textArea.style.width) + parseFloat(_this.textArea.style.fontSize) + 'px';\n                        }\n                    }\n                    else {\n                        _this.updateFontRatio(_this.activeObj);\n                        _this.textSettings.fontSize = _this.activeObj.textSettings.fontSize = parseInt(_this.fontSizeColl[(parseInt(args.item.text, 10) - 1)].text, 10);\n                        _this.upperContext.font = _this.activeObj.textSettings.fontSize + 'px' + ' ' + _this.activeObj.textSettings.fontFamily;\n                        var rows = _this.activeObj.keyHistory.split('\\n');\n                        var text = _this.getMaxText();\n                        var width = _this.upperContext.measureText(text).width +\n                            _this.activeObj.textSettings.fontSize * 0.5;\n                        var height = rows.length * (_this.activeObj.textSettings.fontSize +\n                            _this.activeObj.textSettings.fontSize * 0.25);\n                        _this.setTextSelection(width, height);\n                        _this.updateActiveObject(_this.activeObj.activePoint, _this.activeObj);\n                        _this.redrawText();\n                        _this.objColl.push(_this.activeObj);\n                        _this.updateUndoRedoColl('shapeTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                        _this.redrawShape(_this.objColl[_this.objColl.length - 1]);\n                    }\n                }\n            });\n            fontSizeBtn_1.appendTo('#' + this.element.id + '_fontSizeBtn');\n        }\n    };\n    ImageEditor.prototype.getFontSizes = function () {\n        var items = [];\n        this.fontSizeColl = [];\n        var fontSize;\n        if (this.degree === 0 || this.degree % 180 === 0) {\n            fontSize = this.destWidth / 25;\n        }\n        else {\n            fontSize = this.destHeight / 25;\n        }\n        for (var i = 1; i <= 10; i++) {\n            this.fontSizeColl.push({ text: (i * (Math.round(fontSize / 2))).toString() });\n            items.push({ text: (i.toString()) });\n        }\n        return items;\n    };\n    ImageEditor.prototype.getTextAreaWidth = function (item) {\n        var tempBold = this.activeObj.textSettings.bold;\n        var tempItalic = this.activeObj.textSettings.italic;\n        switch (item) {\n            case 'default':\n                this.activeObj.textSettings.bold = false;\n                this.activeObj.textSettings.italic = false;\n                break;\n            case 'bold':\n                this.activeObj.textSettings.bold = true;\n                this.activeObj.textSettings.italic = false;\n                break;\n            case 'italic':\n                this.activeObj.textSettings.bold = false;\n                this.activeObj.textSettings.italic = true;\n                break;\n            case 'bolditalic':\n                this.activeObj.textSettings.bold = true;\n                this.activeObj.textSettings.italic = true;\n                break;\n        }\n        this.updateFontStyles();\n        var width;\n        if (this.textArea.style.display === 'none') {\n            width = this.upperContext.measureText(this.activeObj.keyHistory).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n        }\n        else {\n            width = this.upperContext.measureText(this.textArea.value).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n        }\n        this.activeObj.textSettings.bold = tempBold;\n        this.activeObj.textSettings.italic = tempItalic;\n        return width;\n    };\n    ImageEditor.prototype.updateUndoRedoObj = function (objColl) {\n        if (this.allowUndoRedo) {\n            this.objColl.push(this.activeObj);\n            var cropObj = extend({}, this.cropObj, {}, true);\n            var obj = this.getCurrentObj();\n            obj.objColl = extend([], this.objColl, [], true);\n            obj.pointColl = extend([], this.pointColl, [], true);\n            obj.afterCropActions = extend([], this.afterCropActions, [], true);\n            this.undoRedoColl.push({ operation: 'shapeTransform', previousObj: obj, currentObj: obj,\n                previousObjColl: objColl, currentObjColl: obj.objColl,\n                previousPointColl: obj.pointColl, currentPointColl: obj.pointColl,\n                previousCropObj: cropObj, currentCropObj: cropObj });\n            this.undoRedoStep++;\n            this.redrawShape(this.objColl[this.objColl.length - 1]);\n        }\n    };\n    ImageEditor.prototype.updateObjColl = function (item, objColl) {\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        var tempBold = this.activeObj.textSettings.bold;\n        var tempItalic = this.activeObj.textSettings.italic;\n        switch (item) {\n            case 'default':\n                this.activeObj.textSettings.bold = false;\n                this.activeObj.textSettings.italic = false;\n                break;\n            case 'bold':\n                this.activeObj.textSettings.bold = true;\n                this.activeObj.textSettings.italic = false;\n                break;\n            case 'italic':\n                this.activeObj.textSettings.bold = false;\n                this.activeObj.textSettings.italic = true;\n                break;\n            case 'bolditalic':\n                this.activeObj.textSettings.bold = true;\n                this.activeObj.textSettings.italic = true;\n                break;\n        }\n        this.objColl.push(this.activeObj);\n        this.updateUndoRedoColl('textAreaCustomization', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n        this.objColl.pop();\n        this.activeObj.textSettings.bold = tempBold;\n        this.activeObj.textSettings.italic = tempItalic;\n    };\n    ImageEditor.prototype.applyFontStyle = function (item) {\n        this.pushActItemIntoObj();\n        var objColl = extend([], this.objColl, [], true);\n        this.objColl.pop();\n        if (this.textArea.style.display === 'none') {\n            this.updateFontRatio(this.activeObj);\n        }\n        else {\n            this.updateFontRatio(this.activeObj, true);\n        }\n        switch (item) {\n            case 'default':\n                if (this.textArea.style.display === 'block') {\n                    var width = this.getTextAreaWidth(item);\n                    this.textArea.style.width = width + 'px';\n                    this.textArea.style.fontWeight = 'normal';\n                    this.textArea.style.fontStyle = 'normal';\n                    this.updateObjColl(item, objColl);\n                }\n                else {\n                    this.textSettings.bold = this.activeObj.textSettings.bold = false;\n                    this.textSettings.italic = this.activeObj.textSettings.italic = false;\n                    this.redrawText();\n                    this.updateUndoRedoObj(objColl);\n                }\n                break;\n            case 'bold':\n                if (this.textArea.style.display === 'block') {\n                    var width = this.getTextAreaWidth(item);\n                    this.textArea.style.width = width + 'px';\n                    this.textArea.style.fontWeight = 'bold';\n                    this.textArea.style.fontStyle = 'normal';\n                    this.updateObjColl(item, objColl);\n                }\n                else {\n                    this.textSettings.bold = this.activeObj.textSettings.bold = true;\n                    this.textSettings.italic = this.activeObj.textSettings.italic = false;\n                    this.redrawText();\n                    this.updateUndoRedoObj(objColl);\n                }\n                break;\n            case 'italic':\n                if (this.textArea.style.display === 'block') {\n                    var width = this.getTextAreaWidth(item);\n                    this.textArea.style.width = width + 'px';\n                    this.textArea.style.fontWeight = 'normal';\n                    this.textArea.style.fontStyle = 'italic';\n                    this.updateObjColl(item, objColl);\n                }\n                else {\n                    this.textSettings.bold = this.activeObj.textSettings.bold = false;\n                    this.textSettings.italic = this.activeObj.textSettings.italic = true;\n                    this.redrawText();\n                    this.updateUndoRedoObj(objColl);\n                }\n                break;\n            case 'bolditalic':\n                if (this.textArea.style.display === 'block') {\n                    var width = this.getTextAreaWidth(item);\n                    this.textArea.style.width = width + 'px';\n                    this.textArea.style.fontWeight = 'bold';\n                    this.textArea.style.fontStyle = 'italic';\n                    this.updateObjColl(item, objColl);\n                }\n                else {\n                    this.textSettings.bold = this.activeObj.textSettings.bold = true;\n                    this.textSettings.italic = this.activeObj.textSettings.italic = true;\n                    this.redrawText();\n                    this.updateUndoRedoObj(objColl);\n                }\n                break;\n        }\n    };\n    ImageEditor.prototype.initZoomToolbarItem = function () {\n        var _this = this;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        this.defToolbarItems = leftItem.concat(zoomItem, rightItem);\n        new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.renderSaveBtn();\n                _this.trigger('toolbarCreated', { toolbarType: 'zoom' });\n            }\n        }, '#' + this.element.id + '_toolbar');\n        this.createLeftToolbarControls();\n        this.enableDisableToolbarBtn();\n        if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var toolbar_7 = getComponent(this.element.id + '_toolbar', 'toolbar');\n            toolbar_7.refreshOverflow();\n        }\n    };\n    ImageEditor.prototype.refreshUndoRedoColl = function () {\n        this.undoRedoColl = this.undoRedoColl.slice(0, this.undoRedoStep);\n        this.isUndoRedo = this.currObjType.isUndoAction = false;\n        this.enableDisableToolbarBtn();\n    };\n    ImageEditor.prototype.applyPreviewFilter = function () {\n        if (!isNullOrUndefined(document.querySelector('#' + this.element.id + '_sliderWrapper')) ||\n            this.currObjType.isFiltered) {\n            this.initialAdjustmentValue = this.canvasFilter = this.lowerContext.filter;\n            this.currObjType.isFiltered = false;\n        }\n    };\n    ImageEditor.prototype.contextualToolbarClicked = function (args) {\n        var selEle = this.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n        if (selEle) {\n            selEle.classList.remove('e-selected');\n        }\n        document.getElementById(args.item.id + 'Canvas').parentElement.parentElement.classList.add('e-selected');\n        this.currObjType.isFiltered = true;\n        var type = args.item.id.replace(this.element.id, '').split('_')[1];\n        var imageFiltering = { filter: this.toPascalCase(type) };\n        this.trigger('imageFiltering', imageFiltering);\n        this.setFilter(type.toLowerCase());\n        this.currentFilter = args.item.id;\n        this.enableDisableToolbarBtn();\n    };\n    ImageEditor.prototype.defToolbarClicked = function (args) {\n        var isContextualToolbar = false;\n        if (this.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            if (!this.element.querySelector('.e-contextual-toolbar-wrapper').classList.contains('e-hide')) {\n                isContextualToolbar = true;\n            }\n            this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n        }\n        var zoomIn;\n        var type = args.item.id.replace(this.element.id + '_', '').toLowerCase();\n        var imageEditorObj = getInstance(document.getElementById(this.element.id), ImageEditor_1);\n        var isCropSelection = false;\n        var panBtn;\n        var splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && this.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        var isDisabledZoomOut = false;\n        var isDisabledFilter = false;\n        var isDisabledAdjustment = false;\n        var zoomOut = document.querySelector('#' + this.element.id + '_zoomOut');\n        if (!isNullOrUndefined(zoomOut) && zoomOut.classList.contains('e-disabled')) {\n            isDisabledZoomOut = true;\n        }\n        var adjustment = document.querySelector('#' + this.element.id + '_adjustment');\n        if (!isNullOrUndefined(adjustment) && adjustment.classList.contains('e-disabled')) {\n            isDisabledAdjustment = true;\n        }\n        var filter = document.querySelector('#' + this.element.id + '_filter');\n        if (!isNullOrUndefined(filter) && filter.classList.contains('e-disabled')) {\n            isDisabledFilter = true;\n        }\n        this.enableDisableToolbarBtn();\n        if (!this.disabled) {\n            switch (type) {\n                case 'zoomin':\n                    if (this.isFreehandDrawEditing) {\n                        this.applyFreehandDraw();\n                    }\n                    this.applyPreviewFilter();\n                    this.currObjType.isFiltered = false;\n                    if (this.currObjType.isUndoAction) {\n                        this.refreshUndoRedoColl();\n                    }\n                    if (this.togglePen) {\n                        this.currObjType.isZoomed = true;\n                        this.freeHandDraw(false);\n                    }\n                    this.currentSelectionPoint = null;\n                    imageEditorObj.zoom(.1);\n                    break;\n                case 'zoomout':\n                    if (!isDisabledZoomOut) {\n                        if (this.isFreehandDrawEditing) {\n                            this.applyFreehandDraw();\n                        }\n                        this.applyPreviewFilter();\n                        this.currObjType.isFiltered = false;\n                        if (this.currObjType.isUndoAction) {\n                            this.refreshUndoRedoColl();\n                        }\n                        if (this.togglePen) {\n                            this.currObjType.isZoomed = true;\n                            this.freeHandDraw(false);\n                        }\n                        this.currentSelectionPoint = null;\n                        imageEditorObj.zoom(-.1);\n                    }\n                    break;\n                case 'pan':\n                    this.currObjType.isCustomCrop = this.currObjType.isFiltered = false;\n                    if (this.currObjType.isUndoAction) {\n                        this.refreshUndoRedoColl();\n                    }\n                    if (isCropSelection) {\n                        this.currObjType.isCustomCrop = false;\n                        this.refreshActiveObj();\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.refreshToolbar('main');\n                    }\n                    if (this.togglePan) {\n                        this.cancelPan();\n                        this.disablePan = true;\n                        if (this.currentToolbar === 'pen') {\n                            this.freeHandDraw(true);\n                        }\n                    }\n                    else {\n                        panBtn = this.element.querySelector('.e-img-pan .e-btn');\n                        if (!isNullOrUndefined(panBtn)) {\n                            panBtn.classList.add('e-selected-btn');\n                        }\n                        imageEditorObj.pan(true);\n                        this.disablePan = false;\n                    }\n                    zoomIn = document.querySelector('#' + this.element.id + '_zoomIn');\n                    if (!isNullOrUndefined(zoomIn) && this.zoomFactor >= 2) {\n                        zoomIn.classList.add('e-disabled');\n                        zoomIn.parentElement.classList.add('e-overlay');\n                    }\n                    else if (!isNullOrUndefined(zoomIn)) {\n                        zoomIn.classList.remove('e-disabled');\n                        zoomIn.parentElement.classList.remove('e-overlay');\n                    }\n                    this.refreshToolbar('main');\n                    break;\n                case 'cancel':\n                    this.performCancel(isContextualToolbar);\n                    break;\n                case 'ok':\n                    this.okBtn();\n                    this.refreshDropDownBtn(false);\n                    this.currentToolbar = 'main';\n                    break;\n                case 'crop':\n                    if (!isNullOrUndefined(this.currSelectionPoint)) {\n                        if (this.currObjType.isUndoAction) {\n                            this.refreshUndoRedoColl();\n                        }\n                        if (!isNullOrUndefined(this.cropObj.activeObj.shape)) {\n                            this.select(this.cropObj.activeObj.shape);\n                        }\n                        this.refreshToolbar('main', true, true);\n                        getComponent(this.element.querySelector('#' + this.element.id + '_cropBtn'), 'dropdown-btn').toggle();\n                        if (!isNullOrUndefined(this.activeObj.shape)) {\n                            document.getElementById(this.activeObj.shape.split('-')[1]).classList.add('e-selected');\n                        }\n                    }\n                    break;\n                case 'reset':\n                    imageEditorObj.reset();\n                    this.currentToolbar = 'main';\n                    break;\n                // case 'undo':\n                //     this.callUndo();\n                //     break;\n                // case 'redo':\n                //     this.callRedo();\n                //     break;\n                case 'adjustment':\n                    if (!isDisabledAdjustment) {\n                        this.refreshToolbar('adjustment');\n                        this.setTempFilterProperties();\n                        this.openSlider('brightness');\n                    }\n                    break;\n                case 'brightness':\n                case 'contrast':\n                case 'hue':\n                case 'saturation':\n                case 'opacity':\n                case 'blur':\n                case 'exposure':\n                    this.openSlider(type);\n                    break;\n                case 'filter':\n                    if (!isDisabledFilter) {\n                        this.refreshToolbar('filter');\n                        this.setTempFilterProperties();\n                    }\n                    break;\n                case 'default':\n                case 'chrome':\n                case 'cold':\n                case 'warm':\n                case 'grayscale':\n                case 'blackandwhite':\n                case 'sepia':\n                case 'invert':\n                case 'sharpen':\n                    if (this.currObjType.isUndoAction) {\n                        this.refreshUndoRedoColl();\n                    }\n                    this.currObjType.isFiltered = true;\n                    this.setFilter(type);\n                    break;\n            }\n        }\n        this.trigger('toolbarItemClicked', args);\n    };\n    ImageEditor.prototype.performCancel = function (isContextualToolbar) {\n        isContextualToolbar = isContextualToolbar ? isContextualToolbar : false;\n        if (this.isFreehandDrawEditing) {\n            this.cancelFreehandDraw();\n        }\n        else if (this.textArea.style.display === 'block') {\n            this.textArea.style.display = 'none';\n            this.textArea.value = '';\n            this.textArea.style.transform = '';\n            this.activeObj.strokeSettings = this.tempStrokeSettings;\n            this.activeObj.textSettings = this.tempTextSettings;\n        }\n        else if (!isNullOrUndefined(document.querySelector('#' + this.element.id + '_sliderWrapper')) ||\n            this.currObjType.isFiltered) {\n            this.lowerContext.filter = this.adjustmentValue = this.initialAdjustmentValue = this.tempAdjustmentValue;\n            if (this.lowerContext.filter.split(' ').length > 1 &&\n                this.lowerContext.filter.split(' ')[0].split('(')[1].split(')')[0] === '1') {\n                this.isBrightnessAdjusted = false;\n            }\n            this.currentFilter = this.tempFilter;\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.redrawImgWithObj();\n            this.currObjType.isFiltered = false;\n            this.adjustmentLevel = extend({}, this.tempAdjustmentLevel, {}, true);\n            this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            this.undoRedoStep = this.tempUndoRedoStep;\n            this.upperCanvas.style.cursor = 'default';\n            this.currObjType.isCustomCrop = false;\n            this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n            this.callMainToolbar();\n        }\n        else {\n            if (isContextualToolbar) {\n                this.callMainToolbar();\n            }\n            else {\n                this.cancelItems();\n                this.togglePan = this.dragCanvas = false;\n            }\n        }\n        this.enableDisableToolbarBtn();\n        this.refreshDropDownBtn(false);\n        this.currentToolbar = 'main';\n    };\n    ImageEditor.prototype.applyShape = function () {\n        if (!isNullOrUndefined(this.activeObj.shape) && (this.activeObj.shape === 'rectangle' ||\n            this.activeObj.shape === 'ellipse' || this.activeObj.shape === 'line' ||\n            this.activeObj.shape === 'text')) {\n            this.redrawActObj();\n            this.refreshActiveObj();\n            this.currentToolbar = 'main';\n            this.refreshToolbar('main');\n        }\n    };\n    ImageEditor.prototype.applyFreehandDraw = function () {\n        if (this.pointColl[this.freehandDrawSelectedIndex].strokeColor === '#42a5f5') {\n            this.pointColl[this.freehandDrawSelectedIndex].strokeColor = this.tempFreeHandDrawEditingStyles.strokeColor;\n        }\n        this.selectedFreehandColor = '#42a5f5';\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.renderImage();\n        this.refreshToolbar('main');\n        if (!isNullOrUndefined(this.pointColl[this.freehandDrawSelectedIndex])) {\n            this.pointColl[this.freehandDrawSelectedIndex].isSelected = false;\n        }\n        this.isFreehandDrawEditing = this.isFreehandDrawingPoint = false;\n        this.freehandDrawHoveredIndex = this.freehandDrawSelectedIndex = null;\n    };\n    ImageEditor.prototype.cancelFreehandDraw = function () {\n        this.selectedFreehandColor = '#42a5f5';\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        for (var n = 0; n < this.freehandCounter; n++) {\n            this.pointColl[n].strokeColor = this.tempFreeHandDrawEditingStyles.strokeColor;\n            this.pointColl[n].strokeWidth = this.tempFreeHandDrawEditingStyles.strokeWidth;\n        }\n        this.pointCounter = 0;\n        if (!isNullOrUndefined(this.pointColl[this.freehandDrawSelectedIndex])) {\n            this.pointColl[this.freehandDrawSelectedIndex].isSelected = false;\n        }\n        this.freehandDrawHoveredIndex = this.freehandDrawSelectedIndex = this.freehandDrawSelectedId = null;\n        this.isFreehandDrawEditing = this.isFreehandDrawingPoint = false;\n        this.tempFreeHandDrawEditingStyles = { strokeColor: null, strokeWidth: null, fillColor: null };\n        this.refreshToolbar('main');\n    };\n    ImageEditor.prototype.openSlider = function (type) {\n        this.unselectBtn();\n        this.currObjType.isFiltered = true;\n        this.refreshToolbar('color', null, null, null, type);\n        document.getElementById(this.element.id + '_' + type).classList.add('e-selected-btn');\n    };\n    ImageEditor.prototype.setTempFilterProperties = function () {\n        this.upperCanvas.style.display = 'block';\n        this.cropSelectedState();\n        this.lowerContext.filter = this.initialAdjustmentValue;\n        this.tempAdjustmentValue = this.lowerContext.filter;\n        this.tempAdjustmentLevel = extend({}, this.adjustmentLevel, {}, true);\n        this.tempFilter = this.currentFilter;\n        this.tempUndoRedoColl = extend([], this.undoRedoColl, [], true);\n        this.tempUndoRedoStep = this.undoRedoStep;\n    };\n    ImageEditor.prototype.okBtn = function () {\n        var isCropSelection = false;\n        var splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && this.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        var selElem = this.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n        if (selElem) {\n            this.currentFilter = selElem.children[0].children[0].id.replace('Canvas', '');\n        }\n        if (isCropSelection) {\n            this.crop();\n        }\n        else if (this.togglePen) {\n            this.freeHandDraw(false);\n        }\n        else if (this.textArea.style.display === 'block') {\n            this.redrawActObj();\n        }\n        else if (!isNullOrUndefined(document.querySelector('#' + this.element.id + '_sliderWrapper')) ||\n            this.currObjType.isFiltered) {\n            this.initialAdjustmentValue = this.canvasFilter = this.lowerContext.filter;\n            this.currObjType.isFiltered = false;\n        }\n        else if (this.isFreehandDrawEditing) {\n            this.applyFreehandDraw();\n        }\n        else {\n            this.applyActObj();\n        }\n        this.callMainToolbar(false);\n        this.isCropTab = false;\n        this.zoomFactor = this.defaultZoomFactor;\n    };\n    ImageEditor.prototype.updateBrightnessFilter = function () {\n        var splitWords = this.lowerContext.filter.split(' ');\n        if (this.isBrightnessAdjusted && splitWords.length > 0 && !isNullOrUndefined(splitWords[4])) {\n            var opacityValue = parseFloat(splitWords[4].split('(')[1]);\n            splitWords[4] = 'opacity(' + (opacityValue - 0.3) + ')';\n            this.lowerContext.filter = splitWords.join(' ');\n        }\n    };\n    ImageEditor.prototype.isFreehandDrawIndex = function (index) {\n        var isIndex = false;\n        for (var i = 0; i < this.freehandCounter; i++) {\n            if (parseInt(this.pointColl[i].id.split('_')[1], 10) - 1 === index) {\n                isIndex = true;\n                break;\n            }\n        }\n        return isIndex;\n    };\n    ImageEditor.prototype.deleteFreehandDraw = function (index, isId) {\n        if (this.isFreehandDrawIndex(index)) {\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            // eslint-disable-next-line\n            var tempPointColl = extend({}, this.pointColl, {}, true);\n            this.pointColl = {};\n            var count = 0;\n            if (isNullOrUndefined(isId)) {\n                for (var i = 0; i < this.freehandCounter; i++) {\n                    if (i !== index) {\n                        this.pointColl[count] = tempPointColl[i];\n                        count++;\n                    }\n                }\n            }\n            else {\n                for (var i = 0; i < this.freehandCounter; i++) {\n                    if (parseInt(tempPointColl[i].id.split('_')[1], 10) - 1 !== index) {\n                        this.pointColl[count] = tempPointColl[i];\n                        count++;\n                    }\n                }\n            }\n            this.freehandCounter -= 1;\n            this.freehandDrawHoveredIndex = this.freehandDrawSelectedIndex = null;\n            this.isFreehandDrawEditing = this.isFreehandDrawingPoint = false;\n            this.renderImage();\n            this.refreshToolbar('main');\n        }\n    };\n    ImageEditor.prototype.unselectBtn = function () {\n        if (document.querySelector('#' + this.element.id + '_brightness').classList.contains('e-selected-btn')) {\n            document.querySelector('#' + this.element.id + '_brightness').classList.remove('e-selected-btn');\n        }\n        else if (document.querySelector('#' + this.element.id + '_contrast').classList.contains('e-selected-btn')) {\n            document.querySelector('#' + this.element.id + '_contrast').classList.remove('e-selected-btn');\n        }\n        else if (document.querySelector('#' + this.element.id + '_hue').classList.contains('e-selected-btn')) {\n            document.querySelector('#' + this.element.id + '_hue').classList.remove('e-selected-btn');\n        }\n        else if (document.querySelector('#' + this.element.id + '_saturation').classList.contains('e-selected-btn')) {\n            document.querySelector('#' + this.element.id + '_saturation').classList.remove('e-selected-btn');\n        }\n        else if (document.querySelector('#' + this.element.id + '_opacity').classList.contains('e-selected-btn')) {\n            document.querySelector('#' + this.element.id + '_opacity').classList.remove('e-selected-btn');\n        }\n        else if (document.querySelector('#' + this.element.id + '_blur').classList.contains('e-selected-btn')) {\n            document.querySelector('#' + this.element.id + '_blur').classList.remove('e-selected-btn');\n        }\n        else if (document.querySelector('#' + this.element.id + '_exposure').classList.contains('e-selected-btn')) {\n            document.querySelector('#' + this.element.id + '_exposure').classList.remove('e-selected-btn');\n        }\n    };\n    ImageEditor.prototype.callUndo = function () {\n        this.currObjType.isFiltered = false;\n        if (!this.togglePan) {\n            this.callMainToolbar(false, false);\n        }\n        if (this.zoomFactor === 0) {\n            this.dragCanvas = this.togglePan = false;\n            this.callMainToolbar(false, false);\n        }\n        if (this.element.querySelector('.e-contextual-toolbar-wrapper')) {\n            this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n        }\n        if (this.togglePen) {\n            this.togglePen = false;\n            this.upperCanvas.style.cursor = 'default';\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        }\n        this.undo();\n    };\n    ImageEditor.prototype.callRedo = function () {\n        this.currObjType.isFiltered = false;\n        if (!this.togglePan) {\n            this.callMainToolbar(false, false);\n        }\n        if (this.zoomFactor === 0) {\n            this.dragCanvas = this.togglePan = false;\n            this.callMainToolbar(false, false);\n        }\n        this.redo();\n    };\n    ImageEditor.prototype.refreshSlider = function () {\n        var sliderWrapper = document.querySelector('#' + this.element.id + '_sliderWrapper');\n        // eslint-disable-next-line\n        var slider = document.querySelector('.e-slider');\n        var hdrWrapper = document.querySelector('#' + this.element.id + '_headWrapper');\n        if (hdrWrapper) {\n            hdrWrapper.style.display = 'none';\n        }\n        if (!isNullOrUndefined(sliderWrapper) && !isNullOrUndefined(slider)) {\n            slider.ej2_instances[0].destroy();\n            sliderWrapper.remove();\n        }\n    };\n    ImageEditor.prototype.iterateObjColl = function () {\n        for (var i = 0; i < this.objColl.length; i++) {\n            this.apply(this.objColl[i].shape, this.objColl[i]);\n            this.refreshActiveObj();\n        }\n    };\n    ImageEditor.prototype.updateAdjustment = function (type, value, isPreview) {\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        var splitWords = this.lowerContext.filter.split(' ');\n        var values = [];\n        var opacityValue;\n        var brightnessValue;\n        if (splitWords[4] !== undefined) {\n            opacityValue = parseFloat(splitWords[4].split('(')[1]);\n        }\n        if (splitWords[0] !== undefined) {\n            brightnessValue = parseFloat(splitWords[0].split('(')[1]);\n        }\n        var brightness = this.getFilterValue(this.adjustmentLevel.brightness);\n        var saturation = this.getFilterValue(this.adjustmentLevel.saturation);\n        if (type !== 'brightness' && type !== 'contrast' && type !== 'hue' && type !== 'saturation' && type !== 'exposure'\n            && type !== 'opacity' && type !== 'blur') {\n            if (isNullOrUndefined(isPreview) && (this.adjustmentLevel.sharpen || this.adjustmentLevel.bw)) {\n                this.isUndoRedo = true;\n                var temp_1 = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                this.iterateObjColl();\n                this.freehandRedraw(this.lowerContext);\n                this.lowerContext.filter = temp_1;\n                this.isUndoRedo = false;\n            }\n        }\n        if (brightness !== 1) {\n            splitWords[4] = 'opacity(' + (opacityValue - 0.3) + ')';\n        }\n        var saturate;\n        var bright;\n        var saturatePercent;\n        var contrast;\n        var tempFilter;\n        var temp;\n        var saturatePercentage;\n        switch (type) {\n            case 'brightness':\n                if (parseFloat(splitWords[3].split('(')[1]) !== 100) {\n                    value += 0.1;\n                }\n                splitWords[0] = 'brightness(' + value + ')';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'contrast':\n                splitWords[1] = 'contrast(' + value + '%)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'hue':\n                splitWords[2] = 'hue-rotate(' + value + 'deg)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'saturation':\n                splitWords[3] = 'saturate(' + value + '%)';\n                if (saturation !== 1) {\n                    splitWords[0] = 'brightness(' + (brightnessValue + 0.1) + ')';\n                }\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'opacity':\n                if (parseFloat(splitWords[0].split('(')[1]) !== 1) {\n                    value -= 0.2;\n                }\n                splitWords[4] = 'opacity(' + value + ')';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'blur':\n                splitWords[5] = 'blur(' + value + 'px)';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'exposure':\n                if (brightness !== 1) {\n                    splitWords[4] = 'opacity(' + (opacityValue - 0.3) + ')';\n                }\n                if (value > 1) {\n                    value -= 1;\n                    value += brightness;\n                }\n                else if (value < 1) {\n                    value = 1 - value;\n                    value = brightness - value;\n                }\n                splitWords[0] = 'brightness(' + value + ')';\n                this.adjustmentValue = splitWords.join(' ');\n                break;\n            case 'chrome':\n                saturate = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturate *= 100;\n                value = saturate + (saturate * 0.4);\n                splitWords[3] = 'saturate(' + value + '%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'cold':\n                // Adjusting Brightness\n                bright = this.getFilterValue(this.adjustmentLevel.brightness);\n                bright *= 100;\n                value = bright * 0.9;\n                splitWords[0] = 'brightness(' + value + '%)';\n                // Adjusting Contrast\n                contrast = this.getFilterValue(this.adjustmentLevel.contrast);\n                contrast *= 100;\n                value = contrast + (contrast * 0.5);\n                splitWords[1] = 'contrast(' + value + '%)';\n                // Adjusting Saturation\n                saturatePercentage = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturatePercentage *= 100;\n                value = saturatePercentage;\n                splitWords[3] = 'saturate(' + value + '%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'warm':\n                saturatePercent = this.getSaturationFilterValue(this.adjustmentLevel.saturation);\n                saturatePercent *= 100;\n                value = saturatePercent + (saturatePercent * 0.4);\n                splitWords[3] = 'saturate(' + value + '%)';\n                splitWords[6] = 'sepia(25%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'grayscale':\n                splitWords[7] = 'grayscale(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'sepia':\n                splitWords[6] = 'sepia(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[7] = 'grayscale(0%)';\n                splitWords[8] = 'invert(0%)';\n                break;\n            case 'invert':\n                splitWords[8] = 'invert(100%)';\n                values = this.adjustmentValue.split(' ');\n                splitWords[0] = values[0];\n                splitWords[1] = values[1];\n                splitWords[2] = values[2];\n                splitWords[3] = values[3];\n                splitWords[4] = values[4];\n                splitWords[5] = values[5];\n                splitWords[6] = 'sepia(0%)';\n                splitWords[7] = 'grayscale(0%)';\n                break;\n        }\n        if (type !== 'sharpen' && type !== 'blackandwhite') {\n            if (isNullOrUndefined(isPreview)) {\n                if (type === 'default') {\n                    splitWords = this.getDefaultCurrentFilter(splitWords);\n                }\n                this.lowerContext.filter = splitWords.join(' ');\n            }\n            splitWords = this.setTempFilterValue(brightness, isPreview, splitWords, type);\n            this.isRotateZoom = true;\n            this.updateCurrentTransformedState('initial');\n            this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n            this.updateCurrentTransformedState('reverse');\n            this.isRotateZoom = false;\n            if (brightness !== 1) {\n                splitWords[4] = 'opacity(' + opacityValue + ')';\n            }\n            else if (saturation !== 1) {\n                splitWords[0] = 'brightness(' + brightnessValue + ')';\n            }\n            if (type === 'exposure' && brightness !== 1) {\n                splitWords[0] = 'brightness(' + brightnessValue + ')';\n            }\n            if (type === 'saturation' && saturation !== 1) {\n                splitWords[0] = 'brightness(' + brightnessValue + ')';\n            }\n            splitWords = this.setTempFilterValue(brightness, isPreview, splitWords, type);\n            if (isNullOrUndefined(isPreview)) {\n                this.lowerContext.filter = this.initialAdjustmentValue = splitWords.join(' ');\n            }\n            var tempFilter_1 = this.lowerContext.filter;\n            this.lowerContext.filter = this.getDefaultFilter();\n            this.iterateObjColl();\n            this.freehandRedraw(this.lowerContext);\n            this.lowerContext.filter = tempFilter_1;\n            if ((!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle') || this.isCircleCrop) {\n                this.cropCircle(this.lowerContext);\n            }\n            if (brightness === 1) {\n                this.isBrightnessAdjusted = false;\n            }\n            else {\n                this.isBrightnessAdjusted = true;\n            }\n        }\n        var filter = splitWords.join(' ');\n        return filter;\n    };\n    ImageEditor.prototype.autoEnablePan = function () {\n        if (this.zoomFactor === 0) {\n            this.dragCanvas = this.togglePan = false;\n            this.callMainToolbar(false, true);\n            this.pan(false);\n            this.disablePan = false;\n        }\n        else if (!this.disablePan) {\n            this.pan(true);\n        }\n        else if (this.disablePan) {\n            this.pan(false);\n        }\n    };\n    ImageEditor.prototype.setTempFilterValue = function (brightness, isPreview, splitWords, type) {\n        if (isPreview && brightness !== 1) {\n            var tempSplitWords = this.lowerContext.filter.split(' ');\n            tempSplitWords[4] = splitWords[4];\n            this.lowerContext.filter = tempSplitWords.join(' ');\n        }\n        else if (isPreview && type === 'default') {\n            splitWords = this.getDefaultCurrentFilter(splitWords);\n        }\n        return splitWords;\n    };\n    ImageEditor.prototype.getDefaultCurrentFilter = function (splitWords) {\n        var values = this.adjustmentValue.split(' ');\n        splitWords[0] = values[0];\n        splitWords[1] = values[1];\n        splitWords[2] = values[2];\n        splitWords[3] = values[3];\n        splitWords[4] = values[4];\n        splitWords[5] = values[5];\n        splitWords[6] = 'sepia(0%)';\n        splitWords[7] = 'grayscale(0%)';\n        splitWords[8] = 'invert(0%)';\n        return splitWords;\n    };\n    ImageEditor.prototype.renderSlider = function (type) {\n        var canvasWrapper = document.querySelector('#' + this.element.id + '_contextualToolbarArea');\n        var hdrWrapper = document.querySelector('#' + this.element.id + '_headWrapper');\n        var labelWrapper = document.querySelector('#' + this.element.id + '_labelWrapper');\n        if (!hdrWrapper) {\n            hdrWrapper = canvasWrapper.appendChild(this.createElement('div', {\n                id: this.element.id + '_headWrapper',\n                styles: 'position: relative'\n            }));\n            labelWrapper = hdrWrapper.appendChild(this.createElement('label', {\n                id: this.element.id + '_labelWrapper',\n                styles: Browser.isDevice ? 'position: absolute; top: 25%; left: calc(50% - 150px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n                    : 'position: absolute; top: 25%; left: calc(50% - 226px); font-size: 15px; text-transform: capitalize; font-weight: 400;'\n            }));\n        }\n        else {\n            hdrWrapper.style.display = 'block';\n        }\n        labelWrapper.textContent = this.l10n.getConstant(this.toPascalCase(type));\n        var sliderWrapper = hdrWrapper.appendChild(this.createElement('div', {\n            id: this.element.id + '_sliderWrapper',\n            styles: 'position: absolute'\n        }));\n        var value = this.getCurrAdjustmentValue(type);\n        var min;\n        var max;\n        var slider;\n        if (type === 'brightness' || type === 'contrast' || type === 'saturation' || type === 'exposure') {\n            if (this.finetuneSettings) {\n                if (type === 'brightness' && this.finetuneSettings.brightness) {\n                    min = this.finetuneSettings.brightness.min;\n                    max = this.finetuneSettings.brightness.max;\n                }\n                else if (type === 'contrast' && this.finetuneSettings.contrast) {\n                    min = this.finetuneSettings.contrast.min;\n                    max = this.finetuneSettings.contrast.max;\n                }\n                else if (type === 'saturation' && this.finetuneSettings.saturation) {\n                    min = this.finetuneSettings.saturation.min;\n                    max = this.finetuneSettings.saturation.max;\n                }\n                else if (type === 'exposure' && this.finetuneSettings.exposure) {\n                    min = this.finetuneSettings.exposure.min;\n                    max = this.finetuneSettings.exposure.max;\n                }\n                else {\n                    min = -100;\n                    max = 100;\n                }\n            }\n            else {\n                min = -100;\n                max = 100;\n            }\n            slider = this.createSlider(min, max, value, type);\n        }\n        else if (type === 'hue' || type === 'blur' || type === 'opacity') {\n            if (this.finetuneSettings) {\n                if (type === 'hue' && this.finetuneSettings.hue) {\n                    min = this.finetuneSettings.hue.min;\n                    max = this.finetuneSettings.hue.max;\n                }\n                else if (type === 'blur' && this.finetuneSettings.blur) {\n                    min = this.finetuneSettings.blur.min;\n                    max = this.finetuneSettings.blur.max;\n                }\n                else if (type === 'opacity' && this.finetuneSettings.opacity) {\n                    min = this.finetuneSettings.opacity.min;\n                    max = this.finetuneSettings.opacity.max;\n                }\n                else {\n                    min = 0;\n                    max = 100;\n                }\n            }\n            else {\n                min = 0;\n                max = 100;\n            }\n            slider = this.createSlider(min, max, value, type);\n        }\n        slider.appendTo('#' + this.element.id + '_sliderWrapper');\n        sliderWrapper.style.left = (parseFloat(canvasWrapper.style.width) - parseFloat(slider.width)) / 2 + 'px';\n    };\n    ImageEditor.prototype.createSlider = function (min, max, value, type) {\n        var _this = this;\n        return new Slider({\n            value: value,\n            tooltip: { isVisible: true, placement: 'Before', showOn: 'Always' },\n            type: 'MinRange',\n            min: min,\n            max: max,\n            step: 10,\n            width: Browser.isDevice ? '200px' : '300px',\n            cssClass: 'e-slider',\n            change: function (args) {\n                if (_this.currObjType.isUndoAction) {\n                    _this.refreshUndoRedoColl();\n                }\n                _this.setCurrAdjustmentValue(type, args.value);\n                _this.enableDisableToolbarBtn();\n            }\n        });\n    };\n    ImageEditor.prototype.getCurrAdjustmentValue = function (type) {\n        var value;\n        switch (type) {\n            case 'brightness':\n                value = this.adjustmentLevel.brightness;\n                break;\n            case 'contrast':\n                value = this.adjustmentLevel.contrast;\n                break;\n            case 'hue':\n                value = this.adjustmentLevel.hue;\n                break;\n            case 'saturation':\n                value = this.adjustmentLevel.saturation;\n                break;\n            case 'opacity':\n                value = this.adjustmentLevel.opacity;\n                break;\n            case 'blur':\n                value = this.adjustmentLevel.blur;\n                break;\n            case 'exposure':\n                value = this.adjustmentLevel.exposure;\n                break;\n        }\n        return value;\n    };\n    ImageEditor.prototype.setCurrAdjustmentValue = function (type, value) {\n        var finetuneValueChanging = { finetune: this.toPascalCase(type), value: value };\n        this.trigger('finetuneValueChanging', finetuneValueChanging);\n        switch (type) {\n            case 'brightness':\n                this.setBrightness(value);\n                break;\n            case 'contrast':\n                this.setContrast(value);\n                break;\n            case 'hue':\n                this.setHue(value);\n                break;\n            case 'saturation':\n                this.setSaturation(value);\n                break;\n            case 'opacity':\n                this.setOpacity(value);\n                break;\n            case 'blur':\n                this.setBlur(value);\n                break;\n            case 'exposure':\n                this.setExposure(value);\n                break;\n        }\n    };\n    ImageEditor.prototype.cancelPan = function () {\n        this.applyActObj();\n        var panBtn = this.element.querySelector('.e-img-pan .e-btn');\n        if (!isNullOrUndefined(panBtn)) {\n            panBtn.classList.remove('e-selected-btn');\n        }\n        this.pan(false);\n    };\n    ImageEditor.prototype.callMainToolbar = function (isApplyBtn, isZooming) {\n        this.refreshToolbar('main', isApplyBtn, false, isZooming);\n    };\n    ImageEditor.prototype.setCurrSelectionPoints = function (isSetDimension) {\n        this.srcLeft = 0;\n        this.srcTop = 0;\n        this.srcWidth = this.baseImg.width;\n        this.srcHeight = this.baseImg.height;\n        this.destLeft = this.cropDestPoints.startX;\n        this.destTop = this.cropDestPoints.startY;\n        this.destWidth = this.cropDestPoints.width;\n        this.destHeight = this.cropDestPoints.height;\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        if (isSetDimension) {\n            this.setDestinationPoints();\n        }\n        this.currentTransformedState('initial');\n        if (this.croppedDegree === 0 && this.degree === 0 && !isNullOrUndefined(this.currSelectionPoint)\n            && this.currSelectionPoint.shape !== 'crop-circle' && this.currSelectionPoint.shape !== 'crop-square') {\n            this.destLeft = this.cropDestPoints.startX;\n            this.destTop = this.cropDestPoints.startY;\n            this.destWidth = this.cropDestPoints.width;\n            this.destHeight = this.cropDestPoints.height;\n        }\n        if (this.degree === 0) {\n            this.destLeft += this.totalPannedInternalPoint.x;\n            this.destTop += this.totalPannedInternalPoint.y;\n        }\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.currentTransformedState('reverse', null, null, true);\n        if (isNullOrUndefined(this.cropObj.activeObj.shape)) {\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            this.iterateObjColl();\n            this.freehandRedraw(this.lowerContext);\n            this.lowerContext.filter = temp;\n            this.currSelectionPoint = null;\n        }\n        else {\n            if (this.cropObj.cropZoom > 0) {\n                var cropObjColl_1 = extend([], this.objColl, null, true);\n                var cropPointColl_1 = extend([], this.pointColl, null, true);\n                this.objColl = [];\n                this.pointColl = [];\n                this.freehandCounter = 0;\n                this.zoom(this.cropObj.cropZoom);\n                this.objColl = cropObjColl_1;\n                this.pointColl = cropPointColl_1;\n                this.freehandCounter = this.pointColl.length;\n                this.currSelectionPoint = extend({}, this.cropObj.activeObj, null, true);\n                if (this.cropObj.currFlipState !== '') {\n                    this.cropObj.totalPannedPoint.x += this.cropObj.tempFlipPanPoint.x;\n                    this.cropObj.totalPannedPoint.y += this.cropObj.tempFlipPanPoint.y;\n                }\n            }\n            var destPoints = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n            this.destLeft = this.currSelectionPoint.activePoint.startX;\n            this.destTop = this.currSelectionPoint.activePoint.startY;\n            this.destWidth = this.currSelectionPoint.activePoint.width;\n            this.destHeight = this.currSelectionPoint.activePoint.height;\n            this.zoomObjColl();\n            this.zoomFreehandDrawColl();\n            this.destLeft = destPoints.startX;\n            this.destTop = destPoints.startY;\n            this.destWidth = destPoints.width;\n            this.destHeight = destPoints.height;\n            this.updatePannedRegion();\n            this.updateObjAndFreeHandDrawColl();\n            var cropObjColl = extend([], this.objColl, null, true);\n            var cropPointColl = extend([], this.pointColl, null, true);\n            this.objColl = [];\n            this.pointColl = [];\n            this.freehandCounter = 0;\n            this.setCurrentObj();\n            var activeObj = extend({}, this.activeObj, null, true);\n            this.refreshActiveObj();\n            this.objColl = cropObjColl;\n            this.pointColl = cropPointColl;\n            this.freehandCounter = this.pointColl.length;\n            this.zoomObjColl();\n            this.zoomFreehandDrawColl();\n            this.currSelectionPoint = null;\n            if (this.degree === 0) {\n                this.drawPannImage({ x: 0, y: 0 });\n            }\n            this.activeObj = activeObj;\n            this.drawObject('duplicate');\n        }\n    };\n    ImageEditor.prototype.updatePannedRegion = function () {\n        var pannedPoint = this.degree === 0 ? this.cropObj.totalPannedPoint : this.cropObj.totalPannedClientPoint;\n        if (this.currFlipState === this.cropObj.currFlipState) {\n            this.panObjColl(-pannedPoint.x, -pannedPoint.y, '');\n            this.panFreehandDrawColl(-pannedPoint.x, -pannedPoint.y, '');\n        }\n        else {\n            if (this.currFlipState === 'horizontal' && this.cropObj.currFlipState === '' ||\n                this.currFlipState === 'vertical' && this.cropObj.currFlipState === '') {\n                this.panObjColl(-pannedPoint.x, -pannedPoint.y, '');\n                this.panFreehandDrawColl(-pannedPoint.x, -pannedPoint.y, '');\n            }\n            else if (this.currFlipState === '' && this.cropObj.currFlipState === 'horizontal') {\n                this.panObjColl(pannedPoint.x, -pannedPoint.y, '');\n                this.panFreehandDrawColl(pannedPoint.x, -pannedPoint.y, '');\n            }\n            else if (this.currFlipState === '' && this.cropObj.currFlipState === 'vertical') {\n                this.panObjColl(-pannedPoint.x, pannedPoint.y, '');\n                this.panFreehandDrawColl(-pannedPoint.x, pannedPoint.y, '');\n            }\n        }\n    };\n    ImageEditor.prototype.updateObjAndFreeHandDrawColl = function () {\n        for (var i = 0; i < this.objColl.length; i++) {\n            this.objColl[i].imageRatio = { startX: ((this.objColl[i].activePoint.startX - this.destLeft) /\n                    this.destWidth), startY: ((this.objColl[i].activePoint.startY - this.destTop) / this.destHeight),\n                endX: ((this.objColl[i].activePoint.endX - this.destLeft) / this.destWidth),\n                endY: ((this.objColl[i].activePoint.endY - this.destTop) / this.destHeight),\n                width: this.destWidth / this.objColl[i].activePoint.width, height: this.destHeight /\n                    this.objColl[i].activePoint.height };\n            this.refreshActiveObj();\n        }\n        for (var n = 0; n < this.freehandCounter; n++) {\n            this.points = extend([], this.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = this.points.length;\n            for (var l = 0; l < len; l++) {\n                this.points[l].ratioX = (this.points[l].x - this.destLeft) / this.destWidth;\n                this.points[l].ratioY = (this.points[l].y - this.destTop) / this.destHeight;\n            }\n        }\n    };\n    ImageEditor.prototype.cancelItems = function () {\n        var isCropSelection = false;\n        var splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords === undefined && this.currObjType.isCustomCrop) {\n            isCropSelection = true;\n        }\n        else if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isCropSelection && this.isCropTab) {\n            this.isCropTab = false;\n            this.zoomFactor = this.defaultZoomFactor;\n        }\n        if (this.togglePen) {\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.togglePen = false;\n            this.upperCanvas.style.cursor = 'default';\n            // eslint-disable-next-line\n            var tempPointsColl = extend([], this.pointColl, [], true);\n            this.pointColl = {};\n            for (var i = 0; i < this.tempFreehandCounter; i++) {\n                this.pointColl[i] = tempPointsColl[i];\n            }\n            this.freehandCounter = this.tempFreehandCounter;\n            this.currentFreehandDrawIndex = this.tempCurrentFreehandDrawIndex;\n        }\n        else if (this.activeObj.shape === 'text') {\n            if (isNullOrUndefined(this.activeObj.currIndex)) {\n                this.refreshActiveObj();\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            }\n            else {\n                this.activeObj.strokeSettings = this.tempStrokeSettings;\n                this.activeObj.textSettings = this.tempTextSettings;\n                if (this.activeObj.keyHistory === 'Enter Text' && this.activeObj.activePoint.startX === this.textStartPoints.x\n                    && this.activeObj.activePoint.startY === this.textStartPoints.y) {\n                    this.refreshActiveObj();\n                    this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                    this.textSettings = this.tempTextSettings;\n                    this.strokeSettings = this.tempStrokeSettings;\n                    this.drawShapeText();\n                    this.applyActObj();\n                }\n                else {\n                    this.redrawText();\n                    this.redrawShape(this.activeObj);\n                    if (!isCropSelection && this.activeObj.topLeftCircle !== undefined) {\n                        this.applyActObj();\n                    }\n                    this.clearSelection();\n                }\n            }\n            this.tempTextSettings = { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false,\n                italic: false, underline: false };\n        }\n        else if (this.activeObj.shape === 'rectangle' || this.activeObj.shape === 'ellipse' || this.activeObj.shape === 'line') {\n            if (isNullOrUndefined(this.activeObj.currIndex)) {\n                this.refreshActiveObj();\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            }\n            else {\n                this.activeObj.strokeSettings = this.tempStrokeSettings;\n                this.redrawShape(this.activeObj);\n                this.applyActObj();\n            }\n        }\n        else if ((this.zoomFactor !== this.tempZoomFactor) || isCropSelection && isNullOrUndefined(this.currSelectionPoint)) {\n            var length_1 = this.cropZoomFactor - this.tempZoomFactor;\n            this.zoomFactor = this.cropZoomFactor;\n            if (isNullOrUndefined(this.cropObj.activeObj.shape)) {\n                if ((this.degree === 0 && this.totalPannedPoint.x === 0 && this.totalPannedPoint.y === 0) ||\n                    (this.degree !== 0 && this.totalPannedInternalPoint.x === 0 && this.totalPannedInternalPoint.y === 0 &&\n                        this.totalPannedClientPoint.x === 0 && this.totalPannedClientPoint.y === 0)) {\n                    this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                    this.refreshActiveObj();\n                    if (length_1 > 0) {\n                        this.zoom(-length_1);\n                    }\n                    else {\n                        this.zoom(Math.abs(length_1));\n                    }\n                    this.cropZoomFactor = this.tempZoomFactor;\n                    this.currObjType.isCustomCrop = false;\n                    this.upperCanvas.style.cursor = 'default';\n                    this.currObjType.isCustomCrop = false;\n                    this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n                    this.callMainToolbar();\n                    return;\n                }\n            }\n            if (isNullOrUndefined(this.cropObj.activeObj.shape)) {\n                if (this.degree === 0) {\n                    var activeObj = extend({}, this.activeObj, {});\n                    this.destLeft += (-this.totalPannedPoint.x);\n                    this.destTop += (-this.totalPannedPoint.y);\n                    this.drawPannImage({ x: -this.totalPannedPoint.x, y: -this.totalPannedPoint.y });\n                    this.updateFlipPan(activeObj);\n                    this.totalPannedPoint = { x: 0, y: 0 };\n                }\n                else {\n                    this.totalPannedClientPoint = { x: -this.totalPannedClientPoint.x, y: -this.totalPannedClientPoint.y };\n                    this.totalPannedInternalPoint = { x: -this.totalPannedInternalPoint.x, y: -this.totalPannedInternalPoint.y };\n                    this.rotatePan(true);\n                    this.totalPannedClientPoint = { x: 0, y: 0 };\n                    this.totalPannedInternalPoint = { x: 0, y: 0 };\n                    this.currentPannedPoint = { x: 0, y: 0 };\n                }\n                this.refreshActiveObj();\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                if (length_1 > 0) {\n                    this.zoom(-length_1);\n                }\n                else {\n                    this.zoom(Math.abs(length_1));\n                }\n                this.cropZoomFactor = this.tempZoomFactor;\n            }\n            else {\n                this.isCancelAction = true;\n                this.objColl = [];\n                this.pointColl = [];\n                var freehandCounter = this.freehandCounter;\n                this.freehandCounter = 0;\n                var cropObj = extend({}, this.cropObj, {});\n                var afterCropActions = extend([], this.afterCropActions, {}, true);\n                this.setCurrentObj();\n                this.cropImg();\n                this.cropObj = cropObj;\n                this.afterCropActions = afterCropActions;\n                this.objColl = extend([], this.cancelObjColl, [], true);\n                this.pointColl = extend([], this.cancelPointColl, [], true);\n                this.freehandCounter = freehandCounter;\n                this.iterateObjColl();\n                this.freehandRedraw(this.lowerContext);\n                this.clearOuterCanvas(this.lowerContext);\n                if (this.isCircleCrop) {\n                    this.cropCircle(this.lowerContext);\n                }\n                this.isCancelAction = false;\n            }\n            this.zoomFactor = this.defaultZoomFactor;\n            this.enableDisableToolbarBtn();\n        }\n        else {\n            this.refreshActiveObj();\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        }\n        this.upperCanvas.style.cursor = 'default';\n        this.currObjType.isCustomCrop = false;\n        this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n        this.callMainToolbar();\n    };\n    ImageEditor.prototype.freehandDownHandler = function (e, canvas) {\n        this.freehandDrawObj.time = new Date().getTime();\n        this.isFreehandDrawing = true;\n        if (e.type === 'mousedown') {\n            this.freehandDownPoint = { x: e.clientX, y: e.clientY };\n        }\n        else {\n            this.freehandDownPoint = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n        }\n        this.isFreehandPointMoved = false;\n        EventHandler.add(canvas, 'mousemove touchmove', this.freehandMoveHandler, this);\n    };\n    ImageEditor.prototype.freehandUpHandler = function (e, canvas, context) {\n        var rect = canvas.getBoundingClientRect();\n        EventHandler.remove(canvas, 'mousemove touchmove', this.freehandMoveHandler);\n        if (this.points.length === 0) {\n            if (e.type === 'mouseup') {\n                this.processPoint(e.clientX - rect.left, e.clientY - rect.top, true, context);\n            }\n            else {\n                if (!this.isFreehandPointMoved) {\n                    this.processPoint(this.freehandDownPoint.x - rect.left, this.freehandDownPoint.y - rect.top, true, context);\n                }\n            }\n        }\n        context.closePath();\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.pointColl[this.freehandCounter] = {};\n        this.pointColl[this.freehandCounter].points = extend([], this.points);\n        this.pointColl[this.freehandCounter].strokeColor = this.activeObj.strokeSettings.strokeColor;\n        this.pointColl[this.freehandCounter].strokeWidth = this.penStrokeWidth;\n        this.pointColl[this.freehandCounter].flipState = this.currFlipState;\n        this.pointColl[this.freehandCounter].id = 'pen_' + (this.currentFreehandDrawIndex + 1);\n        this.points = [];\n        this.pointCounter = 0;\n        this.freehandCounter++;\n        this.currentFreehandDrawIndex++;\n        this.isFreehandDrawing = false;\n        this.updateUndoRedoColl('freehanddraw', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n    };\n    ImageEditor.prototype.freehandMoveHandler = function (e) {\n        this.isFreehandPointMoved = true;\n        var rect = this.upperCanvas.getBoundingClientRect();\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.clientX - rect.left;\n            y = e.clientY - rect.top;\n        }\n        else {\n            x = e.touches[0].clientX - rect.left;\n            y = e.touches[0].clientY - rect.top;\n        }\n        if (this.isFreehandDrawing) {\n            this.processPoint(x, y, false, this.upperContext);\n        }\n    };\n    ImageEditor.prototype.processPoint = function (x, y, mouseDown, context) {\n        var lastPoint = this.point(x, y, new Date().getTime());\n        lastPoint = this.points.length > 0 && this.points[this.points.length - 1];\n        var isLastPointTooClose = lastPoint ? this.distanceTo(lastPoint) <= 5 : false;\n        var controlPoint1;\n        var controlPoint2;\n        var startPoint;\n        var endPoint;\n        if (!lastPoint || !(lastPoint && isLastPointTooClose) || mouseDown) {\n            this.freehandDrawObj.time = new Date().getTime();\n            this.points.push({ x: x, y: y, ratioX: (x - this.destLeft) / this.destWidth, ratioY: (y - this.destTop) / this.destHeight,\n                time: this.freehandDrawObj.time });\n            if (this.points.length > 3) {\n                controlPoint1 = (this.calcCurveControlPoints(this.points[this.pointCounter + 0], this.points[this.pointCounter + 1], this.points[this.pointCounter + 2])).controlPoint2;\n                controlPoint2 = (this.calcCurveControlPoints(this.points[this.pointCounter + 1], this.points[this.pointCounter + 2], this.points[this.pointCounter + 3])).controlPoint1;\n                startPoint = this.points[this.pointCounter + 1];\n                endPoint = this.points[this.pointCounter + 2];\n                var minStrokeWidth = 0.5;\n                var maxStrokeWidth = 5;\n                if (!isNullOrUndefined(this.penStrokeWidth)) {\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth;\n                }\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                this.pointCounter++;\n            }\n            if (mouseDown) {\n                controlPoint1 = controlPoint2 = startPoint = endPoint = { x: x, y: y, time: new Date().getTime() };\n                var minStrokeWidth = 0.5;\n                var maxStrokeWidth = 5;\n                if (!isNullOrUndefined(this.penStrokeWidth)) {\n                    minStrokeWidth = maxStrokeWidth = this.penStrokeWidth;\n                }\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n        }\n    };\n    ImageEditor.prototype.calcCurveControlPoints = function (p1, p2, p3) {\n        if (!p2) {\n            p2 = p1;\n        }\n        if (!p3) {\n            p3 = p2;\n        }\n        var dx1 = p1.x - p2.x;\n        var dy1 = p1.y - p2.y;\n        var dx2 = p2.x - p3.x;\n        var dy2 = p2.y - p3.y;\n        var m1 = { x: (p1.x + p2.x) / 2.0, y: (p1.y + p2.y) / 2.0 };\n        var m2 = { x: (p2.x + p3.x) / 2.0, y: (p2.y + p3.y) / 2.0 };\n        var l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n        var l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\n        var dxm = (m1.x - m2.x);\n        var dym = (m1.y - m2.y);\n        var k = l2 / (l1 + l2);\n        var cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\n        var tx = p2.x - cm.x;\n        var ty = p2.y - cm.y;\n        return {\n            controlPoint1: this.point(m1.x + tx, m1.y + ty, 0),\n            controlPoint2: this.point(m2.x + tx, m2.y + ty, 0)\n        };\n    };\n    ImageEditor.prototype.point = function (x, y, time) {\n        this.freehandDrawObj.pointX = x;\n        this.freehandDrawObj.pointY = y;\n        return { x: this.freehandDrawObj.pointX, y: this.freehandDrawObj.pointY, time: time };\n    };\n    ImageEditor.prototype.startDraw = function (context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth) {\n        var tempVelocity;\n        tempVelocity = this.pointVelocity(startPoint);\n        tempVelocity = 0.7 * tempVelocity + (1 - 0.7) * this.freehandDrawObj.lastVelocity;\n        var newWidth = Math.max(maxStrokeWidth / (0.7 + 1), minStrokeWidth);\n        this.drawCurve(this.freehandDrawObj.time, newWidth, context, controlPoint1, controlPoint2, startPoint, endPoint, maxStrokeWidth);\n        this.freehandDrawObj.lastVelocity = tempVelocity;\n        this.freehandDrawObj.time = newWidth;\n    };\n    ImageEditor.prototype.pointVelocity = function (startPoint) {\n        return (this.freehandDrawObj.time !== startPoint.time) ? this.distanceTo(startPoint) /\n            (this.freehandDrawObj.time - startPoint.time) : 0;\n    };\n    ImageEditor.prototype.distanceTo = function (start) {\n        return Math.sqrt(Math.pow(this.freehandDrawObj.pointX - start.x, 2) + Math.pow(this.freehandDrawObj.pointY - start.y, 2));\n    };\n    ImageEditor.prototype.drawCurve = function (startWidth, endWidth, context, controlPoint1, controlPoint2, startPoint, endPoint, maxStrokeWidth) {\n        var width;\n        var i;\n        var t1;\n        var t2;\n        var t3;\n        var u1;\n        var u2;\n        var u3;\n        var x;\n        var y;\n        var widthValue = endWidth - startWidth;\n        var bezierLength = this.bezierLength(controlPoint1, controlPoint2, startPoint, endPoint);\n        var drawSteps = Math.ceil(bezierLength) * 2;\n        context.beginPath();\n        for (i = 0; i < drawSteps; i++) {\n            t1 = i / drawSteps;\n            t2 = t1 * t1;\n            t3 = t2 * t1;\n            u1 = 1 - t1;\n            u2 = u1 * u1;\n            u3 = u2 * u1;\n            x = u3 * startPoint.x;\n            x += 3 * u2 * t1 * controlPoint1.x;\n            x += 3 * u1 * t2 * controlPoint2.x;\n            x += t3 * endPoint.x;\n            y = u3 * startPoint.y;\n            y += 3 * u2 * t1 * controlPoint1.y;\n            y += 3 * u1 * t2 * controlPoint2.y;\n            y += t3 * endPoint.y;\n            width = Math.min(startWidth + t3 * widthValue, maxStrokeWidth);\n            this.drawArc(x, y, width, context);\n        }\n        context.closePath();\n        context.fill();\n    };\n    ImageEditor.prototype.bezierLength = function (controlPoint1, controlPoint2, startPoint, endPoint) {\n        var steps = 10;\n        var length = 0;\n        var i;\n        var t;\n        var pointx1;\n        var pointy1;\n        var pointx2;\n        var pointy2;\n        var pointx3;\n        var pointy3;\n        for (i = 0; i <= steps; i++) {\n            t = i / steps;\n            pointx1 = this.bezierPoint(t, startPoint.x, controlPoint1.x, controlPoint2.x, endPoint.x);\n            pointy1 = this.bezierPoint(t, startPoint.y, controlPoint1.y, controlPoint2.y, endPoint.y);\n            if (i > 0) {\n                pointx3 = pointx1 - pointx2;\n                pointy3 = pointy1 - pointy2;\n                length += Math.sqrt(pointx3 * pointx3 + pointy3 * pointy3);\n            }\n            pointx2 = pointx1;\n            pointy2 = pointy1;\n        }\n        return length;\n    };\n    ImageEditor.prototype.bezierPoint = function (t, startpoint, cp1, cp2, endpoint) {\n        return startpoint * (1.0 - t) * (1.0 - t) * (1.0 - t) + 3.0 * cp1 * (1.0 - t) * (1.0 - t) * t + 3.0 *\n            cp2 * (1.0 - t) * t * t + endpoint * t * t * t;\n    };\n    ImageEditor.prototype.drawArc = function (x, y, size, context) {\n        if ((x > this.destLeft && y > this.destTop && x < (this.destLeft + this.destWidth) && y < (this.destTop + this.destHeight) ||\n            (context !== this.lowerContext && context !== this.upperContext))) {\n            context.moveTo(x, y);\n            context.arc(x, y, size, 0, 2 * Math.PI, false);\n        }\n    };\n    ImageEditor.prototype.freehandRedraw = function (context, points) {\n        var temp = context.filter;\n        context.filter = 'none';\n        if (!isNullOrUndefined(points)) {\n            this.pointColl[this.freehandCounter] = {};\n            this.pointColl[this.freehandCounter].points = points;\n            this.pointColl[this.freehandCounter].strokeColor = this.activeObj.strokeSettings.strokeColor;\n            this.pointColl[this.freehandCounter].strokeWidth = this.penStrokeWidth;\n            this.pointColl[this.freehandCounter].flipState = this.currFlipState;\n            this.freehandCounter++;\n        }\n        for (var n = 0; n < this.freehandCounter; n++) {\n            this.points = extend([], this.pointColl[n].points);\n            this.pointCounter = 0;\n            var len = this.points.length;\n            var controlPoint1 = void 0;\n            var controlPoint2 = void 0;\n            var startPoint = void 0;\n            var endPoint = void 0;\n            var minStrokeWidth = void 0;\n            var maxStrokeWidth = void 0;\n            if (len > 0) {\n                context.fillStyle = this.pointColl[n].strokeColor;\n                minStrokeWidth = maxStrokeWidth = this.penStrokeWidth = this.pointColl[n].strokeWidth;\n            }\n            if (len === 1) {\n                controlPoint1 = controlPoint2 = startPoint = endPoint = this.points[0];\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n            for (var l = 0; l < len - 3; l++) {\n                if (this.points[l + 1] && this.points[l + 2] && this.points[l + 2]) {\n                    controlPoint1 = (this.calcCurveControlPoints(this.points[l + 0], this.points[l + 1], this.points[l + 2])).controlPoint2;\n                    controlPoint2 = (this.calcCurveControlPoints(this.points[l + 1], this.points[l + 2], this.points[l + 3])).controlPoint1;\n                    startPoint = this.points[l + 1];\n                    endPoint = this.points[l + 2];\n                    this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n                }\n            }\n            context.closePath();\n        }\n        context.filter = temp;\n    };\n    ImageEditor.prototype.redrawImgWithObj = function () {\n        this.lowerContext.filter = this.canvasFilter;\n        this.getCurrentFlipState();\n        if (this.isCircleCrop) {\n            this.cropCircle(this.lowerContext);\n        }\n        var tempFilter = this.lowerContext.filter;\n        this.lowerContext.filter = this.getDefaultFilter();\n        this.iterateObjColl();\n        this.freehandRedraw(this.lowerContext);\n        this.lowerContext.filter = tempFilter;\n    };\n    ImageEditor.prototype.refreshToolbar = function (type, isApplyBtn, isCropping, isZooming, cType) {\n        if (!this.isImageLoaded) {\n            return;\n        }\n        var args = { toolbarType: type };\n        if (type !== 'filter' && type !== 'color') {\n            if (document.getElementById(this.element.id + '_toolbar') && this.defToolbarItems.length > 0) {\n                getComponent(document.getElementById(this.element.id + '_toolbar'), 'toolbar').destroy();\n            }\n            if (document.getElementById(this.element.id + '_bottomToolbar') && this.defToolbarItems.length > 0) {\n                if (document.getElementById(this.element.id + '_bottomToolbar').className.indexOf('e-control') > -1) {\n                    getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                }\n            }\n        }\n        this.refreshSlider();\n        switch (type) {\n            case 'main':\n                if (Browser.isDevice) {\n                    if (isCropping) {\n                        this.initToolbarItem(false, true, true);\n                    }\n                    else {\n                        this.initToolbarItem(false, true, null);\n                    }\n                }\n                else if (!Browser.isDevice || isZooming) {\n                    if (isZooming) {\n                        this.initToolbarItem(isApplyBtn, Browser.isDevice, null);\n                    }\n                    else {\n                        this.initToolbarItem(isApplyBtn, Browser.isDevice, null);\n                    }\n                }\n                if (Browser.isDevice) {\n                    this.initBottomToolbar();\n                }\n                break;\n            case 'shapes':\n                if (Browser.isDevice) {\n                    this.initToolbarItem(false, true, true);\n                }\n                if (this.activeObj.shape === 'line') {\n                    args.toolbarItems = ['strokeColor', 'strokeWidth'];\n                }\n                else {\n                    args.toolbarItems = ['fillColor', 'strokeColor', 'strokeWidth'];\n                }\n                this.trigger('toolbarUpdating', args);\n                this.initShapesToolbarItem(args.toolbarItems);\n                break;\n            case 'text':\n                if (Browser.isDevice) {\n                    this.initToolbarItem(false, true, true);\n                }\n                args.toolbarItems = ['fontFamily', 'fontStyle', 'fontSize', 'fontColor'];\n                this.trigger('toolbarUpdating', args);\n                this.initTextToolbarItem(args.toolbarItems);\n                break;\n            case 'pen':\n                if (Browser.isDevice) {\n                    this.initToolbarItem(false, true, true);\n                }\n                args.toolbarItems = ['strokeColor', 'strokeWidth'];\n                this.trigger('toolbarUpdating', args);\n                this.initPenToolbarItem(args.toolbarItems);\n                break;\n            case 'pan':\n                this.initZoomToolbarItem();\n                break;\n            case 'adjustment':\n                if (Browser.isDevice) {\n                    this.initToolbarItem(false, true, true);\n                }\n                this.initAdjustmentToolbarItem();\n                break;\n            case 'filter':\n                this.updateContextualToolbar(type);\n                break;\n            case 'color':\n                this.updateContextualToolbar(type, cType);\n                break;\n        }\n        this.refreshDropDownBtn(isCropping);\n    };\n    ImageEditor.prototype.getAdjustmentToolbarItem = function () {\n        var toolbarItems = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Brightness') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_brightness', prefixIcon: 'e-icons e-brightness', cssClass: 'top-icon e-brightness',\n                tooltipText: this.l10n.getConstant('Brightness'), align: 'Center' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Contrast') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_contrast', prefixIcon: 'e-icons e-contrast', cssClass: 'top-icon e-contrast',\n                tooltipText: this.l10n.getConstant('Contrast'), align: 'Center' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Hue') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_hue', prefixIcon: 'e-icons e-fade', cssClass: 'top-icon e-fade',\n                tooltipText: this.l10n.getConstant('Hue'), align: 'Center' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Saturation') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_saturation', prefixIcon: 'e-icons e-saturation', cssClass: 'top-icon e-saturation',\n                tooltipText: this.l10n.getConstant('Saturation'), align: 'Center' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Exposure') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_exposure', prefixIcon: 'e-icons e-grain', cssClass: 'top-icon e-grain',\n                tooltipText: this.l10n.getConstant('Exposure'), align: 'Center' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Opacity') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_opacity', prefixIcon: 'e-icons e-opacity', cssClass: 'top-icon e-opacity',\n                tooltipText: this.l10n.getConstant('Opacity'), align: 'Center' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Blur') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_blur', prefixIcon: 'e-icons e-tint', cssClass: 'top-icon e-tint',\n                tooltipText: this.l10n.getConstant('Blur'), align: 'Center' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.getFilterToolbarItem = function () {\n        var toolbarItems = [];\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Default') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_default', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Default'), align: 'Center',\n                template: '<div class=\"filterwrapper\" style=\"box-sizing: content-box;\"><canvas id=' + this.element.id + '_defaultCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Default') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Chrome') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_chrome', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Chrome'), align: 'Center',\n                template: '<div class=\"filterwrapper\" style=\"box-sizing: content-box;\"><canvas id=' + this.element.id + '_chromeCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Chrome') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Cold') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_cold', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Cold'), align: 'Center',\n                template: '<div class=\"filterwrapper\" style=\"box-sizing: content-box;\"><canvas id=' + this.element.id + '_coldCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Cold') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Warm') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_warm', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Warm'), align: 'Center',\n                template: '<div class=\"filterwrapper\" style=\"box-sizing: content-box;\"><canvas id=' + this.element.id + '_warmCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Warm') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Grayscale') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_grayscale', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Grayscale'), align: 'Center',\n                template: '<div class=\"filterwrapper\" style=\"box-sizing: content-box;\"><canvas id=' + this.element.id + '_grayscaleCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Grayscale') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Sepia') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_sepia', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Sepia'), align: 'Center',\n                template: '<div class=\"filterwrapper\" style=\"box-sizing: content-box;\"><canvas id=' + this.element.id + '_sepiaCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Sepia') + '</span></div></div>' });\n        }\n        if (isNullOrUndefined(this.toolbar) || (!isNullOrUndefined(this.toolbar) && this.toolbar.indexOf('Invert') > -1)) {\n            toolbarItems.push({ id: this.element.id + '_invert', prefixIcon: 'e-icons e-none', cssClass: 'top-icon e-none',\n                tooltipText: this.l10n.getConstant('Invert'), align: 'Center',\n                template: '<div class=\"filterwrapper\" style=\"box-sizing: content-box;\"><canvas id=' + this.element.id + '_invertCanvas' + '></canvas><div style=\"text-align:center;\"><span>' + this.l10n.getConstant('Invert') + '</span></div></div>' });\n        }\n        var tempToolbarItems = this.processToolbar('center');\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.getPenToolbarItem = function (items) {\n        var toolbarItems = [];\n        if (items.indexOf('strokeColor') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', id: this.element.id + '_pen_strokecolor',\n                cssClass: 'top-icon e-pen-stroke-color',\n                tooltipText: this.l10n.getConstant('StrokeColor'), align: 'Center', type: 'Input',\n                template: '<button id=\"' + this.element.id + '_penColorBtn\"></button>' });\n        }\n        if (items.indexOf('strokeWidth') > -1) {\n            toolbarItems.push({ prefixIcon: 'e-icons e-copy', cssClass: 'top-icon e-size',\n                tooltipText: this.l10n.getConstant('StrokeWidth'),\n                align: 'Center', type: 'Input', template: '<button id=\"' + this.element.id + '_penStrokeWidth\"></button>' });\n        }\n        var tempToolbarItems = this.processSubToolbar(items);\n        for (var i = 0, len = tempToolbarItems.length; i < len; i++) {\n            toolbarItems.push(tempToolbarItems[i]);\n        }\n        if (!Browser.isDevice) {\n            toolbarItems.push({ id: this.element.id + '_ok', prefixIcon: 'e-icons e-check', cssClass: 'top-icon e-tick',\n                tooltipText: this.l10n.getConstant('OK'), align: 'Right' });\n            toolbarItems.push({ id: this.element.id + '_cancel', prefixIcon: 'e-icons e-close', cssClass: 'top-icon e-save',\n                tooltipText: this.l10n.getConstant('Cancel'), align: 'Right' });\n        }\n        return toolbarItems;\n    };\n    ImageEditor.prototype.initPenToolbarItem = function (items) {\n        var _this = this;\n        var leftItem = this.getLeftToolbarItem();\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getPenToolbarItem(items);\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                _this.createPenColor(items);\n                _this.createPenBtn(items);\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                _this.trigger('toolbarCreated', { toolbarType: 'pen' });\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + this.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + this.element.id + '_toolbar');\n        }\n        this.enableDisableToolbarBtn();\n    };\n    ImageEditor.prototype.createPenColor = function (items) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        if (items.indexOf('strokeColor') > -1) {\n            this.element.querySelector('.e-template.e-pen-stroke-color').appendChild(this.createElement('input', {\n                id: this.element.id + '_pen_stroke'\n            }));\n            var penColor = new ColorPicker({\n                modeSwitcher: false, value: '#fff',\n                showButtons: false, mode: 'Palette', cssClass: 'e-pen-color',\n                change: function (args) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var temp = extend([], _this.pointColl, [], true);\n                    _this.updateFreehandDrawColorChange();\n                    var prevCropObj = extend({}, _this.cropObj, {}, true);\n                    var prevObj = _this.getCurrentObj();\n                    prevObj.objColl = extend([], _this.objColl, [], true);\n                    prevObj.pointColl = extend([], _this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], _this.afterCropActions, [], true);\n                    _this.pointColl = temp;\n                    proxy.isFreehandDrawCustomized = true;\n                    proxy.activeObj.strokeSettings.strokeColor = proxy.selectedFreehandColor = args.currentValue.hex;\n                    if (_this.isFreehandDrawEditing) {\n                        _this.upperContext.clearRect(0, 0, _this.upperCanvas.width, _this.upperCanvas.height);\n                        _this.pointColl[_this.freehandDrawSelectedIndex].strokeColor = args.currentValue.hex;\n                        _this.hoverFreehandraw(args.currentValue.hex);\n                        _this.updateUndoRedoColl('freehanddrawCustomized', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                    }\n                    else if (!proxy.togglePen) {\n                        proxy.redrawShape(_this.activeObj);\n                    }\n                    strokeDDB_3.element.children[0].style.backgroundColor = args.currentValue.rgba;\n                    strokeDDB_3.toggle();\n                }\n            }, '#' + this.element.id + '_pen_stroke');\n            var strokeDDB_3 = new DropDownButton({\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = strokeDDB_3.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                        args.element.parentElement.style.left = _this.element.offsetLeft + 'px';\n                    }\n                },\n                target: '.e-pen-color',\n                iconCss: 'e-dropdownbtn-preview'\n            }, '#' + this.element.id + '_penColorBtn');\n            penColor.inline = true;\n            if (!isNullOrUndefined(this.freehandDrawSelectedIndex) && this.freehandDrawSelectedIndex > -1) {\n                this.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview').style.background\n                    = this.selectedFreehandColor === '#42a5f5' ? this.tempFreeHandDrawEditingStyles.strokeColor :\n                        this.pointColl[this.freehandDrawSelectedIndex].strokeColor;\n            }\n            else {\n                this.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview').style.background\n                    = '#fff';\n            }\n        }\n    };\n    ImageEditor.prototype.createPenBtn = function (items) {\n        var _this = this;\n        var strokeWidthItems = [\n            { id: '1', text: this.l10n.getConstant('XSmall') },\n            { id: '2', text: this.l10n.getConstant('Small') },\n            { id: '3', text: this.l10n.getConstant('Medium') },\n            { id: '4', text: this.l10n.getConstant('Large') },\n            { id: '5', text: this.l10n.getConstant('XLarge') }\n        ];\n        if (items.indexOf('strokeWidth') > -1) {\n            var strokeWidthBtn = document.getElementById(this.element.id + '_penStrokeWidth');\n            var spanElem_3 = document.createElement('span');\n            if (!isNullOrUndefined(this.freehandDrawSelectedIndex) && this.freehandDrawSelectedIndex > -1) {\n                spanElem_3.innerHTML = this.getPenStroke(this.pointColl[this.freehandDrawSelectedIndex].strokeWidth);\n            }\n            else {\n                spanElem_3.innerHTML = this.l10n.getConstant('Small');\n            }\n            spanElem_3.className = 'e-pen-stroke-width';\n            strokeWidthBtn.appendChild(spanElem_3);\n            var drpDownBtn_2 = new DropDownButton({ items: strokeWidthItems,\n                open: function (args) {\n                    if (Browser.isDevice) {\n                        args.element.parentElement.style.top = drpDownBtn_2.element.getBoundingClientRect().top -\n                            args.element.parentElement.offsetHeight + 'px';\n                    }\n                    var activeBtn = spanElem_3.innerHTML;\n                    args.element.querySelector('[aria-label = ' + '\"' + activeBtn + '\"' + ']').classList.add('e-selected-btn');\n                },\n                select: function (args) {\n                    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                    var temp = extend([], _this.pointColl, [], true);\n                    _this.updateFreehandDrawColorChange();\n                    var prevCropObj = extend({}, _this.cropObj, {}, true);\n                    var prevObj = _this.getCurrentObj();\n                    prevObj.objColl = extend([], _this.objColl, [], true);\n                    prevObj.pointColl = extend([], _this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], _this.afterCropActions, [], true);\n                    _this.pointColl = temp;\n                    _this.isFreehandDrawCustomized = true;\n                    spanElem_3.textContent = args.item.text;\n                    _this.setPenStroke(args.item.id);\n                    if (_this.isFreehandDrawEditing) {\n                        _this.upperContext.clearRect(0, 0, _this.upperCanvas.width, _this.upperCanvas.height);\n                        _this.hoverFreehandraw(null, _this.penStrokeWidth);\n                        _this.pointColl[_this.freehandDrawSelectedIndex].strokeWidth = _this.penStrokeWidth;\n                        _this.updateUndoRedoColl('freehanddrawCustomized', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                    }\n                    if (Browser.isDevice) {\n                        if (!isNullOrUndefined(document.getElementById(_this.element.id + '_bottomToolbar'))) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_8 = getComponent(_this.element.id + '_bottomToolbar', 'toolbar');\n                            toolbar_8.refreshOverflow();\n                        }\n                    }\n                    else {\n                        if (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar'))) {\n                            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                            var toolbar_9 = getComponent(_this.element.id + '_toolbar', 'toolbar');\n                            toolbar_9.refreshOverflow();\n                        }\n                    }\n                }\n            });\n            // Render initialized DropDownButton.\n            drpDownBtn_2.appendTo('#' + this.element.id + '_penStrokeWidth');\n        }\n    };\n    ImageEditor.prototype.updateFreehandDrawColorChange = function () {\n        if (!isNullOrUndefined(this.freehandDrawSelectedIndex) && !isNullOrUndefined(this.pointColl[this.freehandDrawSelectedIndex])\n            && this.pointColl[this.freehandDrawSelectedIndex].strokeColor === '#42a5f5') {\n            this.pointColl[this.freehandDrawSelectedIndex].strokeColor = this.tempFreeHandDrawEditingStyles.strokeColor;\n        }\n    };\n    ImageEditor.prototype.setPenStroke = function (args) {\n        switch (parseInt(args, 10)) {\n            case 1:\n                this.penStrokeWidth = 1;\n                break;\n            case 2:\n                this.penStrokeWidth = 2;\n                break;\n            case 3:\n                this.penStrokeWidth = 3;\n                break;\n            case 4:\n                this.penStrokeWidth = 4;\n                break;\n            case 5:\n                this.penStrokeWidth = 5;\n                break;\n        }\n    };\n    ImageEditor.prototype.getPenStroke = function (value) {\n        var textContent = '';\n        if (value === 1) {\n            textContent = this.l10n.getConstant('XSmall');\n        }\n        else if (value === 2) {\n            textContent = this.l10n.getConstant('Small');\n        }\n        else if (value === 3) {\n            textContent = this.l10n.getConstant('Medium');\n        }\n        else if (value === 4) {\n            textContent = this.l10n.getConstant('Large');\n        }\n        else if (value === 5) {\n            textContent = this.l10n.getConstant('XLarge');\n        }\n        return textContent;\n    };\n    ImageEditor.prototype.initAdjustmentToolbarItem = function () {\n        var _this = this;\n        var leftItem = this.getLeftToolbarItem(null);\n        var rightItem = this.getRightToolbarItem();\n        var mainItem = this.getAdjustmentToolbarItem();\n        var zoomItem = this.getZoomToolbarItem();\n        if (Browser.isDevice) {\n            this.defToolbarItems = mainItem;\n        }\n        else {\n            this.defToolbarItems = leftItem.concat(zoomItem, mainItem, rightItem);\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: this.defToolbarItems,\n            clicked: this.defToolbarClicked.bind(this),\n            created: function () {\n                if (!Browser.isDevice) {\n                    _this.renderSaveBtn();\n                }\n                if (Browser.isDevice) {\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n                else {\n                    _this.createLeftToolbarControls();\n                    if (_this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar')))) {\n                        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n                        toolbar.refreshOverflow();\n                    }\n                }\n            }\n        });\n        if (Browser.isDevice) {\n            toolbar.appendTo('#' + this.element.id + '_bottomToolbar');\n        }\n        else {\n            toolbar.appendTo('#' + this.element.id + '_toolbar');\n        }\n        this.enableDisableToolbarBtn();\n    };\n    ImageEditor.prototype.initFilterToolbarItem = function () {\n        var _this = this;\n        var mainItem = this.getFilterToolbarItem();\n        if (document.querySelector('#' + this.element.id + '_contextualToolbar').classList.contains('e-control')) {\n            getComponent(document.getElementById(this.element.id + '_contextualToolbar'), 'toolbar').destroy();\n        }\n        var toolbar = new Toolbar({\n            width: '100%',\n            items: mainItem,\n            clicked: this.contextualToolbarClicked.bind(this),\n            created: function () {\n                _this.createCanvasFilter();\n                if (_this.currentFilter === '') {\n                    _this.currentFilter = _this.element.id + '_default';\n                }\n                var hdrWrapper = document.querySelector('#' + _this.element.id + '_headWrapper');\n                if (hdrWrapper) {\n                    hdrWrapper.style.display = 'none';\n                }\n                document.getElementById(_this.currentFilter + 'Canvas').parentElement.parentElement.classList.add('e-selected');\n                _this.enableDisableToolbarBtn();\n                toolbar.refreshOverflow();\n            }\n        });\n        toolbar.appendTo('#' + this.element.id + '_contextualToolbar');\n    };\n    ImageEditor.prototype.getCurrentCanvasData = function () {\n        var tempFilter = this.lowerContext.filter;\n        this.lowerContext.filter = 'none';\n        var objColl = extend([], this.objColl, null, true);\n        this.objColl = [];\n        this.renderImage();\n        var data = this.lowerContext.getImageData(this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.objColl = objColl;\n        this.iterateObjColl();\n        this.lowerContext.filter = tempFilter;\n        return data;\n    };\n    ImageEditor.prototype.createCanvasFilter = function () {\n        var imageData = this.getCurrentCanvasData();\n        this.inMemoryCanvas.width = imageData.width;\n        this.inMemoryCanvas.height = imageData.height;\n        this.inMemoryContext.putImageData(imageData, 0, 0);\n        var noFilter = document.querySelector('#' + this.element.id + '_defaultCanvas');\n        var ctx = noFilter.getContext('2d');\n        noFilter.style.width = '100px';\n        noFilter.style.height = '100px';\n        ctx.filter = this.updateAdjustment('default', null, true);\n        ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n        var chrome = document.querySelector('#' + this.element.id + '_chromeCanvas');\n        ctx = chrome.getContext('2d');\n        chrome.style.width = '100px';\n        chrome.style.height = '100px';\n        ctx.filter = this.updateAdjustment('chrome', null, true);\n        ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n        var cold = document.querySelector('#' + this.element.id + '_coldCanvas');\n        ctx = cold.getContext('2d');\n        cold.style.width = '100px';\n        cold.style.height = '100px';\n        ctx.filter = this.updateAdjustment('cold', null, true);\n        ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n        var warm = document.querySelector('#' + this.element.id + '_warmCanvas');\n        ctx = warm.getContext('2d');\n        warm.style.width = '100px';\n        warm.style.height = '100px';\n        ctx.filter = this.updateAdjustment('warm', null, true);\n        ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n        var grayscale = document.querySelector('#' + this.element.id + '_grayscaleCanvas');\n        ctx = grayscale.getContext('2d');\n        grayscale.style.width = '100px';\n        grayscale.style.height = '100px';\n        ctx.filter = this.updateAdjustment('grayscale', null, true);\n        ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n        var sepia = document.querySelector('#' + this.element.id + '_sepiaCanvas');\n        ctx = sepia.getContext('2d');\n        sepia.style.width = '100px';\n        sepia.style.height = '100px';\n        ctx.filter = this.updateAdjustment('sepia', null, true);\n        ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n        var invert = document.querySelector('#' + this.element.id + '_invertCanvas');\n        ctx = invert.getContext('2d');\n        invert.style.width = '100px';\n        invert.style.height = '100px';\n        ctx.filter = this.updateAdjustment('invert', null, true);\n        ctx.drawImage(this.inMemoryCanvas, 0, 0, 300, 150);\n    };\n    ImageEditor.prototype.callUpdateCurrentTransformedState = function () {\n        var tempObjColl = extend([], this.objColl, [], true);\n        var tempActiveObj = extend({}, this.activeObj, {}, true);\n        this.objColl = [];\n        this.refreshActiveObj();\n        this.isRotateZoom = true;\n        this.updateCurrentTransformedState('initial');\n        if (this.degree === 0 && this.rotateFlipColl.length > 0) {\n            this.destLeft += this.totalPannedPoint.x;\n            this.destTop += this.totalPannedPoint.y;\n        }\n        this.destLeft += this.totalPannedInternalPoint.x;\n        this.destTop += this.totalPannedInternalPoint.y;\n        var temp = this.lowerContext.filter;\n        if (this.degree === 0) {\n            this.setDestPointsForFlipState();\n        }\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.updateCurrentTransformedState('reverse');\n        if (this.degree === 0 && this.rotateFlipColl.length > 0) {\n            this.destLeft += this.totalPannedPoint.x;\n            this.destTop += this.totalPannedPoint.y;\n        }\n        this.isRotateZoom = false;\n        this.objColl = tempObjColl;\n        var tempTogglePen = this.togglePen;\n        this.togglePen = false;\n        this.lowerContext.filter = 'none';\n        this.iterateObjColl();\n        this.destLeft += this.totalPannedInternalPoint.x;\n        this.destTop += this.totalPannedInternalPoint.y;\n        this.freehandRedraw(this.lowerContext);\n        this.destLeft -= this.totalPannedInternalPoint.x;\n        this.destTop -= this.totalPannedInternalPoint.y;\n        this.togglePen = tempTogglePen;\n        this.lowerContext.filter = temp;\n        this.activeObj = tempActiveObj;\n    };\n    ImageEditor.prototype.updateCurrentTransformedState = function (type, isPreventDestination, isRotatePan) {\n        if (this.rotateFlipColl.length > 0) {\n            if (type === 'initial') {\n                this.reverseTransformedState();\n                if (isNullOrUndefined(isPreventDestination)) {\n                    this.setDestinationPoints();\n                }\n            }\n            this.currentTransformedState(type, null, null, isRotatePan);\n        }\n        if (this.isCircleCrop || (!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle')) {\n            if (isRotatePan) {\n                this.destLeft += this.totalPannedClientPoint.x;\n                this.destTop += this.totalPannedClientPoint.y;\n            }\n            this.cropCircle(this.lowerContext);\n            if (isRotatePan) {\n                this.destLeft -= this.totalPannedClientPoint.x;\n                this.destTop -= this.totalPannedClientPoint.y;\n            }\n        }\n    };\n    ImageEditor.prototype.reverseTransformedState = function () {\n        this.lowerContext.setTransform(1, 0, 0, 1, 0, 0);\n    };\n    ImageEditor.prototype.currentTransformedState = function (type, isPreventDimension, context, isPreventCircleCrop) {\n        context = context ? context : this.lowerContext;\n        if (type === 'initial') {\n            this.iterateRotateFlipColl(context, type);\n        }\n        else if (type === 'reverse') {\n            this.iterateRotateFlipColl(context, type);\n            this.setClientTransformedDimension(isPreventDimension);\n            if (this.isCircleCrop || (!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle' && isNullOrUndefined(isPreventCircleCrop))) {\n                if (isPreventCircleCrop) {\n                    this.destLeft += this.totalPannedClientPoint.x;\n                    this.destTop += this.totalPannedClientPoint.y;\n                }\n                this.cropCircle(this.lowerContext);\n                if (isPreventCircleCrop) {\n                    this.destLeft -= this.totalPannedClientPoint.x;\n                    this.destTop -= this.totalPannedClientPoint.y;\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.iterateRotateFlipColl = function (context, type) {\n        if (type === 'initial') {\n            for (var i = 0; i < this.rotateFlipColl.length; i++) {\n                this.setTransform(context, this.rotateFlipColl[i]);\n            }\n        }\n        else if (type === 'reverse') {\n            for (var i = this.rotateFlipColl.length - 1; i >= 0; i--) {\n                this.setTransform(context, this.rotateFlipColl[i], true);\n            }\n        }\n    };\n    ImageEditor.prototype.setTransform = function (context, value, isReverse) {\n        if (isReverse && value === 90) {\n            value = -90;\n        }\n        else if (isReverse && value === -90) {\n            value = 90;\n        }\n        if (value === 'horizontal' && this.degree % 90 === 0 && this.degree % 180 !== 0) {\n            value = 'vertical';\n        }\n        else if (value === 'vertical' && this.degree % 90 === 0 && this.degree % 180 !== 0) {\n            value = 'horizontal';\n        }\n        this.isReverseRotate = this.isReverseFlip = true;\n        if (isNullOrUndefined(isReverse)) {\n            context.clearRect(0, 0, context.canvas.width, context.canvas.height);\n        }\n        switch (value) {\n            case 90:\n            case -90:\n                context.translate(context.canvas.width / 2, context.canvas.height / 2);\n                context.rotate(Math.PI / 180 * value);\n                context.translate(-context.canvas.width / 2, -context.canvas.height / 2);\n                break;\n            case 'horizontal':\n                context.translate(context.canvas.width, 0);\n                context.scale(-1, 1);\n                break;\n            case 'vertical':\n                context.translate(0, context.canvas.height);\n                context.scale(1, -1);\n                break;\n        }\n        this.isReverseRotate = this.isReverseFlip = false;\n    };\n    ImageEditor.prototype.isObjInsideCropRegion = function (obj) {\n        var isInside = false;\n        if (obj.activePoint.startX >= this.destLeft && obj.activePoint.endX <= (this.destLeft + this.destWidth)) {\n            isInside = true;\n        }\n        else if (obj.activePoint.startX <= this.destLeft && obj.activePoint.endX >= this.destLeft) {\n            isInside = true;\n        }\n        else if (obj.activePoint.startX <= (this.destLeft + this.destWidth) && obj.activePoint.endX >= (this.destLeft + this.destWidth)) {\n            isInside = true;\n        }\n        else if (obj.activePoint.startY >= this.destTop && obj.activePoint.endY <= (this.destTop + this.destHeight)) {\n            isInside = true;\n        }\n        else if (obj.activePoint.startY <= this.destTop && obj.activePoint.endY >= this.destTop) {\n            isInside = true;\n        }\n        else if (obj.activePoint.startY <= (this.destTop + this.destHeight) && obj.activePoint.endY >= (this.destTop + this.destHeight)) {\n            isInside = true;\n        }\n        return isInside;\n    };\n    ImageEditor.prototype.panFreehandDrawColl = function (xDiff, yDiff, panRegion) {\n        for (var n = 0; n < this.freehandCounter; n++) {\n            this.points = extend([], this.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = this.points.length;\n            for (var l = 0; l < len; l++) {\n                if (panRegion === '' || panRegion === 'vertical') {\n                    this.points[l].x += xDiff;\n                }\n                else {\n                    this.points[l].x -= xDiff;\n                }\n                if (panRegion === '' || panRegion === 'horizontal') {\n                    this.points[l].y += yDiff;\n                }\n                else {\n                    this.points[l].y -= yDiff;\n                }\n            }\n        }\n        this.freehandRedraw(this.lowerContext);\n    };\n    ImageEditor.prototype.panObjColl = function (xDiff, yDiff, panRegion) {\n        for (var i = 0; i < this.objColl.length; i++) {\n            if (panRegion === '' || panRegion === 'vertical') {\n                this.objColl[i].activePoint.startX += xDiff;\n                this.objColl[i].activePoint.endX += xDiff;\n            }\n            else {\n                this.objColl[i].activePoint.startX -= xDiff;\n                this.objColl[i].activePoint.endX -= xDiff;\n            }\n            if (panRegion === '' || panRegion === 'horizontal') {\n                this.objColl[i].activePoint.startY += yDiff;\n                this.objColl[i].activePoint.endY += yDiff;\n            }\n            else {\n                this.objColl[i].activePoint.startY -= yDiff;\n                this.objColl[i].activePoint.endY -= yDiff;\n            }\n            this.objColl[i].activePoint.width = this.objColl[i].activePoint.endX -\n                this.objColl[i].activePoint.startX;\n            this.objColl[i].activePoint.height = this.objColl[i].activePoint.endY -\n                this.objColl[i].activePoint.startY;\n            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n            var temp = this.lowerContext.filter;\n            this.lowerContext.filter = 'none';\n            this.apply(this.objColl[i].shape, this.objColl[i]);\n            this.lowerContext.filter = temp;\n            this.refreshActiveObj();\n        }\n    };\n    ImageEditor.prototype.cropObjColl = function () {\n        if (this.objColl.length > 0) {\n            for (var i = 0; i < this.objColl.length; i++) {\n                this.objColl[i].imageRatio = { startX: ((this.objColl[i].activePoint.startX -\n                        this.activeObj.activePoint.startX) / this.activeObj.activePoint.width),\n                    startY: ((this.objColl[i].activePoint.startY -\n                        this.activeObj.activePoint.startY) / this.activeObj.activePoint.height),\n                    endX: ((this.objColl[i].activePoint.endX -\n                        this.activeObj.activePoint.startX) / this.activeObj.activePoint.width),\n                    endY: ((this.objColl[i].activePoint.endY -\n                        this.activeObj.activePoint.startY) / this.activeObj.activePoint.height),\n                    width: this.activeObj.activePoint.width / this.objColl[i].activePoint.width,\n                    height: this.activeObj.activePoint.height / this.objColl[i].activePoint.height };\n                if (this.objColl[i].shape === 'text') {\n                    this.objColl[i].textSettings.fontRatio = this.objColl[i].activePoint.width / this.objColl[i].textSettings.fontSize;\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.cropFreehandDrawColl = function () {\n        for (var n = 0; n < this.freehandCounter; n++) {\n            this.points = extend([], this.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = this.points.length;\n            for (var l = 0; l < len; l++) {\n                this.points[l].ratioX = (this.points[l].x -\n                    this.activeObj.activePoint.startX) / this.activeObj.activePoint.width;\n                this.points[l].ratioY = (this.points[l].y -\n                    this.activeObj.activePoint.startY) / this.activeObj.activePoint.height;\n            }\n        }\n    };\n    ImageEditor.prototype.hoverFreehandraw = function (fillStyle, strokeWidth) {\n        var context = this.upperContext;\n        var idx = -1;\n        if (this.freehandDrawHoveredIndex > -1) {\n            idx = this.freehandDrawHoveredIndex;\n        }\n        else {\n            idx = this.freehandDrawSelectedIndex;\n        }\n        this.points = extend([], this.pointColl[idx].points);\n        this.pointCounter = 0;\n        var len = this.points.length;\n        var controlPoint1;\n        var controlPoint2;\n        var startPoint;\n        var endPoint;\n        var minStrokeWidth = 0;\n        var maxStrokeWidth = 0;\n        context.fillStyle = fillStyle ? fillStyle : '#42a5f5';\n        context.strokeStyle = '#fff';\n        minStrokeWidth = maxStrokeWidth = this.penStrokeWidth = strokeWidth ?\n            strokeWidth : this.pointColl[idx].strokeWidth;\n        if (len === 1) {\n            controlPoint1 = controlPoint2 = startPoint = endPoint = this.points[0];\n            this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n        }\n        for (var l = 0; l < len - 3; l++) {\n            if (this.points[l + 1] && this.points[l + 2] && this.points[l + 2]) {\n                controlPoint1 = (this.calcCurveControlPoints(this.points[l + 0], this.points[l + 1], this.points[l + 2])).controlPoint2;\n                controlPoint2 = (this.calcCurveControlPoints(this.points[l + 1], this.points[l + 2], this.points[l + 3])).controlPoint1;\n                startPoint = this.points[l + 1];\n                endPoint = this.points[l + 2];\n                this.startDraw(context, controlPoint1, controlPoint2, startPoint, endPoint, minStrokeWidth, maxStrokeWidth);\n            }\n        }\n        context.closePath();\n    };\n    ImageEditor.prototype.pointsHorizontalFlip = function () {\n        for (var n = 0; n < this.freehandCounter; n++) {\n            if (this.pointColl[n].shapeFlip !== this.currFlipState) {\n                this.points = extend([], this.pointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.points.length;\n                for (var l = 0; l < len; l++) {\n                    if (this.points[l].x <= this.destLeft + (this.destWidth / 2)) {\n                        this.points[l].x = (this.destLeft + this.destWidth) - (this.points[l].x - this.destLeft);\n                    }\n                    else if (this.points[l].x >= this.destLeft + (this.destWidth / 2)) {\n                        this.points[l].x = this.destLeft + (this.destLeft + this.destWidth - this.points[l].x);\n                    }\n                    this.points[l].ratioX = (this.points[l].x - this.destLeft) / this.destWidth;\n                    this.points[l].ratioY = (this.points[l].y - this.destTop) / this.destHeight;\n                }\n                this.pointColl[n].shapeFlip = this.currFlipState;\n            }\n        }\n    };\n    ImageEditor.prototype.pointsVerticalFlip = function () {\n        for (var n = 0; n < this.freehandCounter; n++) {\n            if (this.pointColl[n].shapeFlip !== this.currFlipState) {\n                this.points = extend([], this.pointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.points.length;\n                for (var l = 0; l < len; l++) {\n                    if (this.points[l].y <= this.destTop + (this.destHeight / 2)) {\n                        this.points[l].y = (this.destTop + this.destHeight) - (this.points[l].y - this.destTop);\n                    }\n                    else if (this.points[l].y >= this.destTop + (this.destHeight / 2)) {\n                        this.points[l].y = this.destTop + (this.destTop + this.destHeight - this.points[l].y);\n                    }\n                    this.points[l].ratioX = (this.points[l].x - this.destLeft) / this.destWidth;\n                    this.points[l].ratioY = (this.points[l].y - this.destTop) / this.destHeight;\n                }\n                this.pointColl[n].shapeFlip = this.currFlipState;\n            }\n        }\n    };\n    ImageEditor.prototype.flipFreehandrawColl = function (value) {\n        if (value.toLowerCase() === 'horizontal') {\n            this.pointsHorizontalFlip();\n        }\n        else if (value.toLowerCase() === 'vertical') {\n            this.pointsVerticalFlip();\n        }\n        else {\n            this.pointsHorizontalFlip();\n            for (var i = 0; i < this.freehandCounter; i++) {\n                this.pointColl[i].shapeFlip = '';\n            }\n            this.pointsVerticalFlip();\n        }\n    };\n    ImageEditor.prototype.rotateFreehandDrawColl = function () {\n        for (var n = 0; n < this.freehandCounter; n++) {\n            this.points = extend([], this.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = this.points.length;\n            for (var l = 0; l < len; l++) {\n                this.points[l].y = this.destTop + (this.destHeight * this.points[l].ratioX);\n                this.points[l].x = (this.destLeft + this.destWidth) - (this.destWidth * this.points[l].ratioY);\n            }\n        }\n        // Update current image ratio for all objects\n        for (var n = 0; n < this.freehandCounter; n++) {\n            this.points = extend([], this.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = this.points.length;\n            for (var l = 0; l < len; l++) {\n                this.points[l].ratioX = (this.points[l].x - this.destLeft) / this.destWidth;\n                this.points[l].ratioY = (this.points[l].y - this.destTop) / this.destHeight;\n            }\n        }\n    };\n    ImageEditor.prototype.zoomFreehandDrawColl = function (isPreventApply) {\n        for (var n = 0; n < this.freehandCounter; n++) {\n            this.points = extend([], this.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = this.points.length;\n            for (var l = 0; l < len; l++) {\n                this.points[l].x = this.zoomX(this.points[l].ratioX);\n                this.points[l].y = this.zoomY(this.points[l].ratioY);\n            }\n        }\n        if (isNullOrUndefined(isPreventApply)) {\n            this.freehandRedraw(this.lowerContext);\n        }\n    };\n    ImageEditor.prototype.zoomX = function (x) {\n        return (x * this.destWidth) + this.destLeft;\n    };\n    ImageEditor.prototype.zoomY = function (y) {\n        return (y * this.destHeight) + this.destTop;\n    };\n    ImageEditor.prototype.zoomObjColl = function (preventApply) {\n        for (var i = 0; i < this.objColl.length; i++) {\n            this.objColl[i].activePoint.startX = (this.objColl[i].imageRatio.startX * this.destWidth) + this.destLeft;\n            this.objColl[i].activePoint.startY = (this.objColl[i].imageRatio.startY * this.destHeight) + this.destTop;\n            this.objColl[i].activePoint.endX = (this.objColl[i].imageRatio.endX * this.destWidth) + this.destLeft;\n            this.objColl[i].activePoint.endY = (this.objColl[i].imageRatio.endY * this.destHeight) + this.destTop;\n            this.objColl[i].activePoint.width = this.objColl[i].activePoint.endX -\n                this.objColl[i].activePoint.startX;\n            this.objColl[i].activePoint.height = this.objColl[i].activePoint.endY -\n                this.objColl[i].activePoint.startY;\n            if (this.objColl[i].shape === 'text') {\n                this.updateFontSize(this.objColl[i]);\n            }\n            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n            if (isNullOrUndefined(preventApply)) {\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                this.apply(this.objColl[i].shape, this.objColl[i]);\n                this.refreshActiveObj();\n                this.lowerContext.filter = temp;\n            }\n        }\n    };\n    ImageEditor.prototype.calcRatio = function () {\n        var widthRatio;\n        var heightRatio;\n        if (this.degree === 0 || this.degree % 180 === 0) {\n            widthRatio = this.baseImg.width / this.destWidth;\n            heightRatio = this.baseImg.height / this.destHeight;\n        }\n        else {\n            widthRatio = this.baseImg.height / this.destWidth;\n            heightRatio = this.baseImg.width / this.destHeight;\n        }\n        return { width: widthRatio, height: heightRatio };\n    };\n    ImageEditor.prototype.drawCustomSelection = function (cropShape) {\n        this.currObjType.isCustomCrop = true;\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.currObjType.shape = this.activeObj.shape = cropShape.toLowerCase();\n        if (this.zoomFactor === 0) {\n            if (this.destLeft >= 0 && this.destTop >= 0) {\n                this.activeObj.activePoint.startX = this.destLeft;\n                this.activeObj.activePoint.startY = this.destTop;\n                this.activeObj.activePoint.endX = this.destLeft + this.destWidth;\n                this.activeObj.activePoint.endY = this.destTop + this.destHeight;\n            }\n            else if (this.destLeft >= 0) {\n                this.activeObj.activePoint.startX = this.destLeft;\n                this.activeObj.activePoint.startY = 7.5;\n                this.activeObj.activePoint.endX = this.destLeft + this.destWidth;\n                this.activeObj.activePoint.endY = this.lowerCanvas.height - 15;\n            }\n            else if (this.destTop >= 0) {\n                this.activeObj.activePoint.startX = 7.5;\n                this.activeObj.activePoint.startY = this.destTop;\n                this.activeObj.activePoint.endX = this.lowerCanvas.width - 15;\n                this.activeObj.activePoint.endY = this.destTop + this.destHeight;\n            }\n            else {\n                // arcRadius 7.5\n                this.activeObj.activePoint.startX = 7.5;\n                this.activeObj.activePoint.startY = 7.5;\n                this.activeObj.activePoint.endX = this.lowerCanvas.width - 15;\n                this.activeObj.activePoint.endY = this.lowerCanvas.height - 15;\n            }\n        }\n        else {\n            if (this.destLeft > 0) {\n                this.activeObj.activePoint.startX = this.destLeft;\n            }\n            else {\n                this.activeObj.activePoint.startX = 7.5;\n            }\n            if (this.destTop > 0) {\n                this.activeObj.activePoint.startY = this.destTop;\n            }\n            else {\n                this.activeObj.activePoint.startY = 7.5;\n            }\n            if (this.destLeft + this.destWidth + 15 < this.lowerCanvas.width) {\n                this.activeObj.activePoint.endX = this.destLeft + this.destWidth - 15;\n            }\n            else {\n                this.activeObj.activePoint.endX = this.lowerCanvas.width - 15;\n            }\n            if (this.destTop + this.destHeight + 15 < this.lowerCanvas.height) {\n                this.activeObj.activePoint.endY = this.destTop + this.destHeight - 15;\n            }\n            else {\n                this.activeObj.activePoint.endY = this.lowerCanvas.height - 15;\n            }\n        }\n        if (this.activeObj.activePoint.startX < this.destLeft) {\n            this.activeObj.activePoint.startX = this.destLeft;\n        }\n        if (this.activeObj.activePoint.startY < this.destTop) {\n            this.activeObj.activePoint.startY = this.destTop;\n        }\n        if (this.activeObj.activePoint.endX > this.destLeft + this.destWidth) {\n            this.activeObj.activePoint.endX = this.destLeft + this.destWidth;\n        }\n        if (this.activeObj.activePoint.endY > this.destTop + this.destHeight) {\n            this.activeObj.activePoint.endY = this.destTop + this.destHeight;\n        }\n        if (this.activeObj.activePoint.startX === this.destLeft && this.destLeft + this.destWidth > this.lowerCanvas.clientWidth) {\n            this.activeObj.activePoint.endX = this.lowerCanvas.clientWidth - 15;\n        }\n        if (this.activeObj.activePoint.startY === this.destTop && this.destTop + this.destHeight > this.lowerCanvas.clientHeight) {\n            this.activeObj.activePoint.endY = this.lowerCanvas.clientHeight - 15;\n        }\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        this.updateActiveObject(this.activeObj.activePoint, this.activeObj);\n        this.drawObject('duplicate', this.activeObj, null, null, true);\n    };\n    ImageEditor.prototype.clearOuterCanvas = function (context) {\n        var destLeft = this.destLeft;\n        var destTop = this.destTop;\n        if (this.currFlipState !== '') {\n            this.destLeft = this.lowerCanvas.clientWidth - (this.destWidth + this.destLeft);\n            this.destTop = this.lowerCanvas.clientHeight - (this.destHeight + this.destTop);\n        }\n        if (this.destWidth < this.lowerCanvas.width) {\n            var left = this.destLeft > 0 ? this.destLeft : 0;\n            context.clearRect(0, 0, left, this.lowerCanvas.height);\n            context.clearRect(this.destLeft + this.destWidth, 0, left, this.lowerCanvas.height);\n        }\n        if (this.destHeight < this.lowerCanvas.height) {\n            var top_1 = this.destTop > 0 ? this.destTop : 0;\n            context.clearRect(0, 0, this.lowerCanvas.width, top_1);\n            context.clearRect(0, this.destTop + this.destHeight, this.lowerCanvas.width, top_1);\n        }\n        if (this.currFlipState !== '') {\n            this.destLeft = destLeft;\n            this.destTop = destTop;\n        }\n    };\n    ImageEditor.prototype.cropCircle = function (context, isSave, isFlip) {\n        if (isFlip && this.currFlipState !== '') {\n            this.setTransform(context, this.currFlipState);\n        }\n        context.globalCompositeOperation = 'destination-in';\n        context.beginPath();\n        if (isNullOrUndefined(isSave)) {\n            context.arc(this.destLeft + (this.destWidth / 2), this.destTop + (this.destHeight / 2), this.destWidth / 2, 0, Math.PI * 2);\n        }\n        else {\n            context.arc(this.destWidth / 2, this.destHeight / 2, this.destWidth / 2, 0, Math.PI * 2);\n        }\n        context.closePath();\n        context.fill();\n        context.restore();\n        context.globalCompositeOperation = 'source-over';\n        this.currObjType.isActiveObj = this.isCircleCrop = true;\n        if (isFlip && this.currFlipState !== '') {\n            this.setTransform(context, this.currFlipState);\n        }\n    };\n    ImageEditor.prototype.updateCropObj = function () {\n        this.afterCropActions = [];\n        var obj = this.getCurrentObj();\n        this.cropObj = extend({}, obj, {}, true);\n    };\n    ImageEditor.prototype.setCurrentObj = function (obj) {\n        var isObj = obj ? true : false;\n        obj = obj ? obj : this.cropObj;\n        this.cropZoomFactor = obj.cropZoom;\n        this.defaultZoomFactor = obj.defaultZoom;\n        if (!isObj) {\n            this.zoomFactor = obj.cropZoom;\n        }\n        else {\n            if (!isNullOrUndefined(obj.activeObj.shape) && obj.activeObj.shape.split('-')[0] === 'crop') {\n                this.zoomFactor = obj.cropZoom;\n            }\n            else {\n                this.zoomFactor = obj.defaultZoom;\n            }\n        }\n        this.totalPannedPoint = extend({}, obj.totalPannedPoint, {}, true);\n        this.totalPannedClientPoint = extend({}, obj.totalPannedClientPoint, {}, true);\n        this.totalPannedInternalPoint = extend({}, obj.totalPannedInternalPoint, {}, true);\n        this.tempFlipPanPoint = extend({}, obj.tempFlipPanPoint, {}, true);\n        this.rotateFlipColl = extend([], obj.rotateFlipColl, [], true);\n        this.degree = obj.degree;\n        this.currFlipState = obj.currFlipState;\n        this.destLeft = obj.destPoints.startX;\n        this.destTop = obj.destPoints.startY;\n        this.destWidth = obj.destPoints.width;\n        this.destHeight = obj.destPoints.height;\n        this.srcLeft = obj.srcPoints.startX;\n        this.srcTop = obj.srcPoints.startY;\n        this.srcWidth = obj.srcPoints.width;\n        this.srcHeight = obj.srcPoints.height;\n        this.lowerContext.filter = obj.filter;\n        if (this.lowerContext.filter.split(' ').length > 1) {\n            if (this.lowerContext.filter.split(' ')[0].split('(')[1].split(')')[0] === '1') {\n                this.isBrightnessAdjusted = false;\n            }\n            else {\n                this.isBrightnessAdjusted = true;\n            }\n        }\n        var isCircleCrop = this.isCircleCrop;\n        var currSelectionPoint = extend({}, this.currSelectionPoint, {}, true);\n        this.currSelectionPoint = null;\n        this.isCircleCrop = false;\n        this.drawCropSelectionImage(obj, false);\n        if (this.degree !== 0) {\n            this.currentPannedPoint = { x: 0, y: 0 };\n            this.rotatePan();\n        }\n        this.activeObj = extend({}, obj.activeObj, {}, true);\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        if (this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) {\n            this.drawObject('duplicate');\n        }\n        var activeObj = extend({}, obj.activeObj, {}, true);\n        var isAfterCropAction = false;\n        this.afterCropActions = this.alignRotateFlipColl(this.afterCropActions);\n        var afterCropActions = extend([], this.afterCropActions, [], true);\n        if (!isObj && afterCropActions.length > 0) {\n            isAfterCropAction = true;\n            for (var i = 0; i < afterCropActions.length; i++) {\n                if (this.degree % 90 === 0 && this.degree % 180 !== 0 &&\n                    (afterCropActions[i] === 'horizontalflip' || afterCropActions[i] === 'verticalflip')) {\n                    this.rotatedFlipCropSelection = true;\n                }\n                this.updateTransform(afterCropActions[i]);\n                if (afterCropActions[i] === 'horizontalflip' || afterCropActions[i] === 'verticalflip') {\n                    if (afterCropActions.length === 1) {\n                        this.activeObj = extend({}, this.cropObj.activeObj, {}, true);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.drawObject('duplicate');\n                    }\n                }\n            }\n            activeObj = extend({}, this.activeObj, {}, true);\n            this.totalPannedPoint = { x: 0, y: 0 };\n            this.totalPannedClientPoint = { x: 0, y: 0 };\n            this.totalPannedInternalPoint = { x: 0, y: 0 };\n            this.activeObj = activeObj;\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            if (this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) {\n                this.drawObject('duplicate');\n            }\n            if (obj.degree !== this.degree) {\n                this.cropZoomFactor = this.zoomFactor = 0;\n            }\n            this.updateObjAndFreeHandDrawColl();\n            if (this.rotatedFlipCropSelection) {\n                // this.totalPannedInternalPoint = extend({}, this.cropObj.totalPannedInternalPoint, {}, true) as Point;\n                this.rotatedFlipCropSelection = false;\n            }\n        }\n        this.afterCropActions = afterCropActions;\n        if (!this.isCancelAction && !isAfterCropAction) {\n            this.updateObjAndFreeHandDrawColl();\n            this.zoomFreehandDrawColl();\n            this.destLeft = obj.destPoints.startX;\n            this.destTop = obj.destPoints.startY;\n        }\n        this.activeObj = activeObj;\n        this.isCircleCrop = isCircleCrop;\n        this.currSelectionPoint = currSelectionPoint;\n    };\n    ImageEditor.prototype.drawCropSelectionImage = function (obj, isObj) {\n        var temp = this.lowerContext.filter;\n        this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.reverseTransformedState();\n        if (isObj) {\n            this.updateCurrentTransformedState('initial');\n        }\n        else {\n            this.iterateRotateFlipColl(this.lowerContext, 'initial');\n        }\n        this.setDestPointsForFlipState();\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        if (isObj) {\n            this.updateCurrentTransformedState('reverse');\n        }\n        else {\n            this.iterateRotateFlipColl(this.lowerContext, 'reverse');\n        }\n        this.destLeft = this.cropObj.destPoints.startX;\n        this.destTop = this.cropObj.destPoints.startY;\n        var activeObj = extend({}, obj.activeObj, {}, true);\n        this.lowerContext.filter = 'none';\n        if (this.isCancelAction) {\n            this.zoomObjColl();\n            this.zoomFreehandDrawColl();\n        }\n        else {\n            this.destLeft = obj.destPoints.startX;\n            this.destTop = obj.destPoints.startY;\n            this.destWidth = obj.destPoints.width;\n            this.destHeight = obj.destPoints.height;\n            this.srcLeft = obj.srcPoints.startX;\n            this.srcTop = obj.srcPoints.startY;\n            this.srcWidth = obj.srcPoints.width;\n            this.srcHeight = obj.srcPoints.height;\n            var destPoints = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n            this.destLeft = obj.activeObj.activePoint.startX;\n            this.destTop = obj.activeObj.activePoint.startY;\n            this.destWidth = obj.activeObj.activePoint.width;\n            this.destHeight = obj.activeObj.activePoint.height;\n            this.zoomObjColl();\n            this.zoomFreehandDrawColl();\n            this.destLeft = destPoints.startX;\n            this.destTop = destPoints.startY;\n            this.destWidth = destPoints.width;\n            this.destHeight = destPoints.height;\n        }\n        this.activeObj = activeObj;\n        this.lowerContext.filter = temp;\n    };\n    ImageEditor.prototype.cropImg = function (isRotateCrop) {\n        if (isNullOrUndefined(isRotateCrop)) {\n            this.croppedDegree = this.degree;\n        }\n        if (isNullOrUndefined(isRotateCrop) && this.degree !== 0) {\n            this.updateCropObj();\n            this.currDestinationPoint = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n            this.rotateCrop();\n        }\n        else if (isNullOrUndefined(isRotateCrop) && this.currFlipState !== '') {\n            this.updateCropObj();\n            this.currDestinationPoint = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n            this.flipCrop();\n        }\n        else {\n            this.tempZoomFactor = this.zoomFactor;\n            var ratio = this.calcRatio();\n            if (isNullOrUndefined(isRotateCrop) || !isRotateCrop) {\n                this.updateCropObj();\n                this.resetPanPoints();\n                this.updateImageRatioForActObj();\n                this.currDestinationPoint = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n                this.currSelectionPoint = extend({}, this.activeObj, {}, true);\n                this.cropDestPoints = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n            }\n            var maxDimension = this.calcMaxDimension(this.activeObj.activePoint.width *\n                ratio.width, this.activeObj.activePoint.height * ratio.height);\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.srcLeft = (this.activeObj.activePoint.startX * ratio.width) - (this.destLeft * ratio.width);\n            this.srcTop = (this.activeObj.activePoint.startY * ratio.height) - (this.destTop * ratio.height);\n            this.srcWidth = (this.activeObj.activePoint.width * ratio.width);\n            this.srcHeight = (this.activeObj.activePoint.height * ratio.height);\n            this.destLeft = (this.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            this.destTop = (this.lowerCanvas.clientHeight - maxDimension.height) / 2;\n            this.destWidth = maxDimension.width;\n            this.destHeight = maxDimension.height;\n            var temp = this.lowerContext.filter;\n            this.updateBrightnessFilter();\n            this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n            this.lowerContext.filter = 'none';\n            var activeObj = extend({}, this.activeObj, {}, true);\n            this.cropObjColl();\n            this.zoomObjColl();\n            for (var i = 0; i < this.objColl.length; i++) {\n                if (this.isObjInsideCropRegion(this.objColl[i])) {\n                    this.apply(this.objColl[i].shape, this.objColl[i]);\n                    this.refreshActiveObj();\n                }\n            }\n            this.activeObj = activeObj;\n            this.cropFreehandDrawColl();\n            this.zoomFreehandDrawColl();\n            this.clearOuterCanvas(this.lowerContext);\n            this.clearOuterCanvas(this.upperContext);\n            if (this.currSelectionPoint.shape === 'crop-circle') {\n                this.cropCircle(this.lowerContext);\n            }\n            else {\n                this.isCircleCrop = false;\n            }\n            this.lowerContext.filter = temp;\n            this.refreshActiveObj();\n            this.currObjType.isCustomCrop = false;\n            this.pan(false);\n            this.defaultZoomFactor = 0;\n        }\n    };\n    ImageEditor.prototype.updateImageRatioForActObj = function () {\n        this.activeObj.imageRatio = { startX: ((this.activeObj.activePoint.startX - this.destLeft) / this.destWidth),\n            startY: ((this.activeObj.activePoint.startY - this.destTop) / this.destHeight),\n            endX: ((this.activeObj.activePoint.endX - this.destLeft) / this.destWidth),\n            endY: ((this.activeObj.activePoint.endY - this.destTop) / this.destHeight),\n            width: this.destWidth / this.activeObj.activePoint.width, height: this.destHeight / this.activeObj.activePoint.height };\n    };\n    ImageEditor.prototype.drawImgToCanvas = function (maxDimension) {\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.destWidth = maxDimension.width;\n        this.destHeight = maxDimension.height;\n        if (this.isInitialLoading) {\n            this.initializeFilter();\n            this.isInitialLoading = false;\n        }\n        var temp = this.lowerContext.filter;\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        if ((!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle') || this.isCircleCrop) {\n            this.cropCircle(this.lowerContext);\n        }\n        this.lowerContext.filter = temp;\n    };\n    ImageEditor.prototype.limitPan = function () {\n        if (this.activeObj.activePoint) {\n            if (this.destLeft > this.activeObj.activePoint.startX) {\n                this.destLeft = this.activeObj.activePoint.startX;\n            }\n            if (this.destTop > this.activeObj.activePoint.startY) {\n                this.destTop = this.activeObj.activePoint.startY;\n            }\n            if (this.destLeft + this.destWidth < this.activeObj.activePoint.endX) {\n                this.destLeft = this.activeObj.activePoint.endX - this.destWidth;\n            }\n            if (this.destTop + this.destHeight < this.activeObj.activePoint.endY) {\n                this.destTop = this.activeObj.activePoint.endY - this.destHeight;\n            }\n        }\n    };\n    ImageEditor.prototype.updatePanPoints = function (panRegion) {\n        var tempDestLeft = this.destLeft;\n        var tempDestTop = this.destTop;\n        var xDiff = this.panMove.x - this.tempPanMove.x;\n        var yDiff = this.panMove.y - this.tempPanMove.y;\n        if (panRegion === '') {\n            this.destLeft += xDiff;\n            this.destTop += yDiff;\n            this.limitPan();\n        }\n        else if (panRegion === 'horizontal') {\n            var tempActObj = extend({}, this.activeObj, {}, true);\n            this.updateFlipActiveObj(panRegion);\n            xDiff = this.tempPanMove.x - this.panMove.x;\n            this.destLeft += xDiff;\n            this.destTop += yDiff;\n            this.limitPan();\n            this.activeObj = tempActObj;\n        }\n        else if (panRegion === 'vertical') {\n            var tempActObj = extend({}, this.activeObj, {}, true);\n            this.updateFlipActiveObj(panRegion);\n            yDiff = this.tempPanMove.y - this.panMove.y;\n            this.destLeft += xDiff;\n            this.destTop += yDiff;\n            this.limitPan();\n            this.activeObj = tempActObj;\n        }\n        else if (panRegion === 'horizontalVertical') {\n            var tempActObj = extend({}, this.activeObj, {}, true);\n            this.updateFlipActiveObj(panRegion);\n            xDiff = this.tempPanMove.x - this.panMove.x;\n            this.destLeft += xDiff;\n            this.destTop -= yDiff;\n            this.limitPan();\n            this.activeObj = tempActObj;\n        }\n        else if (panRegion === 'verticalHorizontal') {\n            var tempActObj = extend({}, this.activeObj, {}, true);\n            this.updateFlipActiveObj(panRegion);\n            yDiff = this.tempPanMove.y - this.panMove.y;\n            this.destLeft -= xDiff;\n            this.destTop += yDiff;\n            this.limitPan();\n            this.activeObj = tempActObj;\n        }\n        // returns panned difference for manipulating object collection\n        return { x: this.destLeft - tempDestLeft, y: this.destTop - tempDestTop };\n    };\n    ImageEditor.prototype.setCurrentPanRegion = function (region, type) {\n        var panRegion = region;\n        if (region === '') {\n            if (type === 'horizontal') {\n                panRegion = 'horizontal';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'vertical';\n            }\n        }\n        else if (region === 'horizontal') {\n            if (type === 'horizontal') {\n                panRegion = 'horizontalVertical';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'verticalHorizontal';\n            }\n            else if (type === 90) {\n                panRegion = 'vertical';\n            }\n            else if (type === -90) {\n                panRegion = 'horizontal';\n            }\n        }\n        else if (region === 'vertical') {\n            if (type === 'horizontal') {\n                panRegion = 'horizontalVertical';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'verticalHorizontal';\n            }\n            else if (type === 90) {\n                panRegion = 'horizontal';\n            }\n            else if (type === -90) {\n                panRegion = 'vertical';\n            }\n        }\n        else {\n            if (type === 'horizontal') {\n                panRegion = 'vertical';\n            }\n            else if (type === 'vertical') {\n                panRegion = 'horizontal';\n            }\n        }\n        return panRegion;\n    };\n    ImageEditor.prototype.getCurrentPanRegion = function () {\n        var panRegion = '';\n        for (var i = 0; i < this.rotateFlipColl.length; i++) {\n            panRegion = this.setCurrentPanRegion(panRegion, this.rotateFlipColl[i]);\n        }\n        return panRegion;\n    };\n    ImageEditor.prototype.drawPannImage = function (point) {\n        var destPoints = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.updateCurrentTransformedState('initial');\n        this.destLeft = destPoints.startX;\n        this.destTop = destPoints.startY;\n        this.destWidth = destPoints.width;\n        this.destHeight = destPoints.height;\n        this.setDestPointsForFlipState();\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        if ((!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle') || this.isCircleCrop) {\n            this.cropCircle(this.lowerContext, null, true);\n        }\n        this.updateCurrentTransformedState('reverse');\n        this.destLeft = destPoints.startX;\n        this.destTop = destPoints.startY;\n        this.destWidth = destPoints.width;\n        this.destHeight = destPoints.height;\n        this.lowerContext.filter = 'none';\n        this.panObjColl(point.x, point.y, '');\n        this.panFreehandDrawColl(point.x, point.y, '');\n        if (this.isCircleCrop) {\n            this.cropCircle(this.lowerContext, null, true);\n        }\n    };\n    ImageEditor.prototype.drawPannedImage = function (xDiff, yDiff) {\n        var panEventArgs = { startPoint: this.panDown, endPoint: this.panMove };\n        this.trigger('panning', panEventArgs);\n        var isObjCreated = false;\n        if (isNullOrUndefined(this.activeObj.shape)) {\n            isObjCreated = true;\n            this.activeObj.activePoint = { startX: this.destLeft, startY: this.destTop,\n                endX: this.destLeft + this.destWidth, endY: this.destTop + this.destHeight };\n            if (this.activeObj.activePoint.startX < 0) {\n                this.activeObj.activePoint.startX = 0;\n            }\n            if (this.activeObj.activePoint.startY < 0) {\n                this.activeObj.activePoint.startY = 0;\n            }\n            if (this.activeObj.activePoint.endX > this.lowerCanvas.width) {\n                this.activeObj.activePoint.endX = this.lowerCanvas.width;\n            }\n            if (this.activeObj.activePoint.endY > this.lowerCanvas.height) {\n                this.activeObj.activePoint.endY = this.lowerCanvas.height;\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            this.activeObj.shape = 'crop-custom';\n            this.activeObj.strokeSettings = this.strokeSettings;\n            this.updateActiveObject(this.activeObj.activePoint, this.activeObj);\n            this.isCropTab = true;\n        }\n        if (this.degree === 0) {\n            var point = void 0;\n            if (isNullOrUndefined(xDiff) && isNullOrUndefined(yDiff)) {\n                point = this.updatePanPoints('');\n            }\n            else {\n                point = { x: xDiff, y: yDiff };\n            }\n            this.totalPannedPoint.x += point.x;\n            this.totalPannedPoint.y += point.y;\n            var tempSelectionObj = extend({}, this.activeObj, {}, true);\n            var temp = this.lowerContext.filter;\n            this.drawPannImage(point);\n            this.lowerContext.filter = temp;\n            this.tempPanMove = extend({}, this.panMove, {}, true);\n            this.activeObj = extend({}, tempSelectionObj, {}, true);\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            if (!isNullOrUndefined(this.activeObj.shape)) {\n                this.drawObject('duplicate', this.activeObj);\n            }\n        }\n        else {\n            var tempFlipState = this.currFlipState;\n            this.isCropTab = true;\n            if (isNullOrUndefined(xDiff) && isNullOrUndefined(yDiff)) {\n                this.currentPannedPoint = this.updatePanPoints('');\n            }\n            else {\n                this.currentPannedPoint = { x: xDiff, y: yDiff };\n            }\n            this.currFlipState = tempFlipState;\n            this.rotatePan();\n            this.isCropTab = false;\n            this.tempPanMove = extend({}, this.panMove, {}, true);\n        }\n        if (isObjCreated) {\n            this.refreshActiveObj();\n            this.isCropTab = false;\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        }\n    };\n    ImageEditor.prototype.updateFlipPan = function (tempSelectionObj) {\n        if (this.currFlipState !== '') {\n            var temp = this.lowerContext.filter;\n            this.refreshActiveObj();\n            this.rotatedFlip();\n            this.lowerContext.filter = 'none';\n            this.freehandRedraw(this.lowerContext);\n            this.lowerContext.filter = temp;\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            if (!isNullOrUndefined(tempSelectionObj)) {\n                this.drawObject('duplicate', tempSelectionObj);\n            }\n        }\n    };\n    ImageEditor.prototype.updateFlipActiveObj = function (panRegion) {\n        if (panRegion === 'horizontal') {\n            if (this.activeObj.activePoint.startX > this.lowerCanvas.width / 2) {\n                this.activeObj.activePoint.endX = (this.lowerCanvas.width / 2) -\n                    (this.activeObj.activePoint.startX - (this.lowerCanvas.width / 2));\n            }\n            else {\n                this.activeObj.activePoint.endX = (this.lowerCanvas.width / 2) + ((this.lowerCanvas.width / 2) -\n                    this.activeObj.activePoint.startX);\n            }\n            this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - this.activeObj.activePoint.width;\n        }\n        else if (panRegion === 'vertical') {\n            if (this.activeObj.activePoint.startX > this.lowerCanvas.width / 2) {\n                this.activeObj.activePoint.endY = (this.lowerCanvas.height / 2) -\n                    (this.activeObj.activePoint.startY - (this.lowerCanvas.height / 2));\n            }\n            else {\n                this.activeObj.activePoint.endY = (this.lowerCanvas.height / 2) +\n                    ((this.lowerCanvas.height / 2) - this.activeObj.activePoint.startY);\n            }\n            this.activeObj.activePoint.startY = this.activeObj.activePoint.endY - this.activeObj.activePoint.height;\n        }\n        else if (panRegion === 'verticalHorizontal' || panRegion === 'horizontalVertical') {\n            if (this.activeObj.activePoint.startX > this.lowerCanvas.width / 2) {\n                this.activeObj.activePoint.endX = (this.lowerCanvas.width / 2) -\n                    (this.activeObj.activePoint.startX - (this.lowerCanvas.width / 2));\n                this.activeObj.activePoint.endY = (this.lowerCanvas.height / 2) -\n                    (this.activeObj.activePoint.startY - (this.lowerCanvas.height / 2));\n            }\n            else {\n                this.activeObj.activePoint.endX = (this.lowerCanvas.width / 2) + ((this.lowerCanvas.width / 2) -\n                    this.activeObj.activePoint.startX);\n                this.activeObj.activePoint.endY = (this.lowerCanvas.height / 2) +\n                    ((this.lowerCanvas.height / 2) - this.activeObj.activePoint.startY);\n            }\n            this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - this.activeObj.activePoint.width;\n            this.activeObj.activePoint.startY = this.activeObj.activePoint.endY - this.activeObj.activePoint.height;\n        }\n        this.updateActiveObject(this.activeObj.activePoint, this.activeObj);\n    };\n    ImageEditor.prototype.resetPanPoints = function () {\n        this.totalPannedPoint = { x: 0, y: 0 };\n        this.totalPannedClientPoint = { x: 0, y: 0 };\n        this.totalPannedInternalPoint = { x: 0, y: 0 };\n    };\n    ImageEditor.prototype.flipCrop = function () {\n        this.isReverseFlip = true;\n        this.totalPannedPoint.x += this.tempFlipPanPoint.x;\n        this.totalPannedPoint.y += this.tempFlipPanPoint.y;\n        var tempCurrFlipState = this.currFlipState;\n        var tempFlipColl = this.flipColl;\n        this.flipColl = [];\n        this.updateImageRatioForActObj();\n        this.objColl.push(this.activeObj);\n        if (this.zoomFactor > 0) {\n            var zoomFactor = this.zoomFactor;\n            var isUndoRedo = this.isUndoRedo;\n            for (var i = 0; i < (zoomFactor * 10); i++) {\n                this.isUndoRedo = true;\n                this.zoom(-0.1);\n            }\n            this.isUndoRedo = isUndoRedo;\n            this.resetPanPoints();\n        }\n        this.currSelectionPoint = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        var temp = this.lowerContext.filter;\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        for (var i = 0; i < this.objColl.length; i++) {\n            this.objColl[i].shapeFlip = '';\n        }\n        for (var i = 0; i < this.freehandCounter; i++) {\n            this.pointColl[i].shapeFlip = '';\n        }\n        this.redrawObj(this.getCurrentPanRegion());\n        this.flipFreehandrawColl(this.getCurrentPanRegion());\n        this.activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n        this.objColl.pop();\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.drawObject('duplicate');\n        this.cropImg(true);\n        this.isReverseRotate = true;\n        this.reverseTransformedState();\n        this.setDestinationPoints();\n        this.currentTransformedState('initial');\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.lowerContext.filter = temp;\n        this.isRotateZoom = false;\n        this.updateCurrentTransformedState('reverse');\n        this.currFlipState = tempCurrFlipState;\n        this.flipColl = tempFlipColl;\n        this.lowerContext.filter = 'none';\n        for (var i = 0; i < this.objColl.length; i++) {\n            this.objColl[i].shapeFlip = '';\n        }\n        for (var i = 0; i < this.freehandCounter; i++) {\n            this.pointColl[i].shapeFlip = '';\n        }\n        this.redrawObj(this.getCurrentPanRegion());\n        this.flipFreehandrawColl(this.getCurrentPanRegion());\n        this.zoomObjColl();\n        this.zoomFreehandDrawColl();\n        this.lowerContext.filter = temp;\n        if ((!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle') || this.isCircleCrop) {\n            this.cropCircle(this.lowerContext);\n        }\n        this.refreshActiveObj();\n        this.clearOuterCanvas(this.lowerContext);\n        this.clearOuterCanvas(this.upperContext);\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.isReverseFlip = false;\n        this.resetPanPoints();\n        this.tempFlipPanPoint = { x: 0, y: 0 };\n    };\n    ImageEditor.prototype.rotateCrop = function () {\n        var shape = '';\n        if (!isNullOrUndefined(this.activeObj.shape)) {\n            shape = this.activeObj.shape;\n        }\n        var tempDegree = this.degree;\n        if (this.degree % 90 === 0 && this.degree % 180 !== 0) {\n            this.rotatedDestPoints.startX = this.destLeft;\n            this.rotatedDestPoints.startY = this.destTop;\n            this.rotatedDestPoints.width = this.destWidth;\n            this.rotatedDestPoints.height = this.destHeight;\n            this.rotatedDestPoints.startX -= this.totalPannedClientPoint.x;\n            this.rotatedDestPoints.startY -= this.totalPannedClientPoint.y;\n        }\n        this.updateImageRatioForActObj();\n        this.currSelectionPoint = extend({}, this.activeObj, {}, true);\n        this.objColl.push(this.activeObj);\n        this.activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n        this.reverseTransformedState();\n        this.setClientTransformedDimension();\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        var temp = this.lowerContext.filter;\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.lowerContext.filter = temp;\n        var length = 0;\n        if (tempDegree === 90 || tempDegree === -270) {\n            length = 3;\n        }\n        else if (tempDegree === 180 || tempDegree === -180) {\n            length = 2;\n        }\n        else if (tempDegree === 270 || tempDegree === -90) {\n            length = 1;\n        }\n        for (var i = 0; i < length; i++) {\n            this.rotateObjColl();\n            this.rotateFreehandDrawColl();\n        }\n        var activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n        if (this.currFlipState !== '') {\n            for (var i = 0; i < this.objColl.length; i++) {\n                this.objColl[i].shapeFlip = '';\n            }\n            for (var i = 0; i < this.freehandCounter; i++) {\n                this.pointColl[i].shapeFlip = '';\n            }\n            var flipState = this.getCurrentCropState('initial');\n            this.redrawObj(flipState);\n            this.flipFreehandrawColl(flipState);\n        }\n        this.zoomObjColl();\n        this.zoomFreehandDrawColl();\n        activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.drawObject('duplicate', activeObj);\n        this.objColl.pop();\n        this.degree = 0;\n        this.cropImg(true);\n        this.isReverseRotate = true;\n        this.reverseTransformedState();\n        this.degree = tempDegree;\n        this.setDestinationPoints();\n        this.currentTransformedState('initial');\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.lowerContext.filter = temp;\n        this.currentTransformedState('reverse');\n        length = 0;\n        if (tempDegree === 90 || tempDegree === -270) {\n            length = 1;\n        }\n        else if (tempDegree === 180 || tempDegree === -180) {\n            length = 2;\n        }\n        else if (tempDegree === 270 || tempDegree === -90) {\n            length = 3;\n        }\n        for (var i = 0; i < length; i++) {\n            this.rotateObjColl();\n            this.rotateFreehandDrawColl();\n        }\n        if (this.getCurrentPanRegion() !== '') {\n            for (var i = 0; i < this.objColl.length; i++) {\n                this.objColl[i].shapeFlip = '';\n            }\n            for (var i = 0; i < this.freehandCounter; i++) {\n                this.pointColl[i].shapeFlip = '';\n            }\n            var flipState = this.getCurrentCropState('reverse');\n            this.redrawObj(flipState);\n            this.flipFreehandrawColl(flipState);\n        }\n        this.isReverseRotate = false;\n        if (shape === 'crop-circle') {\n            this.cropCircle(this.lowerContext);\n        }\n        this.lowerContext.filter = 'none';\n        for (var i = 0; i < this.objColl.length; i++) {\n            if (this.isObjInsideCropRegion(this.objColl[i])) {\n                this.apply(this.objColl[i].shape, this.objColl[i]);\n                this.refreshActiveObj();\n            }\n        }\n        this.zoomFreehandDrawColl();\n        this.lowerContext.filter = temp;\n        this.clearOuterCanvas(this.lowerContext);\n        this.clearOuterCanvas(this.upperContext);\n        if (shape === 'crop-circle') {\n            this.cropCircle(this.lowerContext);\n        }\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.resetPanPoints();\n    };\n    ImageEditor.prototype.getCurrentCropState = function (type, isAllowInvert) {\n        var flipState = '';\n        var state = [];\n        if (type === 'initial') {\n            if (this.degree === 180 || this.degree === -180) {\n                flipState = this.flipColl.length > 1 ? this.getCurrentPanRegion() : this.currFlipState;\n            }\n            else {\n                for (var i = 0; i < this.rotateFlipColl.length; i++) {\n                    if (typeof (this.rotateFlipColl[i]) === 'number') {\n                        state.push('number');\n                    }\n                    else if (typeof (this.rotateFlipColl[i]) === 'string') {\n                        state.push('string');\n                    }\n                }\n                if (state.length > 1 && state[state.length - 1] === 'string' && state[state.length - 2] === 'number') {\n                    if (this.currFlipState === 'horizontal') {\n                        flipState = 'vertical';\n                    }\n                    else if (this.currFlipState === 'vertical') {\n                        flipState = 'horizontal';\n                    }\n                }\n                else if (state.length > 1 && state[state.length - 1] === 'number' && state[state.length - 2] === 'string') {\n                    flipState = this.flipColl.length > 1 ? this.getCurrentPanRegion() : this.currFlipState;\n                }\n            }\n        }\n        else {\n            flipState = this.getCurrentPanRegion();\n            if (isAllowInvert || !this.isInitialRotate()) {\n                if (this.degree === -90 || this.degree === -270) {\n                    if (flipState === 'horizontal') {\n                        flipState = 'vertical';\n                    }\n                    else if (flipState === 'vertical') {\n                        flipState = 'horizontal';\n                    }\n                }\n            }\n        }\n        if (flipState === '') {\n            flipState = this.flipColl.length > 1 ? this.getCurrentPanRegion() : this.currFlipState;\n        }\n        return flipState;\n    };\n    ImageEditor.prototype.isInitialRotate = function () {\n        var isRotate = false;\n        if (this.rotateFlipColl.length > 0 && typeof (this.rotateFlipColl[0]) === 'number') {\n            isRotate = true;\n        }\n        return isRotate;\n    };\n    ImageEditor.prototype.updateRotatePanPoints = function () {\n        var panRegion = '';\n        if (this.isInitialRotate() && this.degree < 0) {\n            panRegion = this.getCurrentCropState('reverse', true);\n        }\n        else {\n            panRegion = this.getCurrentPanRegion();\n        }\n        if (this.degree % 90 === 0 && this.degree % 180 !== 0) {\n            if (this.degree === 90 || (this.degree === -90 && (panRegion === 'horizontal' || panRegion === 'vertical'))\n                || (this.degree === -270 && (panRegion === '' || panRegion === 'verticalHorizontal' || panRegion === 'horizontalVertical'))) {\n                if (panRegion === '') {\n                    this.destLeft += this.currentPannedPoint.y;\n                    this.destTop -= this.currentPannedPoint.x;\n                }\n                else if (panRegion === 'horizontal') {\n                    this.destLeft += this.currentPannedPoint.y;\n                    this.destTop += this.currentPannedPoint.x;\n                }\n                else if (panRegion === 'vertical') {\n                    this.destLeft -= this.currentPannedPoint.y;\n                    this.destTop -= this.currentPannedPoint.x;\n                }\n                else {\n                    this.destLeft -= this.currentPannedPoint.y;\n                    this.destTop += this.currentPannedPoint.x;\n                }\n            }\n            else if (this.degree === 270 || (this.degree === -270 && (panRegion === 'horizontal' || panRegion === 'vertical'))\n                || (this.degree === -90 && (panRegion === '' || panRegion === 'verticalHorizontal' || panRegion === 'horizontalVertical'))) {\n                if (panRegion === '') {\n                    this.destLeft -= this.currentPannedPoint.y;\n                    this.destTop += this.currentPannedPoint.x;\n                }\n                else if (panRegion === 'horizontal') {\n                    this.destLeft -= this.currentPannedPoint.y;\n                    this.destTop -= this.currentPannedPoint.x;\n                }\n                else if (panRegion === 'vertical') {\n                    this.destLeft += this.currentPannedPoint.y;\n                    this.destTop += this.currentPannedPoint.x;\n                }\n                else {\n                    this.destLeft += this.currentPannedPoint.y;\n                    this.destTop -= this.currentPannedPoint.x;\n                }\n            }\n        }\n        else {\n            if (this.degree === 180 || this.degree === -180) {\n                if (panRegion === '') {\n                    this.destLeft -= this.currentPannedPoint.x;\n                    this.destTop -= this.currentPannedPoint.y;\n                }\n                else if (panRegion === 'horizontal') {\n                    this.destLeft += this.currentPannedPoint.x;\n                    this.destTop -= this.currentPannedPoint.y;\n                }\n                else if (panRegion === 'vertical') {\n                    this.destLeft -= this.currentPannedPoint.x;\n                    this.destTop += this.currentPannedPoint.y;\n                }\n                else {\n                    this.destLeft += this.currentPannedPoint.x;\n                    this.destTop += this.currentPannedPoint.y;\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.rotatePan = function (isCropSelection, isDefaultZoom) {\n        this.isReverseRotate = true;\n        var tempDegree = this.degree;\n        var rotatePanActiveObj;\n        if (!isNullOrUndefined(this.activeObj.activePoint) && !isNullOrUndefined(this.activeObj.shape)) {\n            rotatePanActiveObj = extend({}, this.activeObj, {}, true);\n        }\n        var tempObjColl = extend([], this.objColl, [], true);\n        var tempPointColl = extend([], this.pointColl, [], true);\n        this.objColl = [];\n        this.pointColl = [];\n        this.freehandCounter = 0;\n        this.refreshActiveObj();\n        this.isRotateZoom = true;\n        this.updateCurrentTransformedState('initial');\n        var initialDestLeft = this.destLeft;\n        var initialDestTop = this.destTop;\n        if (this.isCropTab) {\n            this.destLeft += this.totalPannedInternalPoint.x;\n            this.destTop += this.totalPannedInternalPoint.y;\n        }\n        this.updateRotatePanPoints();\n        if (this.isCropTab) {\n            this.totalPannedInternalPoint.x = this.destLeft - initialDestLeft;\n            this.totalPannedInternalPoint.y = this.destTop - initialDestTop;\n        }\n        var temp = this.lowerContext.filter;\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.isRotateZoom = false;\n        this.updateCurrentTransformedState('reverse', true, true);\n        var destLeft = this.destLeft;\n        var destTop = this.destTop;\n        this.destLeft += this.totalPannedClientPoint.x;\n        this.destTop += this.totalPannedClientPoint.y;\n        this.destLeft += this.currentPannedPoint.x;\n        this.destTop += this.currentPannedPoint.y;\n        this.totalPannedClientPoint.x = this.destLeft - destLeft;\n        this.totalPannedClientPoint.y = this.destTop - destTop;\n        this.objColl = tempObjColl;\n        this.pointColl = tempPointColl;\n        this.freehandCounter = this.pointColl.length;\n        this.degree = tempDegree;\n        this.lowerContext.filter = 'none';\n        if (isCropSelection) {\n            if (isDefaultZoom) {\n                this.totalPannedClientPoint.x = -this.totalPannedClientPoint.x;\n                this.totalPannedClientPoint.y = -this.totalPannedClientPoint.y;\n                this.currentPannedPoint = extend({}, this.totalPannedClientPoint, {}, true);\n                this.totalPannedClientPoint = { x: 0, y: 0 };\n                this.destLeft += this.currentPannedPoint.x;\n                this.destTop += this.currentPannedPoint.y;\n            }\n            else {\n                this.currentPannedPoint = extend({}, this.totalPannedClientPoint, {}, true);\n            }\n        }\n        this.panObjColl(this.currentPannedPoint.x, this.currentPannedPoint.y, '');\n        this.panFreehandDrawColl(this.currentPannedPoint.x, this.currentPannedPoint.y, '');\n        this.lowerContext.filter = temp;\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        this.activeObj = extend({}, rotatePanActiveObj, {}, true);\n        if (!isNullOrUndefined(this.activeObj.activePoint)) {\n            this.drawObject('duplicate', this.activeObj, null, null, true);\n        }\n        this.isReverseRotate = false;\n    };\n    ImageEditor.prototype.rotateZoom = function (value) {\n        var powerOften = Math.pow(10, 1);\n        if ((Math.round(this.zoomFactor * powerOften) / powerOften) === 0.1 && value === -0.1) {\n            this.zoomFactor = 0;\n        }\n        else {\n            this.zoomFactor += value;\n        }\n        if (this.isCropTab) {\n            this.cropZoomFactor = this.zoomFactor;\n        }\n        else {\n            this.defaultZoomFactor = this.zoomFactor;\n        }\n        var tempObjColl = extend([], this.objColl, [], true);\n        var tempActiveObj = extend({}, this.activeObj, {}, true);\n        this.objColl = [];\n        this.refreshActiveObj();\n        this.updateCurrentTransformedState('initial');\n        this.isRotateZoom = true;\n        this.setDestinationPoints();\n        var temp = this.lowerContext.filter;\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.lowerContext.filter = temp;\n        this.isRotateZoom = false;\n        this.updateCurrentTransformedState('reverse');\n        this.objColl = tempObjColl;\n        this.activeObj = tempActiveObj;\n    };\n    ImageEditor.prototype.drawZoomImgToCanvas = function (value, selectionObj) {\n        var powerOften = Math.pow(10, 1);\n        if ((Math.round(this.zoomFactor * powerOften) / powerOften) === 0.1 && value === -0.1) {\n            this.zoomFactor = 0;\n        }\n        else {\n            this.zoomFactor += value;\n        }\n        if (this.isCropTab) {\n            this.cropZoomFactor = this.zoomFactor;\n        }\n        else {\n            this.defaultZoomFactor = this.zoomFactor;\n        }\n        var maxDimension = { width: 0, height: 0 };\n        if (this.isCropTab) {\n            maxDimension = this.cropZoom(value, selectionObj);\n        }\n        else {\n            maxDimension = this.calcMaxDimension(this.srcWidth, this.srcHeight);\n            maxDimension.width += (maxDimension.width * this.zoomFactor);\n            maxDimension.height += (maxDimension.height * this.zoomFactor);\n            this.destLeft = (this.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            this.destTop = (this.lowerCanvas.clientHeight - maxDimension.height) / 2;\n        }\n        this.drawImgToCanvas(maxDimension);\n    };\n    ImageEditor.prototype.cropZoom = function (value, selectionObj) {\n        var destLeft = this.destLeft;\n        var destTop = this.destTop;\n        var maxDimension = { width: 0, height: 0 };\n        if (this.srcLeft === 0 || this.srcTop === 0) {\n            if (isNullOrUndefined(selectionObj)) {\n                maxDimension = this.setZoomDimension(value, null);\n            }\n            else {\n                maxDimension = this.setZoomDimension(value, selectionObj);\n            }\n        }\n        else {\n            if (this.degree % 90 === 0 && this.degree % 180 !== 0) {\n                maxDimension = this.calcMaxDimension(this.srcHeight, this.srcWidth);\n            }\n            else {\n                maxDimension = this.calcMaxDimension(this.srcWidth, this.srcHeight);\n            }\n            maxDimension.width += (maxDimension.width * this.zoomFactor);\n            maxDimension.height += (maxDimension.height * this.zoomFactor);\n        }\n        this.destLeft = destLeft - ((maxDimension.width - this.destWidth) / 2);\n        this.destTop = destTop - ((maxDimension.height - this.destHeight) / 2);\n        destLeft = this.destLeft;\n        destTop = this.destTop;\n        if (!isNullOrUndefined(selectionObj)) {\n            if (this.destLeft > selectionObj.activePoint.startX) {\n                this.destLeft = selectionObj.activePoint.startX;\n                if (this.degree === 0) {\n                    this.totalPannedPoint.x -= (destLeft - this.destLeft);\n                }\n            }\n            if (this.destTop > selectionObj.activePoint.startY) {\n                this.destTop = selectionObj.activePoint.startY;\n                if (this.degree === 0) {\n                    this.totalPannedPoint.y -= (destTop - this.destTop);\n                }\n            }\n            if (this.destLeft + maxDimension.width < selectionObj.activePoint.endX) {\n                this.destLeft = selectionObj.activePoint.endX - maxDimension.width;\n                if (this.degree === 0) {\n                    this.totalPannedPoint.x -= (destLeft - this.destLeft);\n                }\n            }\n            if (this.destTop + maxDimension.height < selectionObj.activePoint.endY) {\n                this.destTop = selectionObj.activePoint.endY - maxDimension.height;\n                if (this.degree === 0) {\n                    this.totalPannedPoint.y -= (destTop - this.destTop);\n                }\n            }\n        }\n        return maxDimension;\n    };\n    ImageEditor.prototype.updateCanvas = function () {\n        var fileOpened = { fileName: this.fileName, fileType: this.fileType };\n        this.srcWidth = this.baseImg.width;\n        this.srcHeight = this.baseImg.height;\n        var maxDimension = this.calcMaxDimension(this.srcWidth, this.srcHeight);\n        this.destLeft = (this.lowerCanvas.clientWidth - maxDimension.width) / 2;\n        this.destTop = (this.lowerCanvas.clientHeight - maxDimension.height) / 2;\n        this.drawImgToCanvas(maxDimension);\n        this.cropDestPoints = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n        var temp = this.lowerContext.filter;\n        this.lowerContext.filter = 'none';\n        this.iterateObjColl();\n        this.zoomFreehandDrawColl();\n        this.lowerContext.filter = temp;\n        if (this.destWidth > 0 && this.destHeight > 0) {\n            this.isImageLoaded = true;\n        }\n        if (this.isUndoRedo) {\n            if (this.currFlipState !== '') {\n                this.flip(this.toPascalCase(this.currFlipState));\n            }\n        }\n        if (this.disabled) {\n            this.element.setAttribute('class', 'e-disabled');\n        }\n        this.trigger('fileOpened', fileOpened);\n    };\n    ImageEditor.prototype.imageOnLoad = function (src) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        proxy.baseImg.src = src;\n        this.baseImg.onload = function () {\n            _this.lowerContext.drawImage(_this.baseImg, 0, 0, _this.lowerCanvas.width, _this.lowerCanvas.height);\n            hideSpinner(_this.element);\n            _this.element.style.opacity = '1';\n            _this.updateCanvas();\n            if (_this.currObjType.isUndoZoom) {\n                _this.currObjType.isUndoZoom = false;\n                _this.lowerCanvas.style.display = 'block';\n            }\n            _this.isUndoRedo = false;\n            if (Browser.isDevice) {\n                if (_this.isToolbar() && (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar'))) &&\n                    (!isNullOrUndefined(getComponent(document.getElementById(_this.element.id + '_toolbar'), 'toolbar')))) {\n                    getComponent(document.getElementById(_this.element.id + '_toolbar'), 'toolbar').destroy();\n                }\n                if (!isNullOrUndefined(document.getElementById(_this.element.id + '_bottomToolbar')) &&\n                    (!isNullOrUndefined(getComponent(document.getElementById(_this.element.id + '_bottomToolbar'), 'toolbar')))) {\n                    getComponent(document.getElementById(_this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                }\n                _this.initToolbarItem(false, Browser.isDevice, null);\n                _this.createBottomToolbar();\n            }\n            else {\n                if (_this.isToolbar() && (!isNullOrUndefined(document.getElementById(_this.element.id + '_toolbar'))) &&\n                    (!isNullOrUndefined(getComponent(document.getElementById(_this.element.id + '_toolbar'), 'toolbar')))) {\n                    getComponent(document.getElementById(_this.element.id + '_toolbar'), 'toolbar').destroy();\n                }\n                _this.initToolbarItem(false, false, null);\n            }\n        };\n    };\n    ImageEditor.prototype.refreshActiveObj = function () {\n        this.activeObj = {};\n        this.activeObj.activePoint = { startX: 0, startY: 0, endX: 0, endY: 0, width: 0, height: 0 };\n        this.activeObj.flipObjColl = [];\n        this.activeObj.strokeSettings = this.strokeSettings;\n        this.activeObj.textSettings = this.textSettings;\n    };\n    ImageEditor.prototype.redrawText = function () {\n        if (this.activeObj.textSettings.bold) {\n            this.upperContext.font = 'bold ' + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n        }\n        if (this.activeObj.textSettings.italic) {\n            this.upperContext.font = 'bold ' + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n        }\n        if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n            this.upperContext.font = 'italic bold ' + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n        }\n        if (!this.activeObj.textSettings.bold && !this.activeObj.textSettings.italic) {\n            this.upperContext.font = this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n        }\n        var rows = this.activeObj.keyHistory.split('\\n');\n        var text = this.textArea.style.display === 'block' ? this.getMaxText(true) : this.getMaxText();\n        var width = this.upperContext.measureText(text).width + this.activeObj.textSettings.fontSize * 0.5;\n        var height = rows.length * (this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25);\n        this.setTextSelection(width, height);\n        this.updateActiveObject(this.activeObj.activePoint, this.activeObj);\n        this.redrawShape(this.activeObj);\n    };\n    ImageEditor.prototype.setTextSelection = function (width, height) {\n        var degree = this.degree;\n        if (this.activeObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - this.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        for (var i = 0; i < this.activeObj.flipObjColl.length; i++) {\n            if (degree === 0) {\n                if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.endX - width,\n                        startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.endX),\n                        endY: this.activeObj.activePoint.startY + (height ? height : 0) };\n                }\n                else if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.startX + (width ? width : 0)),\n                        endY: this.activeObj.activePoint.endY };\n                }\n                else {\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.startX + (width ? width : 0)),\n                        endY: this.activeObj.activePoint.startY + (height ? height : 0) };\n                }\n            }\n            else if (degree === 90) {\n                if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.endY - width,\n                        endX: (this.activeObj.activePoint.endX),\n                        endY: this.activeObj.activePoint.endY };\n                }\n                else if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.endX),\n                        endY: this.activeObj.activePoint.startY + (width ? width : 0) };\n                }\n                else {\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.endX),\n                        endY: this.activeObj.activePoint.startY + (width ? width : 0) };\n                }\n            }\n            else if (degree === 180) {\n                if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.startX + width),\n                        endY: this.activeObj.activePoint.endY };\n                }\n                else if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + height;\n                    this.activeObj.activePoint = { endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY,\n                        startX: (this.activeObj.activePoint.endX - (width ? width : 0)),\n                        startY: this.activeObj.activePoint.startY };\n                }\n                else {\n                    this.activeObj.activePoint = { endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY,\n                        startX: (this.activeObj.activePoint.endX - (width ? width : 0)),\n                        startY: this.activeObj.activePoint.endY - (height ? height : 0) };\n                }\n            }\n            else if (degree === 270) {\n                if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.startY,\n                        endX: (this.activeObj.activePoint.startX + height),\n                        endY: this.activeObj.activePoint.startY + (width ? width : 0) };\n                }\n                else if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.endY - (width ? width : 0),\n                        endX: this.activeObj.activePoint.endX,\n                        endY: this.activeObj.activePoint.endY };\n                }\n                else {\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + height;\n                    this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                        startY: this.activeObj.activePoint.endY - (width ? width : 0),\n                        endX: this.activeObj.activePoint.endX,\n                        endY: this.activeObj.activePoint.endY };\n                }\n            }\n        }\n        if (this.activeObj.flipObjColl.length === 0) {\n            if (degree === 0) {\n                this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                    endX: (this.activeObj.activePoint.startX + (width ? width : 0)),\n                    endY: this.activeObj.activePoint.startY + (height ? height : 0) };\n            }\n            else if (degree === 90) {\n                this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - height;\n                this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n                    endX: (this.activeObj.activePoint.endX),\n                    endY: this.activeObj.activePoint.startY + (width ? width : 0) };\n            }\n            else if (degree === 180) {\n                this.activeObj.activePoint = { endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY,\n                    startX: (this.activeObj.activePoint.endX - (width ? width : 0)),\n                    startY: this.activeObj.activePoint.endY - (height ? height : 0) };\n            }\n            else if (degree === 270) {\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + height;\n                this.activeObj.activePoint = { startX: this.activeObj.activePoint.startX,\n                    startY: this.activeObj.activePoint.endY - (width ? width : 0),\n                    endX: this.activeObj.activePoint.endX,\n                    endY: this.activeObj.activePoint.endY };\n            }\n        }\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        if (this.degree === 360 || this.degree === -360) {\n            this.degree = 0;\n        }\n    };\n    ImageEditor.prototype.getCurrentObj = function () {\n        var obj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n            totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {},\n            rotateFlipColl: [], degree: 0, currFlipState: '',\n            destPoints: { startX: 0, startY: 0, width: 0, height: 0 },\n            srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '' };\n        obj.cropZoom = this.cropZoomFactor;\n        obj.defaultZoom = this.defaultZoomFactor;\n        obj.totalPannedPoint = extend({}, this.totalPannedPoint, {}, true);\n        obj.totalPannedClientPoint = extend({}, this.totalPannedClientPoint, {}, true);\n        obj.totalPannedInternalPoint = extend({}, this.totalPannedInternalPoint, {}, true);\n        obj.tempFlipPanPoint = extend({}, this.tempFlipPanPoint, {}, true);\n        obj.activeObj = extend({}, this.activeObj, {}, true);\n        obj.rotateFlipColl = extend([], this.rotateFlipColl, [], true);\n        obj.degree = this.degree;\n        obj.currFlipState = this.currFlipState;\n        obj.destPoints = { startX: this.destLeft, startY: this.destTop, endX: 0, endY: 0,\n            width: this.destWidth, height: this.destHeight };\n        obj.srcPoints = { startX: this.srcLeft, startY: this.srcTop, endX: 0, endY: 0,\n            width: this.srcWidth, height: this.srcHeight };\n        obj.filter = this.lowerContext.filter;\n        return obj;\n    };\n    ImageEditor.prototype.updateUndoRedoColl = function (operation, previousObj, previousObjColl, previousPointColl, previousCropObj, previousText, currentText, previousFilter) {\n        if (!this.isInitialLoading && this.allowUndoRedo) {\n            if (this.currObjType.isUndoAction) {\n                this.refreshUndoRedoColl();\n            }\n            this.undoRedoStep++;\n            var currentObj = this.getCurrentObj();\n            currentObj.objColl = extend([], this.objColl, [], true);\n            currentObj.pointColl = extend([], this.pointColl, [], true);\n            currentObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            this.undoRedoColl.push({ operation: operation, previousObj: previousObj, currentObj: currentObj,\n                previousObjColl: previousObjColl, currentObjColl: currentObj.objColl,\n                previousPointColl: previousPointColl, currentPointColl: currentObj.pointColl,\n                previousCropObj: previousCropObj, currentCropObj: extend({}, this.cropObj, {}, true),\n                previousText: previousText, currentText: currentText, filter: previousFilter });\n            if (this.undoRedoColl.length > 16) {\n                this.undoRedoColl.splice(0, 1);\n                this.undoRedoStep--;\n            }\n            this.enableDisableToolbarBtn();\n        }\n    };\n    ImageEditor.prototype.fileSelect = function (inputElement, args) {\n        showSpinner(this.element);\n        this.element.style.opacity = '0.5';\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var filesData = args.target.files[0];\n        if (this.isImageLoaded) {\n            this.isImageLoaded = false;\n            this.reset();\n        }\n        if (isNullOrUndefined(this.toolbarTemplate)) {\n            this.reset();\n            this.update();\n        }\n        this.fileName = inputElement.value.split('\\\\')[inputElement.value.split('\\\\').length - 1];\n        this.fileName = this.fileName.split('.')[0];\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        var URL = window.URL;\n        var url = URL.createObjectURL(filesData);\n        this.imageOnLoad(url.toString());\n        inputElement.value = '';\n    };\n    ImageEditor.prototype.findTextPoint = function (e) {\n        if (this.activeObj.shape === 'text') {\n            this.textArea.style.transformOrigin = '0 0';\n            var degree = void 0;\n            var scale = '';\n            if (this.activeObj.shapeDegree === 0) {\n                degree = this.degree;\n            }\n            else {\n                degree = this.degree - this.activeObj.shapeDegree;\n            }\n            if (degree < 0) {\n                degree = 360 + degree;\n            }\n            if (this.activeObj.flipObjColl.length > 0) {\n                // need to add scale value according to length.\n                for (var i = 0; i < this.activeObj.flipObjColl.length; i++) {\n                    if (degree !== 0 && degree % 90 === 0 && degree !== 180) {\n                        scale += this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(1, -1)' :\n                            'scale(-1, 1)';\n                    }\n                    else {\n                        scale += this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal' ? 'scale(-1, 1)' :\n                            'scale(1, -1)';\n                    }\n                    if (this.activeObj.flipObjColl[i].toLowerCase() === 'horizontal') {\n                        this.textArea.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                    else if (this.activeObj.flipObjColl[i].toLowerCase() === 'vertical') {\n                        this.textArea.style.transform = 'rotate(' + degree + 'deg)' + scale;\n                    }\n                }\n            }\n            else {\n                this.textArea.style.transform = 'rotate(' + degree + 'deg)';\n            }\n            this.findTextTarget(e);\n        }\n    };\n    ImageEditor.prototype.getStrokeWidth = function (text) {\n        var strokeWidth;\n        var currentWidth = parseInt(text, 10) / 2;\n        switch (currentWidth) {\n            case 1:\n                strokeWidth = this.l10n.getConstant('XSmall');\n                break;\n            case 2:\n                strokeWidth = this.l10n.getConstant('Small');\n                break;\n            case 3:\n                strokeWidth = this.l10n.getConstant('Medium');\n                break;\n            case 4:\n                strokeWidth = this.l10n.getConstant('Large');\n                break;\n            case 5:\n                strokeWidth = this.l10n.getConstant('XLarge');\n                break;\n        }\n        return strokeWidth;\n    };\n    ImageEditor.prototype.updateToolbarItems = function () {\n        var selFillElem = this.element.querySelector('.e-fill.e-template .e-dropdownbtn-preview');\n        var selStrokeElem = this.element.querySelector('.e-stroke.e-template .e-dropdownbtn-preview');\n        var selTextStrokeElem = this.element.querySelector('.e-text-font-color.e-template .e-dropdownbtn-preview');\n        var selPenStrokeElem = this.element.querySelector('.e-pen-stroke-color.e-template .e-dropdownbtn-preview');\n        var strokeWidthElem = this.element.querySelector('.e-shape-stroke-width');\n        var fontFamilyElem = this.element.querySelector('.e-text-font-family');\n        var fontSizeElem = this.element.querySelector('.e-text-font-size');\n        var fontStyleElem = this.element.querySelector('.e-text-font-style');\n        if (selFillElem) {\n            if (this.activeObj.strokeSettings.fillColor === '') {\n                selFillElem.classList.add('e-nocolor-item');\n            }\n            else {\n                selFillElem.classList.remove('e-nocolor-item');\n                selFillElem.style.background = this.activeObj.strokeSettings.fillColor;\n            }\n            getComponent(this.element.id + '_shape_fill', 'colorpicker').value\n                = this.activeObj.strokeSettings.fillColor + 'ff';\n        }\n        if (selStrokeElem) {\n            selStrokeElem.style.background = this.activeObj.strokeSettings.strokeColor;\n            getComponent(this.element.id + '_shape_stroke', 'colorpicker').value\n                = this.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (selTextStrokeElem) {\n            selTextStrokeElem.style.background = this.activeObj.strokeSettings.strokeColor;\n            getComponent(this.element.id + '_text_font', 'colorpicker').value\n                = this.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (selPenStrokeElem) {\n            selPenStrokeElem.style.background = this.activeObj.strokeSettings.strokeColor;\n            getComponent(this.element.id + '_pen_stroke', 'colorpicker').value\n                = this.activeObj.strokeSettings.strokeColor + 'ff';\n        }\n        if (fontFamilyElem) {\n            if (Browser.isDevice) {\n                fontFamilyElem.setAttribute('style', 'font-family:' + this.activeObj.textSettings.fontFamily.toLowerCase());\n            }\n            else {\n                fontFamilyElem.textContent = this.activeObj.textSettings.fontFamily;\n            }\n        }\n        if (fontSizeElem) {\n            for (var i = 0; i < this.fontSizeColl.length; i++) {\n                if (parseInt(this.fontSizeColl[i].text, 10) >= Math.round(this.activeObj.textSettings.fontSize)) {\n                    fontSizeElem.textContent = (i + 1).toString();\n                    break;\n                }\n            }\n        }\n        if (fontStyleElem) {\n            if (Browser.isDevice) {\n                if (!this.activeObj.textSettings.bold && !this.activeObj.textSettings.italic) {\n                    fontStyleElem.setAttribute('style', '');\n                }\n                else if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n                    fontStyleElem.setAttribute('style', 'font-style: italic;font-weight: bold');\n                }\n                else if (this.activeObj.textSettings.bold) {\n                    fontStyleElem.setAttribute('style', 'font-weight: bold');\n                }\n                else {\n                    fontStyleElem.setAttribute('style', 'font-style: italic');\n                }\n            }\n            else {\n                if (!this.activeObj.textSettings.bold && !this.activeObj.textSettings.italic) {\n                    fontStyleElem.textContent = 'Default';\n                }\n                else if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n                    fontStyleElem.textContent = 'Bold Italic';\n                }\n                else if (this.activeObj.textSettings.bold) {\n                    fontStyleElem.textContent = 'Bold';\n                }\n                else {\n                    fontStyleElem.textContent = 'Italic';\n                }\n            }\n        }\n        if (strokeWidthElem) {\n            var strokeWidth = Math.round((this.activeObj.strokeSettings.strokeWidth)).toString();\n            strokeWidthElem.textContent = this.getStrokeWidth(strokeWidth);\n        }\n    };\n    ImageEditor.prototype.setTimer = function (e) {\n        if (!this.isTimer && this.timer > 10) {\n            this.findTextPoint(e);\n            if (Browser.isDevice) {\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            }\n        }\n    };\n    // eslint-disable-next-line\n    ImageEditor.prototype.targetTouches = function (touches) {\n        var p1 = { x: touches[0].pageX, y: touches[0].pageY };\n        var p2 = { x: touches[1].pageX, y: touches[1].pageY };\n        var points = [p1, p2];\n        return points;\n    };\n    ImageEditor.prototype.calculateScale = function (startTouches, endTouches) {\n        var startDistance = this.getDistance(startTouches[0], startTouches[1]);\n        var endDistance = this.getDistance(endTouches[0], endTouches[1]);\n        return endDistance / startDistance;\n    };\n    ImageEditor.prototype.getDistance = function (a, b) {\n        var x = 0;\n        var y = 0;\n        if (!isNullOrUndefined(a) && !isNullOrUndefined(b)) {\n            x = a.x - b.x;\n            y = a.y - b.y;\n        }\n        return Math.sqrt(x * x + y * y);\n    };\n    ImageEditor.prototype.setXYPoints = function (e) {\n        e.preventDefault();\n        var x;\n        var y;\n        if (e.type === 'mousedown') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        var bbox = this.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        return { x: x, y: y };\n    };\n    ImageEditor.prototype.touchStartHandler = function (e) {\n        e.preventDefault();\n        if (e.touches.length === 2) {\n            this.isFirstMove = true;\n        }\n        else {\n            this.timer = setTimeout(this.setTimer.bind(this), 1000, e);\n            this.mouseDownEventHandler(e);\n        }\n        EventHandler.add(this.lowerCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(this.lowerCanvas, 'touchmove', this.mouseMoveEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'touchend', this.mouseUpEventHandler, this);\n        EventHandler.add(this.upperCanvas, 'touchmove', this.mouseMoveEventHandler, this);\n    };\n    ImageEditor.prototype.isShapeTouch = function (e, isCropSelection) {\n        var isShape = false;\n        if (e.type === 'touchstart') {\n            this.redrawActObj();\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            isShape = this.findTargetObj(x, y, isCropSelection);\n        }\n        return isShape;\n    };\n    ImageEditor.prototype.isFreehandDrawTouch = function (e, isCropSelection) {\n        var isFreehandDraw = false;\n        if (e.type === 'touchstart' && !isCropSelection) {\n            this.redrawActObj();\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            this.setCursor(x, y);\n            if (this.isFreehandDrawingPoint) {\n                isFreehandDraw = true;\n            }\n        }\n        return isFreehandDraw;\n    };\n    ImageEditor.prototype.selectFreehandDraw = function (index) {\n        this.isFreehandDrawEditing = true;\n        if (!isNullOrUndefined(index) || index === 0) {\n            if (this.isFreehandDrawIndex(index)) {\n                this.freehandDrawSelectedIndex = this.freehandDrawHoveredIndex = index;\n                this.hoverFreehandraw();\n                this.upperCanvas.style.cursor = 'pointer';\n            }\n            else {\n                return;\n            }\n        }\n        this.freehandDrawSelectedIndex = this.freehandDrawHoveredIndex;\n        this.pointColl[this.freehandDrawSelectedIndex].isSelected = true;\n        this.freehandDrawSelectedId = this.pointColl[this.freehandDrawSelectedIndex].id;\n        if (this.pointColl[this.freehandDrawHoveredIndex].strokeColor !== '#42a5f5') {\n            this.tempFreeHandDrawEditingStyles.strokeColor = this.pointColl[this.freehandDrawHoveredIndex].strokeColor;\n        }\n        this.tempFreeHandDrawEditingStyles.strokeWidth = this.pointColl[this.freehandDrawHoveredIndex].strokeWidth;\n        if (this.isFreehandDrawEditing) {\n            this.refreshToolbar('pen');\n        }\n        else {\n            this.okBtn();\n        }\n    };\n    ImageEditor.prototype.closeContextualToolbar = function () {\n        var isContextualToolbar = false;\n        if ((!isNullOrUndefined(this.element.querySelector('#' + this.element.id + '_contextualToolbar')) &&\n            !this.element.querySelector('#' + this.element.id + '_contextualToolbar').parentElement.classList.contains('e-hide')) ||\n            (!isNullOrUndefined(this.element.querySelector('#' + this.element.id + '_headWrapper'))\n                && !this.element.querySelector('#' + this.element.id + '_headWrapper').parentElement.classList.contains('e-hide'))) {\n            this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            this.okBtn();\n            this.refreshToolbar('main');\n            isContextualToolbar = true;\n        }\n        return isContextualToolbar;\n    };\n    ImageEditor.prototype.mouseDownEventHandler = function (e) {\n        if (e.type === 'touchstart') {\n            this.isTouch = true;\n        }\n        if (e.type === 'touchstart' && e.currentTarget === this.lowerCanvas && !this.isImageLoaded) {\n            return;\n        }\n        var isCropSelection = false;\n        var splitWords;\n        var isPan = true;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isCropSelection) {\n            this.dragCanvas = this.togglePan = true;\n        }\n        if (isCropSelection && this.dragCanvas) {\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            this.setCursor(x, y);\n            if (this.upperCanvas.style.cursor !== 'move' && this.upperCanvas.style.cursor !== 'crosshair' &&\n                this.upperCanvas.style.cursor !== 'default' && this.upperCanvas.style.cursor !== 'grab') {\n                isPan = false;\n            }\n        }\n        var isShape = this.isShapeTouch(e, isCropSelection);\n        var isFreehandDraw = this.isFreehandDrawTouch(e, isCropSelection);\n        if (!isShape && !this.togglePen && !isCropSelection) {\n            this.refreshToolbar('main');\n            this.closeContextualToolbar();\n        }\n        if (this.dragCanvas && isPan && (this.upperCanvas.style.cursor === 'grab' || this.isTouch)\n            && !isShape && !isFreehandDraw && !this.togglePen) {\n            if (this.isFreehandDrawEditing) {\n                this.applyFreehandDraw();\n            }\n            this.applyShape();\n            this.canvasMouseDownHandler(e);\n        }\n        else {\n            var points = this.setXYPoints(e);\n            var x = points.x;\n            var y = points.y;\n            this.redrawActObj(x, y);\n            if (this.isFreehandDrawingPoint || (this.isFreehandDrawCustomized && !this.togglePen)) {\n                if (!isNullOrUndefined(this.freehandDrawSelectedIndex) &&\n                    this.freehandDrawSelectedIndex !== this.freehandDrawHoveredIndex) {\n                    var tempHoveredIndex = this.freehandDrawHoveredIndex;\n                    this.okBtn();\n                    this.isFreehandDrawCustomized = false;\n                    this.freehandDrawHoveredIndex = tempHoveredIndex;\n                    if (this.freehandDrawHoveredIndex > -1) {\n                        var strokeColor = this.pointColl[this.freehandDrawHoveredIndex].strokeColor === '#fff' ? '#42a5f5' : this.pointColl[this.freehandDrawHoveredIndex].strokeColor;\n                        this.hoverFreehandraw(strokeColor, this.pointColl[this.freehandDrawHoveredIndex].strokeWidth);\n                    }\n                }\n                if (!isNullOrUndefined(this.freehandDrawHoveredIndex) && this.freehandDrawHoveredIndex > -1) {\n                    this.selectFreehandDraw();\n                }\n                else if (this.freehandDrawSelectedIndex) {\n                    this.okBtn();\n                    var strokeColor = this.pointColl[this.freehandDrawSelectedIndex].strokeColor;\n                    this.hoverFreehandraw(strokeColor, this.pointColl[this.freehandDrawSelectedIndex].strokeWidth);\n                }\n            }\n            else {\n                if (this.isFreehandDrawEditing) {\n                    this.cancelFreehandDraw();\n                }\n                this.closeContextualToolbar();\n                this.isFreehandDrawEditing = false;\n                if (this.upperCanvas.style.cursor === 'crosshair' || (Browser.isDevice && this.togglePen)) {\n                    if (this.togglePen) {\n                        if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n                            this.activeObj.strokeSettings = this.strokeSettings;\n                        }\n                        if (isNullOrUndefined(this.penStrokeWidth)) {\n                            this.penStrokeWidth = 2;\n                        }\n                        this.upperContext.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n                        this.upperContext.fillStyle = this.activeObj.strokeSettings.strokeColor;\n                        this.freehandDownHandler(e, this.upperCanvas); // To handle Freehand drawing\n                    }\n                    else {\n                        this.refreshActiveObj();\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                    }\n                    this.currObjType.isActiveObj = false;\n                    this.dragElement = '';\n                    this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n                }\n                if ((this.upperCanvas.style.cursor !== 'crosshair' && e.type.toLowerCase() === 'touchstart') ||\n                    (this.currObjType.isActiveObj && this.upperCanvas.style.cursor !== 'default' && !this.togglePen)) {\n                    if (this.currObjType.isUndoAction) {\n                        this.refreshUndoRedoColl();\n                    }\n                    this.findTarget(x, y, e.type);\n                }\n                else if ((this.currObjType.shape === '' || this.currObjType.isCustomCrop) && !this.togglePen && this.upperCanvas.style.cursor !== 'default') {\n                    this.setActivePoint(x, y);\n                }\n                if (!isNullOrUndefined(this.activeObj)) {\n                    var isCropSelection_1 = false;\n                    var splitWords_1;\n                    if (this.activeObj.shape !== undefined) {\n                        splitWords_1 = this.activeObj.shape.split('-');\n                    }\n                    if (splitWords_1 === undefined && (this.currObjType.isCustomCrop || this.togglePen)) {\n                        isCropSelection_1 = true;\n                    }\n                    else if (splitWords_1 !== undefined && splitWords_1[0] === 'crop') {\n                        isCropSelection_1 = true;\n                    }\n                    if ((this.activeObj.shape === 'rectangle') || (this.activeObj.shape === 'ellipse')\n                        || (this.activeObj.shape === 'line')) {\n                        this.refreshToolbar('shapes');\n                    }\n                    else if (this.activeObj.shape === 'text') {\n                        this.refreshToolbar('text');\n                    }\n                    else if (!isCropSelection_1) {\n                        this.callMainToolbar();\n                    }\n                    this.updateToolbarItems();\n                }\n            }\n        }\n        this.isShapeInserted = false;\n        this.tempActiveObj = extend({}, this.activeObj, {}, true);\n    };\n    ImageEditor.prototype.mouseMoveEventHandler = function (e) {\n        e.preventDefault();\n        if (e.type === 'touchmove' && e.touches.length === 2) {\n            if (this.isFirstMove) {\n                this.startTouches = this.targetTouches(e.touches);\n                this.tempTouches = [];\n                this.tempTouches.push({ x: e.touches[0].clientX || (e.touches[0].pageX - this.lowerCanvas.offsetLeft),\n                    y: e.touches[0].clientY || (e.touches[0].pageY - this.lowerCanvas.offsetTop) });\n                this.tempTouches.push({ x: e.touches[1].clientX || (e.touches[1].pageX - this.lowerCanvas.offsetLeft),\n                    y: e.touches[1].clientY || (e.touches[1].pageY - this.lowerCanvas.offsetTop) });\n            }\n            else {\n                var firstFingerX = e.touches[0].clientX || (e.touches[0].pageX - this.lowerCanvas.offsetLeft);\n                var firstFingerY = e.touches[0].clientY || (e.touches[0].pageY - this.lowerCanvas.offsetTop);\n                var secondFingerX = e.touches[1].clientX || (e.touches[1].pageX - this.lowerCanvas.offsetLeft);\n                var secondFingerY = e.touches[1].clientY || (e.touches[1].pageY - this.lowerCanvas.offsetTop);\n                var scale = this.calculateScale(this.startTouches, this.targetTouches(e.touches));\n                // Need to set lastX and lastY points\n                if (this.tempTouches[0].x !== firstFingerX && this.tempTouches[0].y !== firstFingerY &&\n                    this.tempTouches[1].x !== secondFingerX && this.tempTouches[1].y !== secondFingerY) {\n                    if (scale > 1) {\n                        this.zoom(1.1);\n                    }\n                    else {\n                        this.zoom(-1.1);\n                    }\n                    this.tempTouches = [];\n                    this.tempTouches.push({ x: e.touches[0].clientX || (e.touches[0].pageX - this.lowerCanvas.offsetLeft),\n                        y: e.touches[0].clientY || (e.touches[0].pageY - this.lowerCanvas.offsetTop) });\n                    this.tempTouches.push({ x: e.touches[1].clientX || (e.touches[1].pageX - this.lowerCanvas.offsetLeft),\n                        y: e.touches[1].clientY || (e.touches[1].pageY - this.lowerCanvas.offsetTop) });\n                }\n            }\n            this.isFirstMove = false;\n            return;\n        }\n        if (this.textArea.style.display === 'none') {\n            this.isTimer = true;\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        var bbox = this.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        this.canvasMouseMoveHandler(e);\n        var isCropSelection = false;\n        var splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (isCropSelection && this.zoomFactor > 0) {\n            this.disableZoomOutBtn();\n        }\n        if (this.currObjType.isActiveObj && (this.activeObj.activePoint !== undefined || this.objColl.length > 0) &&\n            !this.dragCanvas || this.activeObj.activePoint !== undefined) {\n            if (this.dragElement === '') {\n                this.setCursor(x, y);\n                if ((!isNullOrUndefined(this.activeObj.activePoint) && this.activeObj.activePoint.width === 0) && this.upperCanvas.style.cursor !== 'default' &&\n                    this.upperCanvas.style.cursor !== 'move' && this.upperCanvas.style.cursor !== 'crosshair'\n                    && this.upperCanvas.style.cursor !== 'grab' && this.upperCanvas.style.cursor !== 'pointer') {\n                    this.upperCanvas.style.cursor = 'move';\n                }\n                this.findTarget(x, y, e.type);\n            }\n        }\n        if (this.currObjType.isDragging) {\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.updateActivePoint(x, y, isCropSelection);\n            if (this.isPreventDragging) {\n                if ((this.activeObj.activePoint.startX > this.destLeft) &&\n                    (this.activeObj.activePoint.endX < this.destLeft + this.destWidth) && (this.activeObj.activePoint.startY > this.destTop)\n                    && (this.activeObj.activePoint.endY < this.destTop + this.destHeight)) {\n                    this.isPreventDragging = false;\n                }\n                this.drawObject('duplicate', null, null, null, true);\n            }\n            else {\n                this.drawObject('duplicate');\n            }\n            if (isCropSelection) {\n                this.dragCanvas = this.togglePan = true;\n            }\n        }\n    };\n    ImageEditor.prototype.mouseUpEventHandler = function (e) {\n        if (e.type === 'touchstart') {\n            this.isTouch = false;\n        }\n        e.preventDefault();\n        if (this.togglePan) {\n            this.canvasMouseUpHandler(e);\n        }\n        var x;\n        var y;\n        if (e.type === 'mouseup') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else {\n            x = this.touchEndPoint.x;\n            y = this.touchEndPoint.y;\n        }\n        var bbox = this.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        if (e.type === 'touchend') {\n            this.startTouches = this.tempTouches = [];\n            this.isFirstMove = false;\n            if (this.textArea.style.display === 'none') {\n                this.isTimer = false;\n                this.timer = 0;\n            }\n        }\n        var isCropSelection = false;\n        var splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isCropSelection = true;\n        }\n        if (e.currentTarget === this.upperCanvas) {\n            this.currObjType.shape = this.currObjType.shape.toLowerCase();\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var prevObj = this.getCurrentObj();\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            if (!this.togglePen && !isCropSelection) {\n                if (!isNullOrUndefined(this.tempObjColl) && this.activeObj.activePoint.width !== 0) {\n                    this.objColl.push(this.activeObj);\n                    if (JSON.stringify(this.activeObj.activePoint) !== JSON.stringify(this.tempActiveObj.activePoint)) {\n                        this.updateUndoRedoColl('shapeTransform', prevObj, this.tempObjColl, prevObj.pointColl, prevCropObj);\n                    }\n                    this.redrawShape(this.objColl[this.objColl.length - 1]);\n                    this.tempObjColl = undefined;\n                }\n                if (!this.isFreehandDrawEditing) {\n                    this.applyCurrActObj(x, y);\n                }\n            }\n            else if (isCropSelection && !this.togglePen) {\n                if (JSON.stringify(this.activeObj.activePoint) !== JSON.stringify(this.tempActiveObj.activePoint)) {\n                    prevObj.activeObj = extend([], this.tempActiveObj, {}, true);\n                    this.updateUndoRedoColl('selectionTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                }\n            }\n        }\n        if (this.togglePen && e.currentTarget === this.upperCanvas) {\n            this.freehandUpHandler(e, this.upperCanvas, this.upperContext);\n        }\n        else {\n            this.currObjType.shape = '';\n        }\n        this.dragElement = '';\n        this.currObjType.isInitialLine = this.currObjType.isDragging = false;\n        this.oldPoint.x = undefined;\n        this.oldPoint.y = undefined;\n    };\n    ImageEditor.prototype.keyDownEventHandler = function (e) {\n        var _this = this;\n        var shapeChangingArgs = {};\n        var previousShapeSettings = {};\n        var beforeSave = { fileName: this.fileName, fileType: this.fileType, cancel: false };\n        var splitWords;\n        switch (e.key) {\n            case (e.ctrlKey && 's'):\n                this.trigger('beforeSave', beforeSave, function (observableSaveArgs) {\n                    if (!beforeSave.cancel) {\n                        _this.export(observableSaveArgs.fileType, observableSaveArgs.fileName);\n                    }\n                });\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                break;\n            // case (e.ctrlKey && 'z'):\n            //     if (this.allowUndoRedo) {\n            //         this.callUndo();\n            //     }\n            //     break;\n            // case (e.ctrlKey && 'y'):\n            //     if (this.allowUndoRedo) {\n            //         this.callRedo();\n            //     }\n            //     break;\n            case 'Delete':\n                if (this.isFreehandDrawEditing) {\n                    this.updateFreehandDrawColorChange();\n                    var prevCropObj = extend({}, this.cropObj, {}, true);\n                    var prevObj = this.getCurrentObj();\n                    prevObj.objColl = extend([], this.objColl, [], true);\n                    prevObj.pointColl = extend([], this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n                    this.deleteFreehandDraw(parseInt(this.freehandDrawSelectedId.split('_')[1], 10) - 1, true);\n                    this.updateUndoRedoColl('deleteFreehandDrawing', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                }\n                else if (this.textArea.style.display === 'none') {\n                    this.objColl.push(this.activeObj);\n                    var prevCropObj = extend({}, this.cropObj, {}, true);\n                    var prevObj = this.getCurrentObj();\n                    prevObj.objColl = extend([], this.objColl, [], true);\n                    prevObj.pointColl = extend([], this.pointColl, [], true);\n                    prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n                    this.objColl.pop();\n                    previousShapeSettings = this.updatePreviousShapeSettings();\n                    shapeChangingArgs = { action: 'delete', previousShapeSettings: previousShapeSettings, currentShapeSettings: null };\n                    this.keyHistory = '';\n                    this.clearSelection();\n                    this.trigger('shapeChanging', shapeChangingArgs);\n                    this.refreshToolbar('main');\n                    this.updateUndoRedoColl('deleteObj', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                }\n                break;\n            case 'Escape':\n                if (this.togglePan) {\n                    this.refreshToolbar(this.currentToolbar);\n                    this.pan(false);\n                }\n                else if (this.textArea.style.display === 'block') {\n                    this.redrawActObj();\n                }\n                else {\n                    this.performCancel();\n                }\n                break;\n            case 'Enter':\n                if (this.activeObj.shape !== undefined) {\n                    splitWords = this.activeObj.shape.split('-');\n                }\n                if (this.activeObj.horTopLine !== undefined && (this.activeObj.shape !== undefined && splitWords[0] === 'crop')) {\n                    this.crop();\n                }\n                break;\n            default:\n                if (Browser.isDevice && this.textArea.style.display === 'block') {\n                    setTimeout(this.textKeyDown.bind(this), 1, e);\n                }\n                break;\n        }\n    };\n    ImageEditor.prototype.keyUpEventHandler = function (e) {\n        // eslint-disable-next-line\n        if (this.textArea.style.display === 'block' && e.target.id === this.element.id + '_textArea') {\n            setTimeout(this.textKeyDown.bind(this), 1, e);\n        }\n    };\n    ImageEditor.prototype.canvasMouseDownHandler = function (e) {\n        e.preventDefault();\n        var x;\n        var y;\n        if (e.type === 'mousedown') {\n            x = e.offsetX || (e.pageX - this.lowerCanvas.offsetLeft);\n            y = e.offsetY || (e.pageY - this.lowerCanvas.offsetTop);\n        }\n        else {\n            x = e.touches[0].clientX || (e.touches[0].pageX - this.lowerCanvas.offsetLeft);\n            y = e.touches[0].clientY || (e.touches[0].pageY - this.lowerCanvas.offsetTop);\n        }\n        var bbox = this.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        this.panDown = { x: x, y: y };\n        this.lastPan = { x: this.destLeft, y: this.destTop };\n        if (isNullOrUndefined(this.tempPanMove)) {\n            this.tempPanMove = { x: x, y: y };\n            this.panStartObj = this.getCurrentObj();\n            this.panStartObj.objColl = extend([], this.objColl, [], true);\n            this.panStartObj.pointColl = extend([], this.pointColl, [], true);\n            this.panStartObj.afterCropActions = this.afterCropActions;\n        }\n    };\n    ImageEditor.prototype.canvasMouseMoveHandler = function (e) {\n        if (this.dragCanvas) {\n            this.lowerCanvas.style.cursor = 'grab';\n        }\n        else {\n            this.dragCanvas = this.togglePan = false;\n            this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'default';\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = e.offsetX || (e.pageX - this.lowerCanvas.offsetLeft);\n            y = e.offsetY || (e.pageY - this.lowerCanvas.offsetTop);\n        }\n        else {\n            x = e.touches[0].clientX || (e.touches[0].pageX - this.lowerCanvas.offsetLeft);\n            y = e.touches[0].clientY || (e.touches[0].pageY - this.lowerCanvas.offsetTop);\n        }\n        var bbox = this.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        this.panMove = { x: x, y: y };\n        if (this.panDown && this.panMove && this.togglePan && this.dragCanvas) {\n            this.drawPannedImage();\n        }\n    };\n    ImageEditor.prototype.canvasMouseUpHandler = function (e) {\n        e.preventDefault();\n        if (this.togglePan) {\n            if (this.panDown && this.panMove && this.togglePan && this.dragCanvas) {\n                var prevCropObj = extend({}, this.cropObj, {}, true);\n                this.updateUndoRedoColl('pan', this.panStartObj, this.panStartObj.objColl, this.panStartObj.pointColl, prevCropObj);\n                this.panDown = null;\n                this.panMove = null;\n                this.tempPanMove = null;\n                this.panStartObj = null;\n            }\n        }\n        this.currObjType.isDragging = false;\n    };\n    ImageEditor.prototype.handleScroll = function (e) {\n        var x;\n        var y;\n        var isInsideCanvas = false;\n        if (e.type === 'mousewheel') {\n            // eslint-disable-next-line\n            x = e.clientX;\n            y = e.clientY;\n        }\n        var bbox = this.lowerCanvas.getBoundingClientRect();\n        x -= bbox.left;\n        y -= bbox.top;\n        if (x > this.destLeft && x < this.destLeft + this.destWidth && y > this.destTop && y < this.destTop + this.destHeight) {\n            isInsideCanvas = true;\n        }\n        if (e.ctrlKey === true && isInsideCanvas) {\n            e.preventDefault();\n        }\n    };\n    ImageEditor.prototype.textKeyDown = function (e) {\n        if (String.fromCharCode(e.which) === '\\r') {\n            this.textRow += 1;\n        }\n        this.textArea.setAttribute('rows', this.textRow.toString());\n        this.textArea.style.height = 'auto';\n        this.textArea.style.height = this.textArea.scrollHeight + 'px';\n        this.setTextBoxWidth(e);\n        if (Browser.isDevice) {\n            this.textArea.style.width = parseFloat(this.textArea.style.width) + this.textArea.style.fontSize + 'px';\n        }\n        var rows = this.textArea.value.split('\\n');\n        this.textRow = rows.length;\n        this.textArea.setAttribute('rows', this.textRow.toString());\n    };\n    ImageEditor.prototype.adjustToScreen = function () {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        if ((!isNullOrUndefined(this.element.querySelector('#' + this.element.id + '_contextualToolbar')) &&\n            !this.element.querySelector('#' + this.element.id + '_contextualToolbar').parentElement.classList.contains('e-hide')) ||\n            (!isNullOrUndefined(this.element.querySelector('#' + this.element.id + '_headWrapper'))\n                && !this.element.querySelector('#' + this.element.id + '_headWrapper').parentElement.classList.contains('e-hide'))) {\n            this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            this.okBtn();\n            this.refreshToolbar('main');\n        }\n        var splitWords;\n        var isSelectionCrop = false;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords !== undefined && splitWords[0] === 'crop') {\n            isSelectionCrop = true;\n            this.updateImageRatioForActObj();\n            this.objColl.push(this.activeObj);\n            this.refreshActiveObj();\n        }\n        if (this.textArea.style.display === 'block') {\n            this.redrawActObj();\n        }\n        var tempFilter = this.lowerContext.filter;\n        this.update();\n        this.applyActObj();\n        this.refreshActiveObj();\n        this.lowerContext.filter = this.initialAdjustmentValue = tempFilter;\n        if (this.isImageLoaded) {\n            showSpinner(this.element);\n            this.element.style.opacity = '0.5';\n        }\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        var canvasWrapper = document.querySelector('#' + this.element.id + '_canvasWrapper');\n        if (!isNullOrUndefined(canvasWrapper)) {\n            canvasWrapper.style.width = this.element.offsetWidth + 'px';\n            canvasWrapper.style.height = this.element.offsetHeight + 'px';\n            if (Browser.isDevice) {\n                canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - (2 * this.toolbarHeight)) - 3 + 'px';\n            }\n            else {\n                canvasWrapper.style.height = (parseFloat(canvasWrapper.style.height) - this.toolbarHeight) - 3 + 'px';\n            }\n        }\n        var maxDimension = this.calcMaxDimension(this.srcWidth, this.srcHeight);\n        if (this.defaultZoomFactor > 0) {\n            maxDimension.width += (maxDimension.width * this.defaultZoomFactor);\n            maxDimension.height += (maxDimension.height * this.defaultZoomFactor);\n        }\n        this.destLeft = (this.lowerCanvas.clientWidth - maxDimension.width) / 2;\n        this.destTop = (this.lowerCanvas.clientHeight - maxDimension.height) / 2;\n        if (this.degree === 0 && this.currFlipState === '') {\n            if (this.defaultZoomFactor > 0) {\n                this.destLeft += this.totalPannedPoint.x;\n                this.destTop += this.totalPannedPoint.y;\n            }\n            this.drawImgToCanvas(maxDimension);\n        }\n        else {\n            this.drawImgToCanvas(maxDimension);\n            this.updateCurrentTransformedState('initial');\n            var temp = this.lowerContext.filter;\n            this.updateBrightnessFilter();\n            this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n            this.lowerContext.filter = temp;\n            this.updateCurrentTransformedState('reverse');\n        }\n        this.zoomObjColl();\n        this.zoomFreehandDrawColl();\n        if (this.isCircleCrop) {\n            this.cropCircle(this.lowerContext);\n        }\n        hideSpinner(this.element);\n        this.element.style.opacity = '1';\n        if (this.defToolbarItems.length > 0 && (!isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n            /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n            var toolbar_10 = getComponent(proxy.element.id + '_toolbar', 'toolbar');\n            toolbar_10.refreshOverflow();\n            if (!isNullOrUndefined(this.element.querySelector('.e-contextual-toolbar-wrapper'))) {\n                this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n            }\n        }\n        this.refreshActiveObj();\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        if (isSelectionCrop) {\n            this.activeObj = extend({}, this.objColl[this.objColl.length - 1], null, true);\n            this.objColl.pop();\n            this.drawObject('duplicate', this.activeObj);\n        }\n        if ((this.degree !== 0 || this.currFlipState !== '') && this.defaultZoomFactor > 0) {\n            var totalPannedPoint = extend({}, this.totalPannedPoint, null, true);\n            var totalPannedInternalPoint = extend({}, this.totalPannedInternalPoint, null, true);\n            var totalPannedClientPoint = extend({}, this.totalPannedClientPoint, null, true);\n            this.zoom(.1);\n            this.zoom(-.1);\n            if (this.degree === 0) {\n                this.destLeft += totalPannedPoint.x;\n                this.destTop += totalPannedPoint.y;\n                this.totalPannedPoint = totalPannedPoint;\n                this.updateFlipPan();\n            }\n            else {\n                this.totalPannedInternalPoint = totalPannedInternalPoint;\n                this.totalPannedClientPoint = totalPannedClientPoint;\n                this.currentPannedPoint = { x: 0, y: 0 };\n                this.isCropTab = true;\n                this.rotatePan();\n                this.isCropTab = false;\n            }\n        }\n        else if (this.degree !== 0 && this.cropZoomFactor > 0) {\n            this.zoomFactor = this.cropZoomFactor = 0;\n            this.enableDisableToolbarBtn();\n        }\n    };\n    ImageEditor.prototype.screenOrientation = function () {\n        if (Browser.isDevice) {\n            setTimeout(this.adjustToScreen.bind(this), 100);\n        }\n    };\n    ImageEditor.prototype.windowResizeHandler = function () {\n        if (!Browser.isDevice) {\n            this.adjustToScreen();\n        }\n    };\n    ImageEditor.prototype.updatePreviousShapeSettings = function () {\n        var fontStyle = [];\n        if (this.activeObj.shape === 'text' && !isNullOrUndefined(this.activeObj.textSettings)) {\n            if (this.activeObj.textSettings.bold) {\n                fontStyle.push('bold');\n            }\n            if (this.activeObj.textSettings.italic) {\n                fontStyle.push('italic');\n            }\n            if (this.activeObj.textSettings.underline) {\n                fontStyle.push('underline');\n            }\n        }\n        return { id: !isNullOrUndefined(this.activeObj.currIndex) ? this.activeObj.currIndex : null,\n            type: this.toPascalCase(this.activeObj.shape),\n            startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY,\n            width: this.activeObj.activePoint.width, height: this.activeObj.activePoint.height,\n            strokeColor: !isNullOrUndefined(this.activeObj.strokeSettings) ? this.activeObj.strokeSettings.strokeColor : null,\n            strokeWidth: !isNullOrUndefined(this.activeObj.strokeSettings) ? this.activeObj.strokeSettings.strokeWidth : null,\n            fillColor: !isNullOrUndefined(this.activeObj.strokeSettings) ? this.activeObj.strokeSettings.fillColor : null,\n            radius: this.activeObj.shape === 'ellipse' ? this.activeObj.activePoint.width / 2 : null,\n            length: this.activeObj.shape === 'line' ? this.activeObj.activePoint.width : null,\n            text: this.activeObj.shape === 'text' ? (!isNullOrUndefined(this.activeObj.keyHistory) ? this.activeObj.keyHistory : null) : null,\n            fontSize: this.activeObj.shape === 'text' ? (!isNullOrUndefined(this.activeObj.textSettings) ? this.activeObj.textSettings.fontSize : null) : null,\n            fontStyle: this.activeObj.shape === 'text' ? fontStyle : null,\n            color: this.activeObj.shape === 'text' ? (!isNullOrUndefined(this.activeObj.strokeSettings) ? this.activeObj.strokeSettings.strokeColor : null) : null\n        };\n    };\n    ImageEditor.prototype.disableZoomOutBtn = function () {\n        var isDisabled = false;\n        var zoomOut = document.querySelector('#' + this.element.id + '_zoomOut');\n        var destLeft = this.destLeft;\n        var destTop = this.destTop;\n        var destWidth = this.destWidth;\n        var destHeight = this.destHeight;\n        if (this.degree === 0 || this.degree === 180) {\n            if (!isNullOrUndefined(this.activeObj.shape)) {\n                this.setZoomDimension(-0.1, this.activeObj);\n                if (this.destLeft > this.activeObj.activePoint.startX || this.destTop > this.activeObj.activePoint.startY ||\n                    this.destLeft + this.destWidth < this.activeObj.activePoint.endX || this.destTop + this.destHeight <\n                    this.activeObj.activePoint.endY) {\n                    zoomOut.classList.add('e-disabled');\n                    zoomOut.parentElement.classList.add('e-overlay');\n                    isDisabled = true;\n                }\n                else {\n                    zoomOut.classList.remove('e-disabled');\n                    zoomOut.parentElement.classList.remove('e-overlay');\n                    isDisabled = false;\n                }\n            }\n            else {\n                this.setZoomDimension(-0.1, null);\n            }\n        }\n        this.destLeft = destLeft;\n        this.destTop = destTop;\n        this.destWidth = destWidth;\n        this.destHeight = destHeight;\n        return isDisabled;\n    };\n    ImageEditor.prototype.setZoomDimension = function (value, selectionObj) {\n        var maxDimension = { width: 0, height: 0 };\n        if (this.degree % 90 === 0 && this.degree % 180 !== 0) {\n            maxDimension = this.calcMaxDimension(this.srcHeight, this.srcWidth);\n        }\n        else {\n            maxDimension = this.calcMaxDimension(this.srcWidth, this.srcHeight);\n        }\n        maxDimension.width += (maxDimension.width * this.zoomFactor);\n        maxDimension.height += (maxDimension.height * this.zoomFactor);\n        this.destLeft += ((this.destWidth - maxDimension.width) / 2);\n        this.destTop += ((this.destHeight - maxDimension.height) / 2);\n        // While zoom out limit image to draw inside the selection range\n        if (value < 0 && !isNullOrUndefined(selectionObj)) {\n            if (this.destLeft > selectionObj.activePoint.startX) {\n                this.destLeft = selectionObj.activePoint.startX;\n            }\n            if (this.destTop > selectionObj.activePoint.startY) {\n                this.destTop = selectionObj.activePoint.startY;\n            }\n            if (this.destLeft + maxDimension.width < selectionObj.activePoint.startX + selectionObj.activePoint.width) {\n                this.destLeft = this.destLeft + (selectionObj.activePoint.startX + selectionObj.activePoint.width) -\n                    (this.destLeft + maxDimension.width);\n            }\n            if (this.destTop + maxDimension.height < selectionObj.activePoint.startY + selectionObj.activePoint.height) {\n                this.destTop = this.destTop + (selectionObj.activePoint.startY + selectionObj.activePoint.height) -\n                    (this.destTop + maxDimension.height);\n            }\n        }\n        else if (value < 0 && isNullOrUndefined(selectionObj)) {\n            if (this.destLeft > 0) {\n                this.destLeft = 0;\n            }\n            if (this.destTop > 0) {\n                this.destTop = 0;\n            }\n            if (this.destLeft + maxDimension.width < this.lowerCanvas.width) {\n                this.destLeft = this.lowerCanvas.width - this.destWidth;\n            }\n            if (this.destTop + maxDimension.height < this.lowerCanvas.height) {\n                this.destTop = this.lowerCanvas.height - this.destHeight;\n            }\n        }\n        return maxDimension;\n    };\n    ImageEditor.prototype.applyCurrActObj = function (x, y) {\n        var isInside = false;\n        var actObj = extend({}, this.activeObj, {}, true);\n        if (isNullOrUndefined(actObj.activePoint)) {\n            return;\n        }\n        if ((x >= Math.floor(actObj.activePoint.startX) && x <= Math.ceil(actObj.activePoint.endX) &&\n            y >= Math.floor(actObj.activePoint.startY) && y <= Math.ceil(actObj.activePoint.endY))) {\n            isInside = true;\n        }\n        if (!isInside) {\n            this.updateImageRatioForActObj();\n            if (this.activeObj.horTopLine !== undefined && this.activeObj.horTopLine.startX !== 0 && this.activeObj.horTopLine.endX !== 0\n                && !this.currObjType.isCustomCrop && this.currObjType.shape !== '') {\n                this.objColl.push(extend({}, this.activeObj, {}, true));\n            }\n            if (this.activeObj.shape === 'text' || (this.currObjType.shape === 'ellipse' || this.currObjType.shape === 'rectangle' ||\n                this.currObjType.shape === 'line')) {\n                var tempFilter = this.lowerContext.filter;\n                this.lowerContext.filter = this.getDefaultFilter();\n                for (var i = 0; i < this.objColl.length; i++) {\n                    if (this.isObjInsideCropRegion(this.objColl[i])) {\n                        this.apply(this.objColl[i].shape, this.objColl[i]);\n                        this.refreshActiveObj();\n                    }\n                }\n                this.zoomFreehandDrawColl();\n                this.lowerContext.filter = tempFilter;\n                this.apply('shape');\n                this.clearOuterCanvas(this.lowerContext);\n                this.clearOuterCanvas(this.upperContext);\n                if (this.isCircleCrop) {\n                    this.cropCircle(this.lowerContext);\n                }\n            }\n            this.refreshToolbar('main');\n        }\n    };\n    ImageEditor.prototype.updateTextFromTextArea = function () {\n        if (this.activeObj.keyHistory !== this.textArea.value) {\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var prevObj = this.getCurrentObj();\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            this.updateUndoRedoColl('text', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj, this.activeObj.keyHistory, this.textArea.value);\n        }\n        this.activeObj.keyHistory = this.textArea.value;\n        this.textArea.style.display = 'none';\n        this.textArea.value = '';\n        this.updateFontStyles();\n        var width = this.upperContext.measureText(this.activeObj.keyHistory).width +\n            this.activeObj.textSettings.fontSize * 0.5;\n        var height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n        var rows = this.activeObj.keyHistory.split('\\n');\n        if (rows.length > 1) {\n            height *= rows.length;\n            var widthColl = [];\n            for (var i = 0; i < rows.length; i++) {\n                widthColl.push(this.upperContext.measureText(rows[i]).width +\n                    this.activeObj.textSettings.fontSize * 0.5);\n            }\n            width = Math.max.apply(Math, widthColl);\n        }\n        this.setTextSelection(width, height);\n        this.updateActiveObject(this.activeObj.activePoint, this.activeObj);\n        this.updateImageRatioForActObj();\n    };\n    ImageEditor.prototype.setTextBoxStylesToActObj = function () {\n        this.activeObj.textSettings.fontFamily = this.textArea.style.fontFamily;\n        this.activeObj.strokeSettings.strokeColor = this.textArea.style.color;\n        if (this.textArea.style.fontWeight === 'bold') {\n            this.activeObj.textSettings.bold = true;\n        }\n        else {\n            this.activeObj.textSettings.bold = false;\n        }\n        if (this.textArea.style.fontStyle === 'italic') {\n            this.activeObj.textSettings.italic = true;\n        }\n        else {\n            this.activeObj.textSettings.italic = false;\n        }\n        this.activeObj.textSettings.fontSize = (parseFloat(this.textArea.style.fontSize));\n    };\n    ImageEditor.prototype.redrawActObj = function (x, y) {\n        var splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (this.activeObj.horTopLine !== undefined && (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n            if (this.textArea.style.display === 'block') {\n                this.setTextBoxStylesToActObj();\n                this.updateFontRatio(this.activeObj, true);\n                if (x && y) {\n                    if ((x !== this.activeObj.activePoint.startX) && (y !== this.activeObj.activePoint.startY)) {\n                        this.updateTextFromTextArea();\n                        this.applyActObj();\n                    }\n                }\n                else {\n                    this.updateTextFromTextArea();\n                    this.apply(this.activeObj.shape, this.activeObj);\n                    this.objColl.push(this.activeObj);\n                    this.refreshActiveObj();\n                    this.textArea.style.transform = '';\n                    this.refreshToolbar('main');\n                }\n            }\n            else {\n                this.applyActObj();\n            }\n        }\n    };\n    ImageEditor.prototype.setTextBoxPos = function (actObj, degree, flip, x, y) {\n        var point = { x: x, y: y };\n        if (degree === 0) {\n            if (flip.toLowerCase() === 'horizontal') {\n                point.x = actObj.activePoint.endX;\n                point.y = actObj.activePoint.startY;\n            }\n            else if (flip.toLowerCase() === 'vertical') {\n                point.x = actObj.activePoint.startX;\n                point.y = actObj.activePoint.endY;\n            }\n            else {\n                point.x = actObj.activePoint.startX;\n                point.y = actObj.activePoint.startY;\n            }\n        }\n        else if (degree === 90) {\n            if (flip.toLowerCase() === 'horizontal') {\n                point.x = actObj.activePoint.startX;\n                point.y = actObj.activePoint.startY;\n            }\n            else if (flip.toLowerCase() === 'vertical') {\n                point.x = actObj.activePoint.endX;\n                point.y = actObj.activePoint.endY;\n            }\n            else {\n                point.x = actObj.activePoint.endX;\n                point.y = actObj.activePoint.startY;\n            }\n        }\n        else if (degree === 180) {\n            if (flip.toLowerCase() === 'horizontal') {\n                point.x = actObj.activePoint.startX;\n                point.y = actObj.activePoint.endY;\n            }\n            else if (flip.toLowerCase() === 'vertical') {\n                point.x = actObj.activePoint.endX;\n                point.y = actObj.activePoint.startY;\n            }\n            else {\n                point.x = actObj.activePoint.endX;\n                point.y = actObj.activePoint.endY;\n            }\n        }\n        else if (degree === 270) {\n            if (flip.toLowerCase() === 'horizontal') {\n                point.x = actObj.activePoint.endX;\n                point.y = actObj.activePoint.endY;\n            }\n            else if (flip.toLowerCase() === 'vertical') {\n                point.x = actObj.activePoint.startX;\n                point.y = actObj.activePoint.startY;\n            }\n            else {\n                point.x = actObj.activePoint.startX;\n                point.y = actObj.activePoint.endY;\n            }\n        }\n        return point;\n    };\n    ImageEditor.prototype.setTextBoxPoints = function (actObj, degree, flip, x, y) {\n        var point = { x: x, y: y };\n        if (degree === 0) {\n            if (actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = (actObj.activePoint.startX);\n                    point.y = (actObj.activePoint.startY);\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = (actObj.activePoint.endX);\n                    point.y = (actObj.activePoint.endY);\n                }\n            }\n            else {\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = (actObj.activePoint.endX);\n                    point.y = (actObj.activePoint.endY);\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = (actObj.activePoint.endX);\n                    point.y = (actObj.activePoint.startY);\n                }\n            }\n        }\n        else if (degree === 90) {\n            if (actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = (actObj.activePoint.endX);\n                    point.y = (actObj.activePoint.endY);\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = (actObj.activePoint.startX);\n                    point.y = (actObj.activePoint.endY);\n                }\n            }\n            else {\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = (actObj.activePoint.startX);\n                    point.y = (actObj.activePoint.endY);\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = (actObj.activePoint.startX);\n                    point.y = (actObj.activePoint.startY);\n                }\n            }\n        }\n        else if (degree === 180) {\n            if (actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = (actObj.activePoint.startX);\n                    point.y = (actObj.activePoint.startY);\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = (actObj.activePoint.startX);\n                    point.y = (actObj.activePoint.startY);\n                }\n            }\n            else {\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = (actObj.activePoint.startX);\n                    point.y = (actObj.activePoint.startY);\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = (actObj.activePoint.startX);\n                    point.y = (actObj.activePoint.endY);\n                }\n            }\n        }\n        else if (degree === 270) {\n            if (actObj.flipObjColl[0].toLowerCase() === 'horizontal') {\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = (actObj.activePoint.startX);\n                    point.y = (actObj.activePoint.startY);\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = (actObj.activePoint.endX);\n                    point.y = (actObj.activePoint.startY);\n                }\n            }\n            else {\n                if (flip.toLowerCase() === 'horizontal') {\n                    point.x = (actObj.activePoint.endX);\n                    point.y = (actObj.activePoint.startY);\n                }\n                else if (flip.toLowerCase() === 'vertical') {\n                    point.x = (actObj.activePoint.endX);\n                    point.y = (actObj.activePoint.endY);\n                }\n            }\n        }\n        return point;\n    };\n    ImageEditor.prototype.findTextTarget = function (e) {\n        var x;\n        var y;\n        if (e.type === 'dblclick') {\n            x = e.clientX;\n            y = e.clientY;\n        }\n        else if (e.type === 'touchstart') {\n            this.touchEndPoint.x = x = e.touches[0].clientX;\n            this.touchEndPoint.y = y = e.touches[0].clientY;\n        }\n        this.preventZoomBtn = true;\n        this.refreshToolbar('text');\n        this.preventZoomBtn = false;\n        this.updateToolbarItems();\n        if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n            var bbox = this.lowerCanvas.getBoundingClientRect();\n            x -= bbox.left;\n            y -= bbox.top;\n            var degree = void 0;\n            var flip = '';\n            if (this.activeObj.shapeDegree === 0) {\n                degree = this.degree;\n            }\n            else {\n                degree = this.degree - this.activeObj.shapeDegree;\n            }\n            if (degree < 0) {\n                degree = 360 + degree;\n            }\n            if (this.activeObj.textFlip === '') {\n                if (this.activeObj.textFlip === this.currFlipState) {\n                    flip = '';\n                }\n                else {\n                    flip = this.currFlipState;\n                }\n            }\n            else {\n                if (this.activeObj.textFlip === this.currFlipState) {\n                    flip = '';\n                }\n                else if (this.currFlipState === '') {\n                    flip = this.activeObj.textFlip;\n                }\n                else {\n                    flip = this.currFlipState;\n                }\n            }\n            var temp = void 0;\n            if (this.textArea.style.display === 'none') {\n                temp = extend({}, this.activeObj, {}, true);\n                for (var i = 0; i < this.objColl.length; i++) {\n                    if (JSON.stringify(this.activeObj) === JSON.stringify(this.objColl[i])) {\n                        this.objColl.splice(i, 1);\n                    }\n                }\n                this.refreshActiveObj();\n                this.lowerContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                this.redrawImgWithObj();\n                if ((!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle') || this.isCircleCrop) {\n                    this.cropCircle(this.lowerContext);\n                }\n                this.activeObj = temp;\n                this.updateFontStyles();\n                var actObj = extend({}, this.activeObj, {}, true);\n                if (x >= (actObj.activePoint.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.activePoint.endX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.activePoint.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.activePoint.endY + (actObj.topLeftCircle.radius * 2))) {\n                    this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                    if (actObj.flipObjColl.length === 4) {\n                        actObj.flipObjColl = [];\n                        flip = '';\n                    }\n                    if (flip === '' && actObj.flipObjColl.length > 1) {\n                        flip = actObj.flipObjColl[actObj.flipObjColl.length - 1];\n                    }\n                    if (actObj.flipObjColl.length <= 1) {\n                        var points = this.setTextBoxPos(actObj, degree, flip, x, y);\n                        x = points.x;\n                        y = points.y;\n                    }\n                    else {\n                        var points = this.setTextBoxPoints(actObj, degree, flip, x, y);\n                        x = points.x;\n                        y = points.y;\n                    }\n                    this.textArea.style.display = 'block';\n                    this.textArea.style.left = x + 'px';\n                    this.textArea.style.top = y + 'px';\n                    this.textArea.style.fontFamily = actObj.textSettings.fontFamily;\n                    this.textArea.style.fontSize = actObj.textSettings.fontSize + 'px';\n                    this.textArea.style.color = actObj.strokeSettings.strokeColor;\n                    this.textArea.style.fontWeight = actObj.textSettings.bold ? 'bold' : 'normal';\n                    this.textArea.style.fontStyle = actObj.textSettings.italic ? 'italic' : 'normal';\n                    this.textArea.style.border = '2px solid ' + this.themeColl[this.theme]['primaryColor'];\n                    this.textArea.value = actObj.keyHistory;\n                    this.textArea.style.overflow = 'hidden';\n                    this.textArea.style.height = 'auto';\n                    this.textArea.focus();\n                    if (degree % 90 === 0 && degree % 180 !== 0 && degree !== 0) {\n                        if (this.zoomFactor === 0) {\n                            this.textArea.style.width = (actObj.activePoint.height) + 'px';\n                            this.textArea.style.height = (actObj.activePoint.width) + 'px';\n                        }\n                        else {\n                            this.textArea.style.width = actObj.activePoint.height + 'px';\n                            this.textArea.style.height = actObj.activePoint.width + 'px';\n                        }\n                    }\n                    else {\n                        if (this.zoomFactor === 0) {\n                            this.textArea.style.width = (actObj.activePoint.width) + 'px';\n                            this.textArea.style.height = (actObj.activePoint.height) + 'px';\n                        }\n                        else {\n                            this.textArea.style.width = actObj.activePoint.width + 'px';\n                            this.textArea.style.height = actObj.activePoint.height + 'px';\n                        }\n                    }\n                    this.setTextBoxWidth();\n                    if (this.flipColl.length <= 1) {\n                        this.setTextBoxHeight();\n                    }\n                }\n                else {\n                    this.applyActObj();\n                }\n            }\n        }\n        else if (this.textArea.style.display === 'block' && this.selectedText() !== '' && e.type === 'mousedown') {\n            var temp = this.textArea.value;\n            this.textArea.value += 'a';\n            this.textArea.value = temp;\n        }\n    };\n    ImageEditor.prototype.selectedText = function () {\n        var start = this.textArea.selectionStart;\n        var finish = this.textArea.selectionEnd;\n        return this.textArea.value.substring(start, finish);\n    };\n    ImageEditor.prototype.setTextBoxHeight = function () {\n        var textAreaTop;\n        var degree;\n        var flip = '';\n        var actObj = extend({}, this.activeObj, {}, true);\n        if (actObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - actObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (actObj.textFlip === '') {\n            if (actObj.textFlip === this.currFlipState) {\n                flip = '';\n            }\n            else {\n                flip = this.currFlipState;\n            }\n        }\n        else {\n            if (actObj.textFlip === this.currFlipState) {\n                flip = '';\n            }\n            else if (this.currFlipState === '') {\n                flip = actObj.textFlip;\n            }\n            else {\n                flip = this.currFlipState;\n            }\n        }\n        if (degree === 0) {\n            if (flip.toLowerCase() === 'vertical') {\n                this.textArea.style.maxHeight = (this.destHeight - (this.destHeight\n                    - parseFloat(this.textArea.style.top))) + 'px';\n            }\n            else {\n                textAreaTop = parseFloat(this.textArea.style.top) - this.destTop;\n                this.textArea.style.maxHeight = (this.destHeight - textAreaTop) + 'px';\n            }\n        }\n        else if (degree === 90) {\n            if (flip.toLowerCase() === 'horizontal') {\n                this.textArea.style.maxHeight = (this.destWidth - (parseFloat(this.textArea.style.left)\n                    - this.destLeft)) + 'px';\n            }\n            else {\n                this.textArea.style.maxHeight = (parseFloat(this.textArea.style.left)\n                    - this.destLeft) + 'px';\n            }\n        }\n        else if (degree === 180) {\n            if (flip.toLowerCase() === 'vertical') {\n                textAreaTop = parseFloat(this.textArea.style.top) - this.destTop;\n                this.textArea.style.maxHeight = (this.destHeight - textAreaTop) + 'px';\n            }\n            else {\n                this.textArea.style.maxHeight = (parseFloat(this.textArea.style.top)\n                    - this.destTop) + 'px';\n            }\n        }\n        else if (degree === 270) {\n            if (flip.toLowerCase() === 'horizontal') {\n                this.textArea.style.maxHeight = (parseFloat(this.textArea.style.left)\n                    - this.destLeft) + 'px';\n            }\n            else {\n                this.textArea.style.maxHeight = this.destWidth - (parseFloat(this.textArea.style.left)\n                    - this.destLeft) + 'px';\n            }\n        }\n        //this.textArea.style.maxHeight = ((parseFloat(this.textArea.style.maxHeight) - parseFloat(this.textArea.style.fontSize) * 0.5)) + 'px';\n    };\n    ImageEditor.prototype.setTextBoxWidth = function (e) {\n        var text = this.getMaxText(true);\n        if (this.textArea.style.display === 'block') {\n            this.updateFontStyles(true);\n        }\n        else {\n            this.updateFontStyles();\n        }\n        var textAreaWidth = (this.upperContext.measureText(text).width + (parseFloat(this.textArea.style.fontSize) / 2));\n        var letterWidth = e ? this.upperContext.measureText(String.fromCharCode(e.which)).width : 0;\n        var actObj = extend({}, this.activeObj, {}, true);\n        var degree;\n        var flip = '';\n        if (actObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - actObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (actObj.shapeFlip !== this.currFlipState) {\n            flip = '';\n        }\n        else {\n            flip = this.currFlipState;\n        }\n        if ((!isNullOrUndefined(e) && parseFloat(this.textArea.style.width) < (textAreaWidth + letterWidth)) || isNullOrUndefined(e)) {\n            if (degree === 0) {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if ((parseFloat(this.textArea.style.left) - this.destLeft) - textAreaWidth - letterWidth > 0) {\n                        this.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    if ((this.destWidth - (parseFloat(this.textArea.style.left)\n                        - this.destLeft)) > (textAreaWidth + letterWidth)) {\n                        this.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n            else if (degree === 90) {\n                if (flip.toLowerCase() === 'vertical') {\n                    if ((parseFloat(this.textArea.style.top) - this.destTop) - textAreaWidth - letterWidth > 0) {\n                        this.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    if ((this.destWidth - (parseFloat(this.textArea.style.top)\n                        - this.destTop)) > (textAreaWidth + letterWidth)) {\n                        this.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n            else if (degree === 180) {\n                if (flip.toLowerCase() === 'horizontal') {\n                    if ((this.destWidth - (parseFloat(this.textArea.style.left)\n                        - this.destLeft)) > (textAreaWidth + letterWidth)) {\n                        this.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    if ((parseFloat(this.textArea.style.left) - this.destLeft) - textAreaWidth - letterWidth > 0) {\n                        this.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n            else if (degree === 270) {\n                if (flip.toLowerCase() === 'vertical') {\n                    if ((this.destHeight - (parseFloat(this.textArea.style.top)\n                        - this.destTop)) > (textAreaWidth + letterWidth)) {\n                        this.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n                else {\n                    if ((parseFloat(this.textArea.style.top) - this.destTop) - textAreaWidth - letterWidth > 0) {\n                        this.textArea.style.width = (textAreaWidth + letterWidth) + 'px';\n                    }\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.setActivePoint = function (startX, startY) {\n        if (isNullOrUndefined(this.activeObj.activePoint)) {\n            return;\n        }\n        if (this.currObjType.isText) {\n            var textWidth = startX ? startX : 0;\n            var textHeight = startY ? startY : this.activeObj.textSettings.fontSize;\n            if (this.activeObj.textSettings.fontSize === undefined) {\n                this.activeObj.textSettings.fontSize = (Math.abs(this.baseImg.width - this.baseImg.height)) * 0.1;\n            }\n            this.setTextSelection(textWidth, textHeight);\n            this.mouseDownPoint.x = this.activeObj.activePoint.endX;\n            this.mouseDownPoint.y = this.activeObj.activePoint.endY;\n            if (this.activeObj.horTopLine !== undefined) {\n                this.activeObj.activePoint = extend({}, this.activeObj.activePoint, {}, true);\n            }\n            this.drawObject('duplicate');\n        }\n        else if (startX && startY) {\n            this.activeObj.activePoint.startX = this.mouseDownPoint.x = startX;\n            this.activeObj.activePoint.startY = this.mouseDownPoint.y = startY;\n            this.currObjType.isDragging = true;\n        }\n        else {\n            var selectInfo = this.activeObj;\n            this.activeObj.activePoint = { startX: selectInfo.horTopLine.startX, startY: selectInfo.horTopLine.startY,\n                endX: selectInfo.horTopLine.endX, endY: selectInfo.horTopLine.endY };\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        }\n    };\n    ImageEditor.prototype.setDragWidth = function (width) {\n        var tempWidth = width;\n        if (tempWidth >= 0) {\n            for (var i = 0; i < tempWidth; i++) {\n                width = tempWidth - i;\n                this.activeObj.activePoint.startX += width;\n                this.activeObj.activePoint.endX += width;\n                if (this.activeObj.activePoint.startX >= this.destLeft &&\n                    this.activeObj.activePoint.endX <= this.destLeft + this.destWidth) {\n                    break;\n                }\n                else {\n                    this.activeObj.activePoint.startX -= width;\n                    this.activeObj.activePoint.endX -= width;\n                }\n            }\n        }\n        else {\n            for (var i = 1; i < Math.abs(tempWidth); i++) {\n                width = tempWidth + i;\n                this.activeObj.activePoint.startX += width;\n                this.activeObj.activePoint.endX += width;\n                if (this.activeObj.activePoint.startX >= this.destLeft &&\n                    this.activeObj.activePoint.endX <= this.destLeft + this.destWidth) {\n                    break;\n                }\n                else {\n                    this.activeObj.activePoint.startX -= width;\n                    this.activeObj.activePoint.endX -= width;\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.setDragHeight = function (height) {\n        var tempHeight = height;\n        if (tempHeight >= 0) {\n            for (var i = 1; i < tempHeight; i++) {\n                height = tempHeight - i;\n                this.activeObj.activePoint.startY += height;\n                this.activeObj.activePoint.endY += height;\n                if (this.activeObj.activePoint.startY >= this.destTop &&\n                    this.activeObj.activePoint.endY <= this.destTop + this.destHeight) {\n                    break;\n                }\n                else {\n                    this.activeObj.activePoint.startY -= height;\n                    this.activeObj.activePoint.endY -= height;\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < Math.abs(tempHeight); i++) {\n                height = tempHeight + i;\n                this.activeObj.activePoint.startY += height;\n                this.activeObj.activePoint.endY += height;\n                if (this.activeObj.activePoint.startY >= this.destTop &&\n                    this.activeObj.activePoint.endY <= this.destTop + this.destHeight) {\n                    break;\n                }\n                else {\n                    this.activeObj.activePoint.startY -= height;\n                    this.activeObj.activePoint.endY -= height;\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.triggerShapeChange = function (shapeResizingArgs, shapeMovingArgs, type) {\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        var currentShapeSettings = this.updatePreviousShapeSettings();\n        shapeResizingArgs.currentShapeSettings = currentShapeSettings;\n        shapeMovingArgs.currentShapeSettings = currentShapeSettings;\n        if (type === 'resize') {\n            this.trigger('shapeChanging', shapeResizingArgs);\n            this.updateShapeChangeEventArgs(shapeResizingArgs.currentShapeSettings);\n        }\n        else {\n            this.trigger('shapeChanging', shapeMovingArgs);\n            this.updateShapeChangeEventArgs(shapeMovingArgs.currentShapeSettings);\n        }\n    };\n    ImageEditor.prototype.updateActivePoint = function (x, y, isCropSelection) {\n        var maxDimension = this.calcMaxDimension(this.activeObj.activePoint.width, this.activeObj.activePoint.height);\n        var previousShapeSettings = this.updatePreviousShapeSettings();\n        var shapeResizingArgs = { action: 'resize', previousShapeSettings: previousShapeSettings };\n        var shapeMovingArgs = { action: 'move', previousShapeSettings: previousShapeSettings };\n        if (this.activeObj.shape === 'text' && this.dragElement !== '') {\n            this.updateFontRatio(this.activeObj);\n        }\n        switch (this.dragElement.toLowerCase()) {\n            case 'nw-resize':\n                this.updateNWPoints(x, y, maxDimension);\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'n-resize':\n                this.updateNPoints(x, y);\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'ne-resize':\n                this.updateNEPoints(x, y, maxDimension);\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'w-resize':\n                this.updateWPoints(x, y);\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'e-resize':\n                this.updateEPoints(x, y);\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'sw-resize':\n                this.updateSWPoints(x, y, maxDimension);\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 's-resize':\n                this.updateSPoints(x, y);\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            case 'se-resize':\n                this.updateSEPoints(x, y, maxDimension);\n                this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'resize');\n                break;\n            default:\n                if (!isCropSelection && !this.currObjType.isCustomCrop) {\n                    if (this.dragPoint.startX) {\n                        var width = (this.dragPoint.endX - this.previousPoint.x);\n                        var height = (this.dragPoint.endY - this.previousPoint.y);\n                        this.activeObj.activePoint.startX += width;\n                        this.activeObj.activePoint.endX += width;\n                        this.activeObj.activePoint.startY += height;\n                        this.activeObj.activePoint.endY += height;\n                        if (!this.isPreventDragging && (this.activeObj.activePoint.startX < this.destLeft ||\n                            this.activeObj.activePoint.startY < this.destTop || this.activeObj.activePoint.endX >\n                            this.destLeft + this.destWidth || this.activeObj.activePoint.endY > this.destTop + this.destHeight)) {\n                            this.activeObj.activePoint.startX -= width;\n                            this.activeObj.activePoint.endX -= width;\n                            this.activeObj.activePoint.startY -= height;\n                            this.activeObj.activePoint.endY -= height;\n                            this.setDragWidth(width);\n                            this.setDragHeight(height);\n                        }\n                    }\n                    else {\n                        this.activeObj.activePoint.startX = x < this.mouseDownPoint.x ? x : this.mouseDownPoint.x;\n                        this.activeObj.activePoint.startY = y < this.mouseDownPoint.y ? y : this.mouseDownPoint.y;\n                        x = x < this.mouseDownPoint.x ? this.mouseDownPoint.x : x;\n                        y = y < this.mouseDownPoint.y ? this.mouseDownPoint.y : y;\n                        this.activeObj.activePoint.endX = x;\n                        this.activeObj.activePoint.endY = y;\n                    }\n                    this.triggerShapeChange(shapeResizingArgs, shapeMovingArgs, 'move');\n                }\n                break;\n        }\n    };\n    ImageEditor.prototype.preventDraggingInvertly = function () {\n        if (!this.isPreventDragging) {\n            if (this.activeObj.activePoint.startX < this.destLeft) {\n                this.activeObj.activePoint.startX = this.destLeft;\n            }\n            if (this.activeObj.activePoint.startY < this.destTop) {\n                this.activeObj.activePoint.startY = this.destTop;\n            }\n            if (this.activeObj.activePoint.endX > this.destLeft + this.destWidth) {\n                this.activeObj.activePoint.endX = this.destLeft + this.destWidth;\n            }\n            if (this.activeObj.activePoint.endY > this.destTop + this.destHeight) {\n                this.activeObj.activePoint.endY = this.destTop + this.destHeight;\n            }\n        }\n    };\n    ImageEditor.prototype.updateNWPoints = function (x, y, maxDimension) {\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, this.activeObj, null, true);\n        if (this.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = this.activeObj.activePoint.startX - x;\n                this.diffPoint.y = this.activeObj.activePoint.startY - y;\n            }\n            else {\n                this.diffPoint.x = this.oldPoint.x - x;\n                this.diffPoint.y = this.oldPoint.y - y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            this.activeObj.activePoint.startX -= (maxDimension.width / 100) * percentage;\n            this.activeObj.activePoint.startY -= (maxDimension.height / 100) * percentage;\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            this.updateFontSize(this.activeObj);\n        }\n        else {\n            var splitWords = void 0;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.activeObj.shape === 'crop-custom' || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.startX = x;\n                this.activeObj.activePoint.startY = y;\n                if (this.activeObj.activePoint.startX > this.activeObj.activePoint.endX) {\n                    var temp = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = temp;\n                    this.dragElement = 'ne-resize';\n                }\n                if (this.activeObj.activePoint.startY > this.activeObj.activePoint.endY) {\n                    var temp = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = temp;\n                    this.dragElement = 'sw-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (this.activeObj.activePoint.startX < x && this.activeObj.activePoint.startY < y) {\n                    width = x - this.activeObj.activePoint.startX;\n                    height = y - this.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX += newScale.x;\n                    this.activeObj.activePoint.startY += newScale.y;\n                    var left = this.destLeft > 0 ? this.destLeft : 0;\n                    var top_2 = this.destTop > 0 ? this.destTop : 0;\n                    if (this.activeObj.activePoint.startX < left || this.activeObj.activePoint.startY < top_2) {\n                        this.activeObj.activePoint.startX -= newScale.x;\n                        this.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = this.activeObj.activePoint.startX - x;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX -= newScale.x;\n                    this.activeObj.activePoint.startY -= newScale.y;\n                    var left = this.destLeft > 0 ? this.destLeft : 0;\n                    var top_3 = this.destTop > 0 ? this.destTop : 0;\n                    if (this.activeObj.activePoint.startX < left || this.activeObj.activePoint.startY < top_3) {\n                        this.activeObj.activePoint.startX += newScale.x;\n                        this.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    ImageEditor.prototype.updateNPoints = function (x, y) {\n        var width;\n        var height;\n        var scale;\n        if (this.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.activeObj.shape === 'crop-custom' || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.startY = y;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n                if (this.activeObj.activePoint.startY > this.activeObj.activePoint.endY) {\n                    var temp = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = temp;\n                    this.dragElement = 's-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.startY < y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = y - this.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.startY += newScale.y;\n                    if (this.activeObj.activePoint.endX > (this.destLeft + this.destWidth) ||\n                        this.activeObj.activePoint.startY < this.destTop) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = this.activeObj.activePoint.startY - y;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.startY -= newScale.y;\n                    if (this.activeObj.activePoint.endX > (this.destLeft + this.destWidth) ||\n                        this.activeObj.activePoint.startY < this.destTop) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            }\n        }\n    };\n    ImageEditor.prototype.updateNEPoints = function (x, y, maxDimension) {\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, this.activeObj, null, true);\n        if (this.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = x - this.activeObj.activePoint.endX;\n                this.diffPoint.y = this.activeObj.activePoint.startY - y;\n            }\n            else {\n                this.diffPoint.x = x - this.oldPoint.x;\n                this.diffPoint.y = this.oldPoint.y - y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            this.activeObj.activePoint.endX += (maxDimension.width / 100) * percentage;\n            this.activeObj.activePoint.startY -= (maxDimension.height / 100) * percentage;\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            this.updateFontSize(this.activeObj);\n        }\n        else {\n            var splitWords = void 0;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.currObjType.isCustomCrop || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.endX = x;\n                this.activeObj.activePoint.startY = y;\n                if (this.activeObj.activePoint.endX < this.activeObj.activePoint.startX) {\n                    var temp = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = temp;\n                    this.dragElement = 'nw-resize';\n                }\n                if (this.activeObj.activePoint.startY > this.activeObj.activePoint.endY) {\n                    var temp = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = temp;\n                    this.dragElement = 'se-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.startY < y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = y - this.activeObj.activePoint.startY;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.startY += newScale.y;\n                    var endX = this.destLeft + this.destWidth < this.lowerCanvas.width ?\n                        this.destLeft + this.destWidth : this.lowerCanvas.width;\n                    var endY = this.destTop > 0 ? this.destTop : 0;\n                    if (this.activeObj.activePoint.endX > endX || this.activeObj.activePoint.startY < endY) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.startY -= newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = this.activeObj.activePoint.startY - y;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.startY -= newScale.y;\n                    var endX = this.destLeft + this.destWidth < this.lowerCanvas.width ?\n                        this.destLeft + this.destWidth : this.lowerCanvas.width;\n                    var endY = this.destTop > 0 ? this.destTop : 0;\n                    if (this.activeObj.activePoint.endX > endX || this.activeObj.activePoint.startY < endY) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.startY += newScale.y;\n                    }\n                }\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    ImageEditor.prototype.updateWPoints = function (x, y) {\n        var width;\n        var height;\n        var scale;\n        if (this.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.activeObj.shape === 'crop-custom' || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.startX = x;\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                if (this.activeObj.activePoint.startX > this.activeObj.activePoint.endX) {\n                    var temp = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = temp;\n                    this.dragElement = 'e-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (this.activeObj.activePoint.startX < x && this.activeObj.activePoint.endY > y) {\n                    width = x - this.activeObj.activePoint.startX;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX += newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    if (this.activeObj.activePoint.startX < this.destLeft || this.activeObj.activePoint.endY >\n                        (this.destTop + this.destHeight)) {\n                        this.activeObj.activePoint.startX -= newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = this.activeObj.activePoint.startX - x;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX -= newScale.x;\n                    this.activeObj.activePoint.endY += newScale.y;\n                    if (this.activeObj.activePoint.startX < this.destLeft || this.activeObj.activePoint.endY >\n                        (this.destTop + this.destHeight)) {\n                        this.activeObj.activePoint.startX += newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            }\n        }\n    };\n    ImageEditor.prototype.updateEPoints = function (x, y) {\n        var width;\n        var height;\n        var scale;\n        if (this.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.activeObj.shape === 'crop-custom' || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.endX = x;\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                if (this.activeObj.activePoint.endX < this.activeObj.activePoint.startX) {\n                    var temp = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = temp;\n                    this.dragElement = 'w-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.endY > y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    if (this.activeObj.activePoint.endX > (this.destLeft + this.destWidth) ||\n                        this.activeObj.activePoint.endY > (this.destTop + this.destHeight)) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.endY += newScale.y;\n                    if (this.activeObj.activePoint.endX > (this.destLeft + this.destWidth) || this.activeObj.activePoint.endY >\n                        (this.destTop + this.destHeight)) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            }\n        }\n    };\n    ImageEditor.prototype.updateSWPoints = function (x, y, maxDimension) {\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, this.activeObj, null, true);\n        if (this.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = this.activeObj.activePoint.startX - x;\n                this.diffPoint.y = y - this.activeObj.activePoint.endY;\n            }\n            else {\n                this.diffPoint.x = this.oldPoint.x - x;\n                this.diffPoint.y = y - this.oldPoint.y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x <= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            this.activeObj.activePoint.startX -= (maxDimension.width / 100) * percentage;\n            this.activeObj.activePoint.endY += (maxDimension.height / 100) * percentage;\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            this.updateFontSize(this.activeObj);\n        }\n        else {\n            var splitWords = void 0;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.activeObj.shape === 'crop-custom' || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.startX = x;\n                this.activeObj.activePoint.endY = y;\n                if (this.activeObj.activePoint.startX > this.activeObj.activePoint.endX) {\n                    var temp = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = temp;\n                    this.dragElement = 'se-resize';\n                }\n                if (this.activeObj.activePoint.endY < this.activeObj.activePoint.startY) {\n                    var temp = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = temp;\n                    this.dragElement = 'nw-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (this.activeObj.activePoint.startX < x && this.activeObj.activePoint.endY > y) {\n                    width = x - this.activeObj.activePoint.startX;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX += newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    var endX = this.destLeft > 0 ? this.destLeft : 0;\n                    var endY = this.destTop + this.destHeight < this.lowerCanvas.height ? this.destTop +\n                        this.destHeight : this.lowerCanvas.height;\n                    if (this.activeObj.activePoint.startX < endX || this.activeObj.activePoint.endY > endY) {\n                        this.activeObj.activePoint.startX -= newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = this.activeObj.activePoint.startX - x;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.startX -= newScale.x;\n                    this.activeObj.activePoint.endY += newScale.y;\n                    var endX = this.destLeft > 0 ? this.destLeft : 0;\n                    var endY = this.destTop + this.destHeight < this.lowerCanvas.height ? this.destTop +\n                        this.destHeight : this.lowerCanvas.height;\n                    if (this.activeObj.activePoint.startX < endX || this.activeObj.activePoint.endY > endY) {\n                        this.activeObj.activePoint.startX += newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    ImageEditor.prototype.updateSPoints = function (x, y) {\n        var width;\n        var height;\n        var scale;\n        if (this.activeObj.shape !== 'text') {\n            var splitWords = void 0;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.activeObj.shape === 'crop-custom' || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.endY = y;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n                if (this.activeObj.activePoint.endY < this.activeObj.activePoint.startY) {\n                    var temp = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = temp;\n                    this.dragElement = 'n-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.endY > y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    if (this.activeObj.activePoint.endX > (this.destLeft + this.destWidth) ||\n                        this.activeObj.activePoint.endY > (this.destTop + this.destHeight)) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.endY += newScale.x;\n                    if (this.activeObj.activePoint.endX > (this.destLeft + this.destWidth) ||\n                        this.activeObj.activePoint.endY > (this.destTop + this.destHeight)) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            }\n        }\n    };\n    ImageEditor.prototype.updateSEPoints = function (x, y, maxDimension) {\n        var diff;\n        var width;\n        var height;\n        var scale;\n        var percentage;\n        var prevDiffX = this.diffPoint.x;\n        var prevDiffY = this.diffPoint.y;\n        var tempActiveObj = extend({}, this.activeObj, null, true);\n        if (this.activeObj.shape === 'text') {\n            if (this.oldPoint.x === undefined && this.oldPoint.y === undefined) {\n                this.diffPoint.x = x - this.activeObj.activePoint.endX;\n                this.diffPoint.y = y - this.activeObj.activePoint.endY;\n            }\n            else {\n                this.diffPoint.x = x - this.oldPoint.x;\n                this.diffPoint.y = y - this.oldPoint.y;\n            }\n            this.oldPoint.x = x;\n            this.oldPoint.y = y;\n            if (this.diffPoint.x >= prevDiffX && this.diffPoint.y >= prevDiffY) {\n                diff = Math.max(this.diffPoint.x, this.diffPoint.y);\n            }\n            else {\n                diff = Math.min(this.diffPoint.x, this.diffPoint.y);\n            }\n            percentage = (diff / 10);\n            this.activeObj.activePoint.endX += (maxDimension.width / 50) * percentage;\n            this.activeObj.activePoint.endY += (maxDimension.height / 50) * percentage;\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            this.updateFontSize(this.activeObj);\n        }\n        else {\n            var splitWords = void 0;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (this.activeObj.shape === 'crop-custom' || (this.activeObj.shape !== undefined && splitWords[0] !== 'crop')) {\n                this.activeObj.activePoint.endX = x;\n                this.activeObj.activePoint.endY = y;\n                if (this.activeObj.activePoint.endX < this.activeObj.activePoint.startX) {\n                    var temp = this.activeObj.activePoint.endX;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.startX = temp;\n                    this.dragElement = 'sw-resize';\n                }\n                if (this.activeObj.activePoint.endY < this.activeObj.activePoint.startY) {\n                    var temp = this.activeObj.activePoint.endY;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.startY = temp;\n                    this.dragElement = 'ne-resize';\n                }\n                this.preventDraggingInvertly();\n            }\n            else {\n                if (this.activeObj.activePoint.endX > x && this.activeObj.activePoint.endY > y) {\n                    width = this.activeObj.activePoint.endX - x;\n                    height = this.activeObj.activePoint.endY - y;\n                    scale = Math.min(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX -= newScale.x;\n                    this.activeObj.activePoint.endY -= newScale.y;\n                    var endX = this.destLeft + this.destWidth < this.lowerCanvas.width ?\n                        this.destLeft + this.destWidth : this.lowerCanvas.width;\n                    var endY = this.destTop + this.destHeight < this.lowerCanvas.height ?\n                        this.destTop + this.destHeight : this.lowerCanvas.height;\n                    if (this.activeObj.activePoint.endX > endX || this.activeObj.activePoint.endY > endY) {\n                        this.activeObj.activePoint.endX += newScale.x;\n                        this.activeObj.activePoint.endY += newScale.y;\n                    }\n                }\n                else {\n                    width = x - this.activeObj.activePoint.endX;\n                    height = y - this.activeObj.activePoint.endY;\n                    scale = Math.max(width, height);\n                    var newScale = this.getScaleRatio(scale);\n                    this.activeObj.activePoint.endX += newScale.x;\n                    this.activeObj.activePoint.endY += newScale.y;\n                    var endX = this.destLeft + this.destWidth < this.lowerCanvas.width ? this.destLeft +\n                        this.destWidth : this.lowerCanvas.width;\n                    var endY = this.destTop + this.destHeight < this.lowerCanvas.height ? this.destTop +\n                        this.destHeight : this.lowerCanvas.height;\n                    if (this.activeObj.activePoint.endX > endX || this.activeObj.activePoint.endY > endY) {\n                        this.activeObj.activePoint.endX -= newScale.x;\n                        this.activeObj.activePoint.endY -= newScale.y;\n                    }\n                }\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n            this.preventInverseResize(tempActiveObj);\n        }\n    };\n    ImageEditor.prototype.updateFontRatio = function (obj, isTextArea) {\n        var degree;\n        if (obj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - obj.shapeDegree;\n        }\n        if (isNullOrUndefined(isTextArea)) {\n            if (degree === 0 || degree === 180) {\n                obj.textSettings.fontRatio = obj.activePoint.width / obj.textSettings.fontSize;\n            }\n            else {\n                obj.textSettings.fontRatio = obj.activePoint.height / obj.textSettings.fontSize;\n            }\n        }\n        else if (isTextArea) {\n            if (degree === 0 || degree === 180) {\n                obj.textSettings.fontRatio = this.textArea.clientWidth / parseFloat(this.textArea.style.fontSize);\n            }\n            else {\n                obj.textSettings.fontRatio = this.textArea.clientHeight / parseFloat(this.textArea.style.fontSize);\n            }\n        }\n    };\n    ImageEditor.prototype.updateFontSize = function (obj) {\n        var degree;\n        if (obj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - obj.shapeDegree;\n        }\n        if (degree === 0 || degree === 180) {\n            obj.textSettings.fontSize = (obj.activePoint.width / obj.textSettings.fontRatio);\n        }\n        else {\n            obj.textSettings.fontSize = (obj.activePoint.height / obj.textSettings.fontRatio);\n        }\n    };\n    ImageEditor.prototype.preventInverseResize = function (tempActiveObj) {\n        if (this.activeObj.activePoint.width < 0) {\n            this.activeObj.activePoint.width = 0;\n            this.activeObj.activePoint.startX = tempActiveObj.activePoint.startX;\n            this.activeObj.activePoint.endX = tempActiveObj.activePoint.endX;\n        }\n        if (this.activeObj.activePoint.height < 0) {\n            this.activeObj.activePoint.height = 0;\n            this.activeObj.activePoint.startY = tempActiveObj.activePoint.startY;\n            this.activeObj.activePoint.endY = tempActiveObj.activePoint.endY;\n        }\n    };\n    ImageEditor.prototype.getScaleRatio = function (scale) {\n        var point = { x: scale, y: scale };\n        if (this.activeObj.shape !== 'crop-custom' && this.activeObj.shape !== 'crop-circle' && this.activeObj.shape !== 'crop-square') {\n            var ratio = this.activeObj.shape.split('-');\n            ratio = ratio[1].split(':');\n            var newScale = scale / (parseInt(ratio[1], 10));\n            point.x = newScale * (parseInt(ratio[0], 10));\n            point.y = newScale * (parseInt(ratio[1], 10));\n        }\n        return point;\n    };\n    ImageEditor.prototype.getMaxText = function (isTextBox, text) {\n        if (isNullOrUndefined(text)) {\n            text = isTextBox ? this.textArea.value : this.activeObj.keyHistory;\n        }\n        var maxi;\n        var rows = text.split('\\n');\n        var maxStr = rows[0].length;\n        var maxText = rows[0];\n        for (var i = 1; i < rows.length; i++) {\n            maxi = rows[i].length;\n            if (maxi > maxStr) {\n                maxText = rows[i];\n                maxStr = maxi;\n            }\n        }\n        return maxText;\n    };\n    ImageEditor.prototype.setDragLimit = function () {\n        if (this.activeObj.activePoint) {\n            if (this.activeObj.activePoint.startX < this.destLeft) {\n                this.activeObj.activePoint.startX = this.destLeft;\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n            }\n            else if (this.activeObj.activePoint.endX > this.destLeft + this.destWidth) {\n                this.activeObj.activePoint.endX = this.destLeft + this.destWidth;\n                this.activeObj.activePoint.startX = this.activeObj.activePoint.endX - this.activeObj.activePoint.width;\n            }\n            if (this.activeObj.activePoint.startY < this.destTop) {\n                this.activeObj.activePoint.startY = this.destTop;\n            }\n            else if (this.activeObj.activePoint.endY > this.destTop + this.destHeight) {\n                this.activeObj.activePoint.endY = this.destTop + this.destHeight;\n                this.activeObj.activePoint.startY = this.activeObj.activePoint.endY - this.activeObj.activePoint.height;\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        }\n    };\n    ImageEditor.prototype.lineDraw = function () {\n        if (this.activeObj.activePoint.height < 10) {\n            this.activeObj.activePoint.startY -= 10;\n            this.activeObj.activePoint.endY += 10;\n            this.activeObj.lineDraw = 'horizontal';\n        }\n        else if (this.activeObj.activePoint.width < 10) {\n            this.activeObj.activePoint.startX -= 10;\n            this.activeObj.activePoint.endX += 10;\n            this.activeObj.lineDraw = 'vertical';\n        }\n        else if (this.currObjType.isInitialLine) {\n            this.activeObj.lineDraw = 'normal';\n            this.currObjType.isInitialLine = false;\n        }\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n    };\n    ImageEditor.prototype.shapeCircle = function (canvasDraw, selectionWidth, selectionHeight) {\n        canvasDraw.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n        canvasDraw.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        canvasDraw.fillStyle = 'rgb(0, 0, 0, 0.5)';\n        canvasDraw.fillRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        var tempWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (2);\n        canvasDraw.beginPath();\n        canvasDraw.ellipse(this.activeObj.horTopLine.startX + (selectionWidth / 2), this.activeObj.horTopLine.startY\n            + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n        canvasDraw.stroke();\n        canvasDraw.closePath();\n        canvasDraw.save();\n        canvasDraw.beginPath();\n        canvasDraw.arc(((this.activeObj.activePoint.endX - this.activeObj.activePoint.startX) / 2) + this.activeObj.activePoint.startX, ((this.activeObj.activePoint.endY - this.activeObj.activePoint.startY) / 2) + this.activeObj.activePoint.startY, (this.activeObj.activePoint.width / 2), 0, Math.PI * 2);\n        canvasDraw.closePath();\n        canvasDraw.clip();\n        canvasDraw.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        canvasDraw.restore();\n        canvasDraw.lineWidth = tempWidth;\n        this.drawOuterSelection(canvasDraw, true);\n        this.currObjType.shape = '';\n    };\n    ImageEditor.prototype.drawOuterSelection = function (canvasDraw, isCropCircle) {\n        var splitWords;\n        canvasDraw.lineWidth = (0.5);\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        var tempObj = extend({}, this.activeObj, {}, true);\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (((splitWords !== undefined && splitWords[0] === 'crop') || this.activeObj.shape === undefined) && !isCropCircle) {\n            this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.5)';\n            this.upperContext.fillRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.upperContext.clearRect(this.activeObj.activePoint.startX, this.activeObj.activePoint.startY, this.activeObj.activePoint.width, this.activeObj.activePoint.height);\n        }\n        canvasDraw.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n        canvasDraw.fillStyle = this.themeColl[this.theme]['secondaryColor'];\n        if (this.activeObj.shape !== 'rectangle') {\n            canvasDraw.beginPath();\n            canvasDraw.rect(tempObj.activePoint.startX, tempObj.activePoint.startY, tempObj.activePoint.width, tempObj.activePoint.height);\n            canvasDraw.stroke();\n            canvasDraw.closePath();\n        }\n        canvasDraw.lineWidth *= 2;\n        canvasDraw.beginPath();\n        canvasDraw.moveTo(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY);\n        canvasDraw.arc(tempObj.topLeftCircle.startX, tempObj.topLeftCircle.startY, tempObj.topLeftCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY);\n        canvasDraw.arc(tempObj.topRightCircle.startX, tempObj.topRightCircle.startY, tempObj.topRightCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY);\n        canvasDraw.arc(tempObj.bottomLeftCircle.startX, tempObj.bottomLeftCircle.startY, tempObj.bottomLeftCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY);\n        canvasDraw.arc(tempObj.bottomRightCircle.startX, tempObj.bottomRightCircle.startY, tempObj.bottomRightCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.stroke();\n        canvasDraw.fill();\n        canvasDraw.closePath();\n        canvasDraw.lineWidth /= 2;\n        if ((splitWords === undefined || splitWords[0] !== 'crop') && this.activeObj.shape !== 'text') {\n            this.drawCenterCircles(canvasDraw);\n        }\n        this.activeObj = extend({}, tempObj, {}, true);\n    };\n    ImageEditor.prototype.drawObject = function (canvas, obj, isCropRatio, points, isPreventDrag, saveContext) {\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        var canvasDraw;\n        if (canvas.toLowerCase() === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else if (canvas.toLowerCase() === 'duplicate') {\n            canvasDraw = this.upperContext;\n        }\n        else if (!isNullOrUndefined(saveContext)) {\n            canvasDraw = saveContext;\n        }\n        if (!isPreventDrag && !isNullOrUndefined(this.activeObj.shape)) {\n            this.setDragLimit();\n        }\n        if (this.currObjType.isLine && canvas !== 'original' && !obj) {\n            this.lineDraw();\n        }\n        var splitWords = this.currObjType.shape.split('-');\n        if (splitWords[0].toLowerCase() === 'crop' && isCropRatio) {\n            this.drawCropRatio();\n        }\n        if (points) {\n            this.activeObj.activePoint.startX = points.startX;\n            this.activeObj.activePoint.startY = points.startY;\n            this.activeObj.activePoint.endX = points.endX;\n            this.activeObj.activePoint.endY = points.endY;\n            this.activeObj.activePoint.width = points.width;\n            this.activeObj.activePoint.height = points.height;\n        }\n        if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n            this.activeObj.strokeSettings = this.strokeSettings;\n        }\n        if (isNullOrUndefined(this.activeObj.strokeSettings.strokeWidth)) {\n            this.activeObj.strokeSettings.strokeWidth = 4;\n        }\n        if (obj) {\n            this.activeObj = extend({}, obj, {}, true);\n        }\n        this.updateActiveObject();\n        if (this.currObjType.isText) {\n            this.activeObj.keyHistory = this.keyHistory;\n        }\n        if (canvas.toLowerCase() !== 'original') {\n            var splitWords_2;\n            var isCrop = false;\n            if (this.activeObj.shape) {\n                splitWords_2 = this.activeObj.shape.split('-');\n                if (splitWords_2[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            if (isCrop) {\n                this.upperContext.fillStyle = 'rgb(0, 0, 0, 0.5)';\n                this.upperContext.fillRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                this.upperContext.clearRect(this.activeObj.activePoint.startX, this.activeObj.activePoint.startY, this.activeObj.activePoint.width, this.activeObj.activePoint.height);\n            }\n            if (canvasDraw === this.lowerContext || canvasDraw === this.upperContext) {\n                this.drawOuterSelection(canvasDraw);\n            }\n        }\n        this.currObjType.isActiveObj = true;\n        if (obj) {\n            this.drawShapeObj(canvas, obj.shape, saveContext);\n        }\n        else if (this.keyHistory !== '' && this.currObjType.isText) {\n            this.drawShapeObj(canvas, 'text', saveContext);\n        }\n        else if (this.activeObj.shape) {\n            this.drawShapeObj(canvas, this.activeObj.shape, saveContext);\n        }\n        else {\n            this.drawShapeObj(canvas, undefined, saveContext);\n        }\n        if (this.isAllowCropPan) {\n            this.isAllowCropPan = false;\n            this.tempPanMove = extend({}, this.panMove, {}, true);\n            this.currentPannedPoint = this.updatePanPoints(this.getCurrentPanRegion());\n            this.rotatePan();\n        }\n    };\n    ImageEditor.prototype.rotateShape = function (canvasDraw) {\n        canvasDraw.beginPath();\n        canvasDraw.moveTo(this.activeObj.horTopLine.startX, this.activeObj.horTopLine.startY);\n        canvasDraw.lineTo(this.activeObj.horTopLine.endX, this.activeObj.horTopLine.endY);\n        canvasDraw.moveTo(this.activeObj.horBottomLine.startX, this.activeObj.horBottomLine.startY);\n        canvasDraw.lineTo(this.activeObj.horBottomLine.endX, this.activeObj.horBottomLine.endY);\n        canvasDraw.moveTo(this.activeObj.verLeftLine.startX, this.activeObj.verLeftLine.startY);\n        canvasDraw.lineTo(this.activeObj.verLeftLine.endX, this.activeObj.verLeftLine.endY);\n        canvasDraw.moveTo(this.activeObj.verRightLine.startX, this.activeObj.verRightLine.startY);\n        canvasDraw.lineTo(this.activeObj.verRightLine.endX, this.activeObj.verRightLine.endY);\n        canvasDraw.stroke();\n    };\n    ImageEditor.prototype.updateActiveObject = function (actPoint, obj, isMouseMove, x, y) {\n        actPoint = actPoint ? actPoint : extend({}, this.activeObj.activePoint, {}, true);\n        obj = obj ? obj : extend({}, this.activeObj, {}, true);\n        actPoint.width = actPoint.endX - actPoint.startX;\n        actPoint.height = actPoint.endY - actPoint.startY;\n        x = x ? x : 0;\n        y = y ? y : 0;\n        var horCircleWidth = actPoint.width / 2;\n        var verCircleHeight = actPoint.height / 2;\n        var radius = 7.5;\n        obj.horTopLine = { startX: actPoint.startX + x, startY: actPoint.startY - y,\n            endX: actPoint.endX + x, endY: actPoint.endY + y };\n        obj.horBottomLine = { startX: actPoint.startX - x, startY: actPoint.endY - y,\n            endX: actPoint.endX - x, endY: actPoint.endY + y };\n        obj.verLeftLine = { startX: actPoint.startX + x, startY: actPoint.startY - y,\n            endX: actPoint.startX - y, endY: actPoint.endY - y };\n        obj.verRightLine = { startX: actPoint.endX + x, startY: actPoint.startY + y,\n            endX: actPoint.endX - x, endY: actPoint.endY + y };\n        obj.topLeftCircle = { startX: actPoint.startX, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.topCenterCircle = { startX: actPoint.startX + horCircleWidth, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.topRightCircle = { startX: actPoint.endX, startY: actPoint.startY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.centerLeftCircle = { startX: actPoint.startX, startY: actPoint.startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.centerRightCircle = { startX: actPoint.endX, startY: actPoint.startY + verCircleHeight,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomLeftCircle = { startX: actPoint.startX, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomCenterCircle = { startX: actPoint.startX + horCircleWidth, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.bottomRightCircle = { startX: actPoint.endX, startY: actPoint.endY,\n            radius: obj.horTopLine.endX ? (radius) : 0 };\n        obj.activePoint = actPoint;\n        if (isNullOrUndefined(isMouseMove)) {\n            this.activeObj = extend({}, obj, {}, true);\n        }\n    };\n    ImageEditor.prototype.drawShapeObj = function (canvas, shape, saveContext) {\n        var currentShape = shape !== undefined ? shape : this.currObjType.shape;\n        this.currObjType.shape = currentShape;\n        var canvasDraw;\n        if (canvas.toLowerCase() === 'original') {\n            canvasDraw = this.lowerContext;\n        }\n        else if (canvas.toLowerCase() === 'duplicate') {\n            canvasDraw = this.upperContext;\n        }\n        else if (!isNullOrUndefined(saveContext)) {\n            canvasDraw = saveContext;\n        }\n        if (this.currObjType.shape.toLowerCase() === 'rectangle' || this.currObjType.shape.toLowerCase() === 'ellipse'\n            || this.currObjType.shape.toLowerCase() === 'line') {\n            this.activeObj.shape = this.currObjType.shape;\n        }\n        canvasDraw.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n        if (shape === 'text' || shape === 'freehanddraw') {\n            canvasDraw.fillStyle = this.activeObj.strokeSettings.strokeColor;\n        }\n        else {\n            canvasDraw.fillStyle = this.activeObj.strokeSettings.fillColor;\n        }\n        var horLineWidth = this.activeObj.activePoint.width / 3;\n        var verLineHeight = this.activeObj.activePoint.height / 3;\n        var selectionWidth = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        var selectionHeight = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        switch (this.currObjType.shape.toLowerCase()) {\n            case 'rectangle':\n                this.drawSquareLines(canvasDraw);\n                if (canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'ellipse':\n                selectionWidth = Math.abs(selectionWidth);\n                selectionHeight = Math.abs(selectionHeight);\n                canvasDraw.beginPath();\n                canvasDraw.ellipse(this.activeObj.activePoint.startX + (selectionWidth / 2), this.activeObj.activePoint.startY + (selectionHeight / 2), selectionWidth / 2, selectionHeight / 2, 0, 0, 2 * Math.PI, false);\n                if (this.activeObj.strokeSettings.fillColor !== '') {\n                    canvasDraw.fillStyle = this.activeObj.strokeSettings.fillColor;\n                    canvasDraw.fill();\n                }\n                canvasDraw.ellipse(this.activeObj.activePoint.startX + (selectionWidth / 2), this.activeObj.activePoint.startY + (selectionHeight / 2), Math.abs((selectionWidth / 2) - (this.activeObj.strokeSettings.strokeWidth)), Math.abs((selectionHeight / 2) - (this.activeObj.strokeSettings.strokeWidth)), 0, 0, 2 * Math.PI, false);\n                canvasDraw.fillStyle = this.activeObj.strokeSettings.strokeColor;\n                canvasDraw.fill('evenodd');\n                canvasDraw.closePath();\n                if (canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'crop-circle':\n                if (canvasDraw === this.lowerContext) {\n                    canvasDraw = this.upperContext;\n                }\n                this.shapeCircle(canvasDraw, selectionWidth, selectionHeight);\n                break;\n            case 'line':\n                this.shapeLine(canvasDraw, selectionWidth, selectionHeight);\n                if (canvasDraw === this.upperContext) {\n                    this.drawOuterSelection(canvasDraw);\n                }\n                break;\n            case 'text':\n                this.shapeText(canvasDraw);\n                break;\n            case 'crop-square':\n            case 'crop-3:4':\n            case 'crop-4:3':\n            case 'crop-6:9':\n            case 'crop-9:6':\n            case 'crop-9:16':\n            case 'crop-16:9':\n                if (canvasDraw === this.lowerContext) {\n                    canvasDraw = this.upperContext;\n                }\n                this.drawSelection(horLineWidth, verLineHeight);\n                this.currObjType.shape = '';\n                break;\n            default:\n                this.drawSelection(horLineWidth, verLineHeight);\n                break;\n        }\n    };\n    ImageEditor.prototype.shapeLine = function (canvasDraw, selectionWidth, selectionHeight) {\n        var startX;\n        var startY;\n        var endX;\n        var endY;\n        var degree;\n        if (this.activeObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - this.activeObj.shapeDegree;\n        }\n        if (degree === 0 || degree % 180 === 0) {\n            startX = this.activeObj.activePoint.startX;\n            startY = this.activeObj.activePoint.startY + (selectionHeight / 2);\n            endX = this.activeObj.activePoint.endX;\n            endY = this.activeObj.activePoint.startY + (selectionHeight / 2);\n        }\n        else {\n            startX = this.activeObj.activePoint.startX + (selectionWidth / 2);\n            startY = this.activeObj.activePoint.startY;\n            endX = this.activeObj.activePoint.startX + (selectionWidth / 2);\n            endY = this.activeObj.activePoint.endY;\n        }\n        var tempLineWidth = canvasDraw.lineWidth;\n        canvasDraw.lineWidth = (this.activeObj.strokeSettings.strokeWidth);\n        canvasDraw.beginPath();\n        switch (this.activeObj.lineDraw.toLowerCase()) {\n            case 'horizontal':\n            case 'vertical':\n                canvasDraw.moveTo(startX, startY);\n                canvasDraw.lineTo(endX, endY);\n                break;\n            case 'normal':\n                canvasDraw.moveTo(this.activeObj.horTopLine.startX, this.activeObj.horTopLine.startY);\n                canvasDraw.lineTo(this.activeObj.horBottomLine.endX, this.activeObj.horBottomLine.endY);\n                break;\n        }\n        canvasDraw.stroke();\n        canvasDraw.lineWidth = tempLineWidth;\n    };\n    ImageEditor.prototype.shapeText = function (canvasDraw) {\n        var rows = this.activeObj.keyHistory.split('\\n');\n        var height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n        var lineHeight = ((height * rows.length) - (this.activeObj.textSettings.fontSize * rows.length)) / rows.length;\n        for (var i = 0; i < rows.length; i++) {\n            var text = rows[i];\n            var yPoint = ((i + 1) * this.activeObj.textSettings.fontSize * 0.85) + (i * lineHeight);\n            if (this.degree === -360) {\n                this.degree = 0;\n            }\n            if (this.degree === 0 || this.degree === 180) {\n                if (this.activeObj.textSettings.fontSize > this.activeObj.activePoint.height) {\n                    this.activeObj.textSettings.fontSize = this.activeObj.activePoint.height -\n                        (this.activeObj.activePoint.height * 0.1);\n                }\n            }\n            else {\n                if (this.activeObj.textSettings.fontSize > this.activeObj.activePoint.width) {\n                    this.activeObj.textSettings.fontSize = this.activeObj.activePoint.width -\n                        (this.activeObj.activePoint.width * 0.1);\n                }\n            }\n            canvasDraw.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n            canvasDraw.fillStyle = this.activeObj.strokeSettings.strokeColor;\n            var textStyle = '';\n            if (this.activeObj.textSettings.bold) {\n                textStyle = 'bold ';\n            }\n            if (this.activeObj.textSettings.italic) {\n                textStyle = 'italic ';\n            }\n            if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n                textStyle = 'italic bold ';\n            }\n            canvasDraw.font = textStyle + this.activeObj.textSettings.fontSize + 'px' + ' ' + this.activeObj.textSettings.fontFamily;\n            if (this.activeObj.flipObjColl.length === 4) {\n                this.activeObj.flipObjColl = [];\n            }\n            for (var j = 0; j < this.activeObj.flipObjColl.length; j++) {\n                if (this.activeObj.flipObjColl[j].toLowerCase() === 'horizontal') {\n                    canvasDraw.translate(canvasDraw.canvas.width, 0);\n                    canvasDraw.scale(-1, 1);\n                    this.updateActPoint('horizontal', canvasDraw);\n                }\n                else if (this.activeObj.flipObjColl[j].toLowerCase() === 'vertical') {\n                    canvasDraw.translate(0, canvasDraw.canvas.height);\n                    canvasDraw.scale(1, -1);\n                    this.updateActPoint('vertical', canvasDraw);\n                }\n            }\n            if (this.activeObj.shapeDegree !== this.degree) {\n                this.rotateText(canvasDraw);\n            }\n            else {\n                canvasDraw.fillText(text, this.activeObj.activePoint.startX + this.activeObj.textSettings.fontSize * 0.1, this.activeObj.activePoint.startY + yPoint);\n            }\n            for (var k = 0; k < this.activeObj.flipObjColl.length; k++) {\n                if (this.activeObj.flipObjColl[k].toLowerCase() === 'horizontal') {\n                    canvasDraw.translate(canvasDraw.canvas.width, 0);\n                    canvasDraw.scale(-1, 1);\n                    this.updateActPoint('horizontal', canvasDraw);\n                }\n                else if (this.activeObj.flipObjColl[k].toLowerCase() === 'vertical') {\n                    canvasDraw.translate(0, canvasDraw.canvas.height);\n                    canvasDraw.scale(1, -1);\n                    this.updateActPoint('vertical', canvasDraw);\n                }\n            }\n        }\n        this.currObjType.isText = false;\n    };\n    ImageEditor.prototype.updateActPoint = function (degree, canvasDraw) {\n        if (degree.toLowerCase() === 'horizontal') {\n            if (this.activeObj.activePoint.startX <= canvasDraw.canvas.width / 2) {\n                this.activeObj.activePoint.startX = canvasDraw.canvas.width / 2 + ((canvasDraw.canvas.width / 2) -\n                    this.activeObj.activePoint.endX);\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n                this.updateActiveObject(this.activeObj.activePoint, this.activeObj);\n            }\n            else if (this.activeObj.activePoint.startX >= canvasDraw.canvas.width / 2) {\n                this.activeObj.activePoint.startX = canvasDraw.canvas.width - this.activeObj.activePoint.endX;\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n                this.updateActiveObject(this.activeObj.activePoint, this.activeObj);\n            }\n        }\n        else if (degree.toLowerCase() === 'vertical') {\n            if (this.activeObj.activePoint.startY <= canvasDraw.canvas.height / 2) {\n                this.activeObj.activePoint.startY = canvasDraw.canvas.height / 2 + ((canvasDraw.canvas.height / 2) -\n                    this.activeObj.activePoint.endY);\n                this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + this.activeObj.activePoint.height;\n                this.updateActiveObject(this.activeObj.activePoint, this.activeObj);\n            }\n            else if (this.activeObj.activePoint.startY >= canvasDraw.canvas.height / 2) {\n                this.activeObj.activePoint.startY = canvasDraw.canvas.height - this.activeObj.activePoint.endY;\n                this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + this.activeObj.activePoint.height;\n                this.updateActiveObject(this.activeObj.activePoint, this.activeObj);\n            }\n        }\n    };\n    ImageEditor.prototype.drawSquareLines = function (canvasDraw) {\n        var splitWords;\n        if (this.activeObj.shape !== undefined) {\n            splitWords = this.activeObj.shape.split('-');\n        }\n        if (splitWords[0] === 'crop') {\n            canvasDraw.strokeStyle = '#fff';\n        }\n        else {\n            canvasDraw.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n        }\n        canvasDraw.beginPath();\n        canvasDraw.rect(this.activeObj.activePoint.startX, this.activeObj.activePoint.startY, this.activeObj.activePoint.width, this.activeObj.activePoint.height);\n        if (this.activeObj.strokeSettings.fillColor !== '') {\n            canvasDraw.fillStyle = this.activeObj.strokeSettings.fillColor;\n            canvasDraw.fill();\n        }\n        canvasDraw.rect(this.activeObj.activePoint.startX + this.activeObj.strokeSettings.strokeWidth, this.activeObj.activePoint.startY + this.activeObj.strokeSettings.strokeWidth, this.activeObj.activePoint.width - (2 * this.activeObj.strokeSettings.strokeWidth), this.activeObj.activePoint.height - (2 * this.activeObj.strokeSettings.strokeWidth));\n        canvasDraw.fillStyle = this.activeObj.strokeSettings.strokeColor;\n        canvasDraw.fill('evenodd');\n        canvasDraw.closePath();\n    };\n    ImageEditor.prototype.drawSelection = function (horLineWidth, verLineHeight) {\n        this.upperContext.strokeStyle = this.themeColl[this.theme]['primaryColor'];\n        this.upperContext.beginPath();\n        this.activeObj.horTopInnerLine = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY +\n                verLineHeight, endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY + verLineHeight };\n        this.activeObj.horBottomInnerLine = { startX: this.activeObj.activePoint.startX, startY: this.activeObj.activePoint.startY +\n                (2 * verLineHeight), endX: this.activeObj.activePoint.endX, endY: this.activeObj.activePoint.endY + (2 * verLineHeight) };\n        this.activeObj.verLeftInnerLine = { startX: this.activeObj.activePoint.startX + horLineWidth,\n            startY: this.activeObj.activePoint.startY, endX: this.activeObj.activePoint.startX + horLineWidth,\n            endY: this.activeObj.activePoint.endY };\n        this.activeObj.verRightInnerLine = { startX: this.activeObj.activePoint.startX + (2 * horLineWidth),\n            startY: this.activeObj.activePoint.startY, endX: this.activeObj.activePoint.startX + (2 * horLineWidth),\n            endY: this.activeObj.activePoint.endY };\n        this.upperContext.moveTo(this.activeObj.horTopInnerLine.startX, this.activeObj.horTopInnerLine.startY);\n        this.upperContext.lineTo(this.activeObj.horTopInnerLine.endX, this.activeObj.horTopInnerLine.startY);\n        this.upperContext.moveTo(this.activeObj.horBottomInnerLine.startX, this.activeObj.horBottomInnerLine.startY);\n        this.upperContext.lineTo(this.activeObj.horBottomInnerLine.endX, this.activeObj.horBottomInnerLine.startY);\n        this.upperContext.moveTo(this.activeObj.verLeftInnerLine.startX, this.activeObj.verLeftInnerLine.startY);\n        this.upperContext.lineTo(this.activeObj.verLeftInnerLine.endX, this.activeObj.verLeftInnerLine.endY);\n        this.upperContext.moveTo(this.activeObj.verRightInnerLine.startX, this.activeObj.verRightInnerLine.startY);\n        this.upperContext.lineTo(this.activeObj.verRightInnerLine.endX, this.activeObj.verRightInnerLine.endY);\n        this.upperContext.stroke();\n        this.upperContext.closePath();\n    };\n    ImageEditor.prototype.drawCenterCircles = function (canvasDraw) {\n        canvasDraw.lineWidth *= 2;\n        canvasDraw.beginPath();\n        canvasDraw.moveTo(this.activeObj.topCenterCircle.startX, this.activeObj.topCenterCircle.startY);\n        canvasDraw.arc(this.activeObj.topCenterCircle.startX, this.activeObj.topCenterCircle.startY, this.activeObj.topCenterCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(this.activeObj.centerLeftCircle.startX, this.activeObj.centerLeftCircle.startY);\n        canvasDraw.arc(this.activeObj.centerLeftCircle.startX, this.activeObj.centerLeftCircle.startY, this.activeObj.centerLeftCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(this.activeObj.centerRightCircle.startX, this.activeObj.centerRightCircle.startY);\n        canvasDraw.arc(this.activeObj.centerRightCircle.startX, this.activeObj.centerRightCircle.startY, this.activeObj.centerRightCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.moveTo(this.activeObj.bottomCenterCircle.startX, this.activeObj.bottomCenterCircle.startY);\n        canvasDraw.arc(this.activeObj.bottomCenterCircle.startX, this.activeObj.bottomCenterCircle.startY, this.activeObj.bottomCenterCircle.radius, 0, 2 * Math.PI);\n        canvasDraw.stroke();\n        canvasDraw.fill();\n        canvasDraw.closePath();\n        canvasDraw.lineWidth /= 2;\n    };\n    ImageEditor.prototype.findTarget = function (x, y, type) {\n        if (type.toLowerCase() === 'mousedown' || type.toLowerCase() === 'touchstart') {\n            var splitWords = void 0;\n            var isCrop = false;\n            if (this.activeObj.shape) {\n                splitWords = this.activeObj.shape.split('-');\n                if (splitWords[0] === 'crop') {\n                    isCrop = true;\n                }\n            }\n            this.findTargetObj(x, y, isCrop);\n            this.updateCursorStyles(x, y, type);\n        }\n        else {\n            switch (this.dragElement.toLowerCase()) {\n                case 'nw-resize':\n                    this.activeObj.topLeftCircle.startX = x;\n                    this.activeObj.topLeftCircle.startY = y;\n                    break;\n                case 'n-resize':\n                    this.activeObj.topCenterCircle.startX = x;\n                    this.activeObj.topCenterCircle.startY = y;\n                    break;\n                case 'ne-resize':\n                    this.activeObj.topRightCircle.startX = x;\n                    this.activeObj.topRightCircle.startY = y;\n                    break;\n                case 'w-resize':\n                    this.activeObj.centerLeftCircle.startX = x;\n                    this.activeObj.centerLeftCircle.startY = y;\n                    break;\n                case 'e-resize':\n                    this.activeObj.centerRightCircle.startX = x;\n                    this.activeObj.centerRightCircle.startY = y;\n                    break;\n                case 'sw-resize':\n                    this.activeObj.bottomLeftCircle.startX = x;\n                    this.activeObj.bottomLeftCircle.startY = y;\n                    break;\n                case 's-resize':\n                    this.activeObj.bottomCenterCircle.startX = x;\n                    this.activeObj.bottomCenterCircle.startY = y;\n                    break;\n                case 'se-resize':\n                    this.activeObj.bottomRightCircle.startX = x;\n                    this.activeObj.bottomRightCircle.startY = y;\n                    break;\n                default:\n                    if (this.dragPoint.startX && this.dragPoint.startY) {\n                        this.previousPoint.x = this.dragPoint.endX;\n                        this.previousPoint.y = this.dragPoint.endY;\n                        this.dragPoint.endX = x;\n                        this.dragPoint.endY = y;\n                    }\n                    break;\n            }\n        }\n    };\n    ImageEditor.prototype.findTargetObj = function (x, y, isCrop) {\n        var isShape;\n        if (this.objColl.length !== 0 && !this.currObjType.isCustomCrop && !isCrop) {\n            var diffX = 0;\n            var i = void 0;\n            for (var index = 0; index < this.objColl.length; index++) {\n                var actObj = extend({}, this.objColl[index], {}, true);\n                if (x >= (actObj.activePoint.startX - (actObj.topLeftCircle.radius * 2)) &&\n                    x <= (actObj.activePoint.endX + (actObj.topLeftCircle.radius * 2)) &&\n                    y >= (actObj.activePoint.startY - (actObj.topLeftCircle.radius * 2)) &&\n                    y <= (actObj.activePoint.endY + (actObj.topLeftCircle.radius * 2))) {\n                    if (this.isTouch || this.upperCanvas.style.cursor === 'move' || this.upperCanvas.style.cursor === 'grab' || this.isShapeInserted) {\n                        if (diffX === 0 || diffX > x - actObj.activePoint.startX) {\n                            diffX = x - this.objColl[index].activePoint.startX;\n                            i = index;\n                        }\n                    }\n                    else if (this.objColl[index].currIndex === this.tempActiveObj.currIndex) {\n                        i = index;\n                    }\n                }\n            }\n            if (isNullOrUndefined(i)) {\n                this.refreshActiveObj();\n                isShape = false;\n            }\n            else {\n                this.tempObjColl = extend([], this.objColl, [], true);\n                this.currObjType.isCustomCrop = false;\n                this.activeObj = extend({}, this.objColl[i], {}, true);\n                var temp = extend({}, this.objColl[i], {}, true);\n                this.objColl.splice(i, 1);\n                if (this.degree === 0) {\n                    this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                    this.updateBrightnessFilter();\n                    this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n                    var temp_2 = this.lowerContext.filter;\n                    this.lowerContext.filter = 'none';\n                    this.iterateObjColl();\n                    this.activeObj = extend({}, temp_2, {}, true);\n                    this.freehandRedraw(this.lowerContext);\n                    this.lowerContext.filter = temp_2;\n                    this.getCurrentFlipState();\n                }\n                else {\n                    this.callUpdateCurrentTransformedState();\n                    this.freehandRedraw(this.lowerContext);\n                }\n                this.clearOuterCanvas(this.lowerContext);\n                if ((!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle') || this.isCircleCrop) {\n                    this.cropCircle(this.lowerContext);\n                }\n                this.setActivePoint();\n                this.activeObj = extend({}, temp, {}, true);\n                this.tempStrokeSettings = extend({}, this.activeObj.strokeSettings, {}, true);\n                this.tempTextSettings = extend({}, this.activeObj.textSettings, {}, true);\n                var shapeSettings = this.updatePreviousShapeSettings();\n                var shapeChangingArgs = { action: 'select', previousShapeSettings: shapeSettings,\n                    currentShapeSettings: shapeSettings };\n                this.trigger('shapeChanging', shapeChangingArgs);\n                this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n                if (this.activeObj.activePoint) {\n                    this.drawObject('duplicate', this.activeObj, null, null, true);\n                    if (this.activeObj.activePoint.startX < this.destLeft) {\n                        this.isPreventDragging = true;\n                    }\n                    else if (this.activeObj.activePoint.endX > this.destLeft + this.destWidth) {\n                        this.isPreventDragging = true;\n                    }\n                    else if (this.activeObj.activePoint.startY < this.destTop) {\n                        this.isPreventDragging = true;\n                    }\n                    else if (this.activeObj.activePoint.endY > this.destTop + this.destHeight) {\n                        this.isPreventDragging = true;\n                    }\n                }\n                isShape = true;\n            }\n        }\n        return isShape;\n    };\n    ImageEditor.prototype.getCurrentFlipState = function () {\n        if (this.rotateFlipColl.length !== 0) {\n            var totalPannedInternalPoint = extend({}, this.totalPannedInternalPoint, {}, true);\n            this.callUpdateCurrentTransformedState();\n            this.totalPannedInternalPoint = totalPannedInternalPoint;\n        }\n        else {\n            this.callUpdateCurrentTransformedState();\n        }\n    };\n    ImageEditor.prototype.rotateDegree = function (degree) {\n        this.lowerContext.save();\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.lowerContext.translate(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2);\n        this.lowerContext.rotate(Math.PI / 180 * degree);\n        this.lowerContext.translate(-this.lowerCanvas.width / 2, -this.lowerCanvas.height / 2);\n        var temp = this.lowerContext.filter;\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.lowerContext.filter = temp;\n        this.lowerContext.translate(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2);\n        this.lowerContext.rotate(Math.PI / 180 * -degree);\n        this.lowerContext.translate(-this.lowerCanvas.width / 2, -this.lowerCanvas.height / 2);\n        this.lowerContext.restore();\n    };\n    ImageEditor.prototype.updateCursorStyles = function (x, y, type) {\n        var isResize = false;\n        if (this.activeObj.keyHistory !== '' && this.activeObj.shape === undefined && !this.currObjType.isCustomCrop &&\n            !this.currObjType.isLine && this.currObjType.isText) {\n            this.activeObj.shape = 'text';\n        }\n        var actObj = extend({}, this.activeObj, {}, true);\n        if (isNullOrUndefined(actObj.topLeftCircle)) {\n            return;\n        }\n        if (x >= (actObj.topLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n            x <= (actObj.topLeftCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n            y >= (actObj.topLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n            y <= (actObj.topLeftCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'nw-resize') {\n            actObj.topLeftCircle.startX = actObj.topLeftCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'nw-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.topCenterCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n            x <= (actObj.topCenterCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n            y >= (actObj.topCenterCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n            y <= (actObj.topCenterCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'n-resize') {\n            actObj.topCenterCircle.startX = actObj.topCenterCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'n-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.topRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n            x <= (actObj.topRightCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n            y >= (actObj.topRightCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n            y <= (actObj.topRightCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'ne-resize') {\n            actObj.topRightCircle.startX = actObj.topRightCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'ne-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.centerLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n            x <= (actObj.centerLeftCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n            y >= (actObj.centerLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n            y <= (actObj.centerLeftCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'w-resize') {\n            actObj.centerLeftCircle.startX = actObj.centerLeftCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'w-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.centerRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n            x <= (actObj.centerRightCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n            y >= (actObj.centerRightCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n            y <= (actObj.centerRightCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'e-resize') {\n            actObj.centerRightCircle.startX = actObj.centerRightCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'e-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.bottomLeftCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n            x <= (actObj.bottomLeftCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n            y >= (actObj.bottomLeftCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n            y <= (actObj.bottomLeftCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'sw-resize') {\n            actObj.bottomLeftCircle.startX = actObj.bottomLeftCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'sw-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.bottomCenterCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n            x <= (actObj.bottomCenterCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n            y >= (actObj.bottomCenterCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n            y <= (actObj.bottomCenterCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 's-resize') {\n            actObj.bottomCenterCircle.startX = actObj.bottomCenterCircle.startY = 0;\n            this.upperCanvas.style.cursor = 's-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else if (x >= (actObj.bottomRightCircle.startX - (actObj.topLeftCircle.radius * 2)) &&\n            x <= (actObj.bottomRightCircle.startX + (actObj.topLeftCircle.radius * 2)) &&\n            y >= (actObj.bottomRightCircle.startY - (actObj.topLeftCircle.radius * 2)) &&\n            y <= (actObj.bottomRightCircle.startY + (actObj.topLeftCircle.radius * 2)) && this.dragElement !== 'se-resize') {\n            actObj.bottomRightCircle.startX = actObj.bottomRightCircle.startY = 0;\n            this.upperCanvas.style.cursor = 'se-resize';\n            isResize = true;\n            this.dragElement = this.upperCanvas.style.cursor;\n        }\n        else {\n            this.dragPoint.startX = this.previousPoint.x = this.dragPoint.endX = x;\n            this.dragPoint.startY = this.previousPoint.y = this.dragPoint.endY = y;\n        }\n        this.previousPoint.x = this.previousPoint.y = this.diffPoint.x = this.diffPoint.y = 0;\n        if (type === 'touchstart') {\n            if (isResize || (x >= actObj.activePoint.startX && x <= actObj.activePoint.endX\n                && y >= actObj.activePoint.startY && y <= actObj.activePoint.endY)) {\n                this.currObjType.isDragging = true;\n            }\n        }\n        else {\n            this.currObjType.isDragging = true;\n        }\n    };\n    ImageEditor.prototype.drawCropRatio = function () {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.zoomFactor > 0 && !isNullOrUndefined(this.currentSelectionPoint)) {\n            //width = this.currentSelectionPoint.activePoint.width; height = this.currentSelectionPoint.activePoint.height;\n            if (this.destLeft + this.destLeft + this.destWidth <= this.lowerCanvas.clientWidth) {\n                width = this.destWidth;\n                if (this.destLeft < 0) {\n                    width += (2 * this.destLeft);\n                }\n            }\n            else {\n                width = this.lowerCanvas.clientWidth;\n            }\n            if (this.destTop + this.destTop + this.destHeight <= this.lowerCanvas.clientHeight) {\n                height = this.destHeight;\n                if (this.destTop < 0) {\n                    height += (2 * this.destTop);\n                }\n            }\n            else {\n                height = this.lowerCanvas.clientHeight;\n            }\n            if (this.degree !== 0) {\n                this.isAllowCropPan = true;\n            }\n        }\n        else {\n            width = this.destWidth;\n            height = this.destHeight;\n            if (this.destLeft < 0) {\n                width += this.destLeft;\n            }\n            if (this.destTop < 0) {\n                height += this.destTop;\n            }\n            if (this.currObjType.shape.toLowerCase() !== 'crop-square' && this.currObjType.shape.toLowerCase() !== 'crop-circle') {\n                if (this.destLeft + this.destWidth > this.lowerCanvas.width) {\n                    width -= (this.destLeft + this.destWidth - this.lowerCanvas.width);\n                }\n                if (this.destTop + this.destHeight > this.lowerCanvas.height) {\n                    height -= (this.destTop + this.destHeight - this.lowerCanvas.height);\n                }\n            }\n        }\n        switch (this.currObjType.shape.toLowerCase()) {\n            case 'crop-square':\n            case 'crop-circle':\n                this.setDragDirection(width, height);\n                if (width === this.destWidth && height === this.destHeight) {\n                    this.activeObj.activePoint.startX += this.destLeft;\n                    this.activeObj.activePoint.startY += this.destTop;\n                    this.activeObj.activePoint.endX += this.destLeft;\n                    this.activeObj.activePoint.endY += this.destTop;\n                }\n                if (this.lowerCanvas.width > this.lowerCanvas.height) {\n                    this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n                    this.activeObj.activePoint.width = this.activeObj.activePoint.height;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n                }\n                else {\n                    this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                    this.activeObj.activePoint.height = this.activeObj.activePoint.width;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + this.activeObj.activePoint.height;\n                }\n                break;\n            case 'crop-3:2':\n                x = 3;\n                y = 2;\n                break;\n            case 'crop-4:3':\n                x = 4;\n                y = 3;\n                break;\n            case 'crop-5:4':\n                x = 5;\n                y = 4;\n                break;\n            case 'crop-7:5':\n                x = 7;\n                y = 5;\n                break;\n            case 'crop-16:9':\n                x = 16;\n                y = 9;\n                break;\n        }\n        if (x !== undefined && y !== undefined) {\n            this.calcShapeRatio(x, y, width, height);\n            if (width === this.destWidth && height === this.destHeight) {\n                this.updatePoints();\n            }\n        }\n        // Set Selection inside image\n        if (!isNullOrUndefined(this.currentSelectionPoint)) {\n            if (this.activeObj.activePoint.startX < this.currentSelectionPoint.activePoint.startX) {\n                var diff = this.currentSelectionPoint.activePoint.startX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.startX += diff;\n                this.activeObj.activePoint.endX += diff;\n            }\n            if (this.activeObj.activePoint.startY < this.currentSelectionPoint.activePoint.startY) {\n                var diff = this.currentSelectionPoint.activePoint.startY - this.activeObj.activePoint.startY;\n                this.activeObj.activePoint.startY += diff;\n                this.activeObj.activePoint.endY += diff;\n            }\n            if (this.activeObj.activePoint.endX > this.currentSelectionPoint.activePoint.endX) {\n                var diff = this.activeObj.activePoint.endX - this.currentSelectionPoint.activePoint.endX;\n                this.activeObj.activePoint.startX -= diff;\n                this.activeObj.activePoint.endX -= diff;\n            }\n            if (this.activeObj.activePoint.endY > this.currentSelectionPoint.activePoint.endY) {\n                var diff = this.activeObj.activePoint.endY - this.currentSelectionPoint.activePoint.endY;\n                this.activeObj.activePoint.startY -= diff;\n                this.activeObj.activePoint.endY -= diff;\n            }\n            this.activeObj.activePoint.startX = (this.lowerCanvas.clientWidth - this.activeObj.activePoint.width) / 2;\n            this.activeObj.activePoint.startY = (this.lowerCanvas.clientHeight - this.activeObj.activePoint.height) / 2;\n            this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n            this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + this.activeObj.activePoint.height;\n        }\n        if (this.zoomFactor === 0) {\n            if (this.activeObj.activePoint.startX < this.destLeft) {\n                var diff = (this.destLeft - this.activeObj.activePoint.startX) + 7.5;\n                this.activeObj.activePoint.startX += diff;\n                this.activeObj.activePoint.endX += diff;\n            }\n            if (this.activeObj.activePoint.startY < this.destTop) {\n                var diff = (this.destTop - this.activeObj.activePoint.startY) + 7.5;\n                this.activeObj.activePoint.startY += diff;\n                this.activeObj.activePoint.endY += diff;\n            }\n            this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n            this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n        }\n    };\n    ImageEditor.prototype.setDragDirection = function (width, height) {\n        var arcRadius = (7.5);\n        if (this.destWidth > this.destHeight) {\n            this.activeObj.activePoint.startX = this.dragPoint.startX = ((width / 2) - (height / 2))\n                + arcRadius;\n            this.activeObj.activePoint.startY = this.dragPoint.startY = ((height / 2) - (height / 2))\n                + arcRadius;\n            this.activeObj.activePoint.endX = ((width / 2) + (height / 2)) - arcRadius;\n            this.activeObj.activePoint.endY = ((height / 2) + (height / 2)) - arcRadius;\n        }\n        else {\n            this.activeObj.activePoint.startY = this.dragPoint.startX = ((height / 2) - (width) / 2)\n                + arcRadius;\n            this.activeObj.activePoint.endY = ((height / 2) + (width) / 2) - arcRadius;\n            this.activeObj.activePoint.startX = this.dragPoint.startX = arcRadius;\n            this.activeObj.activePoint.endX = width - arcRadius;\n        }\n    };\n    ImageEditor.prototype.updatePoints = function () {\n        this.activeObj.activePoint.startX += this.destLeft;\n        this.activeObj.activePoint.startY += this.destTop;\n        this.activeObj.activePoint.endX += this.destLeft;\n        this.activeObj.activePoint.endY += this.destTop;\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n    };\n    ImageEditor.prototype.calcShapeRatio = function (x, y, imgWidth, imgHeight) {\n        var arcRadius = (7.5);\n        var originalWidth = imgWidth;\n        var originalHeight = imgHeight;\n        var presetRatio = x / y;\n        var standardSize = originalWidth >= originalHeight ? originalWidth : originalHeight;\n        var width = standardSize * presetRatio;\n        var height = standardSize;\n        var scaleWidth = this.getScale(width, originalWidth);\n        var snippetArray = [];\n        for (var i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray.push(width * scaleWidth);\n            }\n            else {\n                snippetArray.push(height * scaleWidth);\n            }\n        }\n        width = snippetArray[0];\n        height = snippetArray[1];\n        var scaleHeight = this.getScale(height, originalHeight);\n        var snippetArray1 = [];\n        for (var i = 0; i < 2; i++) {\n            if (i === 0) {\n                snippetArray1.push(width * scaleHeight);\n            }\n            else {\n                snippetArray1.push(height * scaleHeight);\n            }\n        }\n        width = snippetArray1[0];\n        height = snippetArray1[1];\n        this.activeObj.activePoint.width = width;\n        this.activeObj.activePoint.height = height;\n        this.activeObj.activePoint.startX = (this.dragPoint.startX = (originalWidth - width) / 2) + arcRadius;\n        this.activeObj.activePoint.startY = (this.dragPoint.startY = (originalHeight - height) / 2) + arcRadius;\n        this.activeObj.activePoint.endX = ((originalWidth - width) / 2 + width) - arcRadius;\n        this.activeObj.activePoint.endY = ((originalHeight - height) / 2 + height) - arcRadius;\n        if (this.activeObj.activePoint.startX < this.destLeft && this.destLeft + this.destWidth > this.lowerCanvas.clientWidth) {\n            this.activeObj.activePoint.startX = this.destLeft;\n            this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + width;\n        }\n        if (this.activeObj.activePoint.startY < this.destTop && this.destTop + this.destHeight > this.lowerCanvas.clientHeight) {\n            this.activeObj.activePoint.startY = this.destTop;\n            this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + height;\n        }\n        this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n        this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n    };\n    ImageEditor.prototype.getScale = function (value, originalValue) {\n        return value > originalValue ? originalValue / value : 1;\n    };\n    ImageEditor.prototype.calcMaxDimension = function (width, height) {\n        var canvasMaxWidth = this.element.clientWidth;\n        var canvasMaxHeight = this.element.clientHeight - this.toolbarHeight;\n        canvasMaxHeight = Browser.isDevice ? canvasMaxHeight - this.toolbarHeight : canvasMaxHeight;\n        canvasMaxWidth -= 30;\n        canvasMaxHeight -= 30;\n        var widthScale = canvasMaxWidth / width;\n        var heightScale = canvasMaxHeight / height;\n        var cssMaxWidth = Math.min(width, canvasMaxWidth);\n        var cssMaxHeight = Math.min(height, canvasMaxHeight);\n        if (widthScale < 1 && widthScale < heightScale) {\n            cssMaxWidth = width * widthScale;\n            cssMaxHeight = height * widthScale;\n        }\n        else if (heightScale < 1 && heightScale < widthScale) {\n            cssMaxWidth = width * heightScale;\n            cssMaxHeight = height * heightScale;\n        }\n        return { width: cssMaxWidth, height: cssMaxHeight };\n    };\n    ImageEditor.prototype.setMaximumDimension = function (degree, tempCanvas) {\n        var newWidth;\n        var newHeight;\n        if (degree % 90 === 0 && degree % 180 !== 0) {\n            newWidth = this.baseImg.height;\n            newHeight = this.baseImg.width;\n        }\n        else if (degree % 180 === 0 || degree === 0) {\n            newWidth = this.baseImg.width;\n            newHeight = this.baseImg.height;\n        }\n        tempCanvas.width = newWidth;\n        tempCanvas.height = newHeight;\n        var maxDimension = this.calcMaxDimension(newWidth, newHeight);\n        tempCanvas.style.maxWidth = maxDimension.width + 'px';\n        tempCanvas.style.maxHeight = maxDimension.height + 'px';\n    };\n    ImageEditor.prototype.setCursor = function (x, y) {\n        var isCropSelection = false;\n        var splitWords;\n        if (this.activeObj.horTopLine !== undefined) {\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && this.currObjType.isCustomCrop) {\n                isCropSelection = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (!isCropSelection && this.togglePan) {\n                this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'grab';\n            }\n            var cursor = this.upperCanvas.style.cursor;\n            var actObj = extend({}, this.activeObj, {}, true);\n            if (x >= (actObj.topLeftCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.topLeftCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.topLeftCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.topLeftCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'nw-resize';\n            }\n            else if (x >= (actObj.topCenterCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.topCenterCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.topCenterCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.topCenterCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'n-resize';\n            }\n            else if (x >= (actObj.topRightCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.topRightCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.topRightCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.topRightCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'ne-resize';\n            }\n            else if (x >= (actObj.centerLeftCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.centerLeftCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.centerLeftCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.centerLeftCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'w-resize';\n            }\n            else if (x >= (actObj.centerRightCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.centerRightCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.centerRightCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.centerRightCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'e-resize';\n            }\n            else if (x >= (actObj.bottomLeftCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.bottomLeftCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.bottomLeftCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.bottomLeftCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'sw-resize';\n            }\n            else if (x >= (actObj.bottomCenterCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.bottomCenterCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.bottomCenterCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.bottomCenterCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 's-resize';\n            }\n            else if (x >= (actObj.bottomRightCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.bottomRightCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.bottomRightCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.bottomRightCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'se-resize';\n            }\n            else if ((x >= actObj.activePoint.startX &&\n                x <= actObj.activePoint.endX) && (y >= actObj.activePoint.startY &&\n                y <= actObj.activePoint.endY)) {\n                if (isCropSelection) {\n                    this.upperCanvas.style.cursor = 'grab';\n                }\n                else {\n                    this.upperCanvas.style.cursor = 'move';\n                }\n            }\n            else {\n                if (this.currObjType.isCustomCrop) {\n                    this.upperCanvas.style.cursor = 'crosshair';\n                }\n                this.upperCanvas.style.cursor = 'default';\n            }\n            if (cursor === 'default' && this.upperCanvas.style.cursor === 'default' && isCropSelection) {\n                this.upperCanvas.style.cursor = 'grab';\n            }\n            if (cursor === 'grab' && this.upperCanvas.style.cursor === 'default') {\n                this.upperCanvas.style.cursor = 'grab';\n            }\n        }\n        else if (this.togglePan && !this.togglePen) {\n            this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'grab';\n        }\n        else {\n            if (this.currObjType.isCustomCrop || this.togglePen) {\n                this.upperCanvas.style.cursor = 'crosshair';\n            }\n            else {\n                this.upperCanvas.style.cursor = 'default';\n            }\n        }\n        if (this.upperCanvas.style.cursor === 'default' || this.upperCanvas.style.cursor === 'grab') {\n            var cursor = this.upperCanvas.style.cursor;\n            if (this.objColl.length > 0 && (this.upperCanvas.style.cursor !== 'grab' || !isCropSelection)) {\n                this.setCursorFromObj(x, y, this.objColl);\n            }\n            if (cursor === 'grab' && this.upperCanvas.style.cursor === 'default') {\n                this.upperCanvas.style.cursor = 'grab';\n            }\n        }\n        if ((this.upperCanvas.style.cursor === 'default' || this.upperCanvas.style.cursor === 'grab')\n            && !isNullOrUndefined(this.pointColl[0]) && (this.upperCanvas.style.cursor !== 'grab' || !isCropSelection)) {\n            this.setCursorForFreehandDrawing(x, y);\n        }\n    };\n    ImageEditor.prototype.setCursorForFreehandDrawing = function (x, y) {\n        var isEntered = false;\n        this.freehandDrawHoveredIndex = -1;\n        for (var n = 0; n < this.freehandCounter; n++) {\n            this.points = extend([], this.pointColl[n].points, []);\n            this.pointCounter = 0;\n            var len = this.points.length;\n            for (var l = 0; l < len; l++) {\n                if (l !== 0) {\n                    var isInside = false;\n                    if (!isNullOrUndefined(this.points[l - 1]) && !isNullOrUndefined(this.points[l])) {\n                        isInside = this.isInside(x, y, this.points[l - 1].x, this.points[l - 1].y, this.points[l].x, this.points[l].y);\n                    }\n                    if (isInside) {\n                        this.isFreehandDrawingPoint = true;\n                        this.freehandDrawHoveredIndex = n;\n                        this.hoverFreehandraw();\n                        this.upperCanvas.style.cursor = 'pointer';\n                        isEntered = true;\n                        break;\n                    }\n                    else if (!this.isFreehandDrawEditing || this.pointColl[n].isSelected) {\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        if (!isNullOrUndefined(this.activeObj.shape) && this.textArea.style.display === 'none') {\n                            this.drawObject('duplicate', this.activeObj);\n                        }\n                        if (this.isFreehandDrawEditing) {\n                            var strokeColor = this.pointColl[n].strokeColor = this.selectedFreehandColor;\n                            this.hoverFreehandraw(strokeColor, this.pointColl[n].strokeWidth);\n                        }\n                        else {\n                            this.freehandDrawHoveredIndex = null;\n                        }\n                        this.isFreehandDrawingPoint = false;\n                    }\n                }\n                else {\n                    if (x > this.points[l].x - this.pointColl[n].strokeWidth &&\n                        x < this.points[l].x + this.pointColl[n].strokeWidth &&\n                        y > this.points[l].y - this.pointColl[n].strokeWidth &&\n                        y < this.points[l].y + this.pointColl[n].strokeWidth) {\n                        this.isFreehandDrawingPoint = true;\n                        this.freehandDrawHoveredIndex = n;\n                        this.hoverFreehandraw();\n                        this.upperCanvas.style.cursor = 'pointer';\n                        isEntered = true;\n                        break;\n                    }\n                    else if (!this.isFreehandDrawEditing || this.pointColl[n].isSelected) {\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        if (!isNullOrUndefined(this.activeObj.shape) && this.textArea.style.display === 'none') {\n                            this.drawObject('duplicate', this.activeObj);\n                        }\n                        if (this.isFreehandDrawEditing) {\n                            var strokeColor = this.pointColl[n].strokeColor === '#fff' ? '#42a5f5' : this.pointColl[n].strokeColor;\n                            this.hoverFreehandraw(strokeColor, this.pointColl[n].strokeWidth);\n                        }\n                        this.isFreehandDrawingPoint = false;\n                    }\n                }\n            }\n            if (isEntered) {\n                break;\n            }\n        }\n    };\n    ImageEditor.prototype.setCursorFromObj = function (x, y, obj) {\n        for (var i = 0; i < obj.length; i++) {\n            var actObj = extend({}, obj[i], {}, true);\n            if (x >= (actObj.topLeftCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.topLeftCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.topLeftCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.topLeftCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'nw-resize';\n                break;\n            }\n            else if (x >= (actObj.topCenterCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.topCenterCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.topCenterCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.topCenterCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'n-resize';\n                break;\n            }\n            else if (x >= (actObj.topRightCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.topRightCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.topRightCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.topRightCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'ne-resize';\n                break;\n            }\n            else if (x >= (actObj.centerLeftCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.centerLeftCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.centerLeftCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.centerLeftCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'w-resize';\n                break;\n            }\n            else if (x >= (actObj.centerRightCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.centerRightCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.centerRightCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.centerRightCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'e-resize';\n                break;\n            }\n            else if (x >= (actObj.bottomLeftCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.bottomLeftCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.bottomLeftCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.bottomLeftCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'sw-resize';\n                break;\n            }\n            else if (x >= (actObj.bottomCenterCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.bottomCenterCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.bottomCenterCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.bottomCenterCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 's-resize';\n                break;\n            }\n            else if (x >= (actObj.bottomRightCircle.startX - ((actObj.topLeftCircle.radius * 2))) &&\n                x <= (actObj.bottomRightCircle.startX + ((actObj.topLeftCircle.radius * 2))) &&\n                y >= (actObj.bottomRightCircle.startY - ((actObj.topLeftCircle.radius * 2))) &&\n                y <= (actObj.bottomRightCircle.startY + ((actObj.topLeftCircle.radius * 2)))) {\n                this.upperCanvas.style.cursor = 'se-resize';\n                break;\n            }\n            else if ((x >= actObj.activePoint.startX &&\n                x <= actObj.activePoint.endX) && (y >= actObj.activePoint.startY &&\n                y <= actObj.activePoint.endY)) {\n                this.upperCanvas.style.cursor = 'move';\n                break;\n            }\n            else {\n                if (this.currObjType.isCustomCrop) {\n                    this.upperCanvas.style.cursor = 'crosshair';\n                }\n                this.upperCanvas.style.cursor = 'default';\n            }\n        }\n    };\n    ImageEditor.prototype.isInside = function (x, y, z1, z2, z3, z4) {\n        var x1 = Math.min(z1, z3);\n        var x2 = Math.max(z1, z3);\n        var y1 = Math.min(z2, z4);\n        var y2 = Math.max(z2, z4);\n        if ((x1 <= x && x <= x2) && (y1 <= y && y <= y2)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    ImageEditor.prototype.refreshDropDownBtn = function (isDisabled) {\n        if (isNullOrUndefined(isDisabled)) {\n            return;\n        }\n        var annotation = document.querySelector('#' + this.element.id + '_annotationBtn');\n        if (!isNullOrUndefined(annotation)) {\n            if (isDisabled) {\n                annotation.classList.add('e-disabled');\n                annotation.parentElement.classList.add('e-overlay');\n            }\n            else {\n                annotation.classList.remove('e-disabled');\n                annotation.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(annotation, 'dropdown-btn').disabled = isDisabled;\n        }\n        var transform = document.querySelector('#' + this.element.id + '_transformBtn');\n        if (!isNullOrUndefined(transform)) {\n            if (isDisabled) {\n                transform.classList.add('e-disabled');\n                transform.parentElement.classList.add('e-overlay');\n            }\n            else {\n                transform.classList.remove('e-disabled');\n                transform.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(transform, 'dropdown-btn').disabled = isDisabled;\n        }\n        var adjustment = document.querySelector('#' + this.element.id + '_adjustment');\n        if (!isNullOrUndefined(adjustment)) {\n            if (isDisabled) {\n                adjustment.classList.add('e-disabled');\n                adjustment.parentElement.classList.add('e-overlay');\n            }\n            else {\n                adjustment.classList.remove('e-disabled');\n                adjustment.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(adjustment, 'btn').disabled = isDisabled;\n        }\n        var filter = document.querySelector('#' + this.element.id + '_filter');\n        if (!isNullOrUndefined(filter)) {\n            if (isDisabled) {\n                filter.classList.add('e-disabled');\n                filter.parentElement.classList.add('e-overlay');\n            }\n            else {\n                filter.classList.remove('e-disabled');\n                filter.parentElement.classList.remove('e-overlay');\n            }\n            getComponent(filter, 'btn').disabled = isDisabled;\n        }\n    };\n    ImageEditor.prototype.downloadImg = function (blob, fileName) {\n        var a = document.createElement('a');\n        a.href = blob;\n        a.target = '_parent';\n        a.download = fileName;\n        (document.body || document.documentElement).appendChild(a);\n        a.click();\n        a.parentNode.removeChild(a);\n    };\n    ImageEditor.prototype.toSVGImg = function (fileName) {\n        showSpinner(this.element);\n        this.element.style.opacity = '0.5';\n        var tempCanvas = this.exportChangesToCanvas();\n        var dataUrl = tempCanvas.toDataURL();\n        hideSpinner(this.element);\n        this.element.style.opacity = '1';\n        var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        svg.setAttribute('width', tempCanvas.style.maxWidth);\n        svg.setAttribute('height', tempCanvas.style.maxHeight);\n        var XLinkNS = 'http://www.w3.org/1999/xlink';\n        var img = document.createElementNS('http://www.w3.org/2000/svg', 'image');\n        img.setAttributeNS(null, 'height', tempCanvas.height.toString());\n        img.setAttributeNS(null, 'width', tempCanvas.width.toString());\n        img.setAttributeNS(XLinkNS, 'xlink:href', dataUrl);\n        svg.appendChild(img);\n        var prefix = 'data:image/svg+xml;base64,';\n        var header = '<svg' + ' xmlns=\"http://www.w3.org/2000/svg\"' + ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"'\n            + (\" width=\\\"\" + tempCanvas.width + \"\\\"\") + (\" height=\\\"\" + tempCanvas.height + \"\\\"\") + '>';\n        var footer = '</svg>';\n        var body = svg.innerHTML;\n        var data = header + body + footer;\n        var svgDataUrl = prefix + btoa(data);\n        if (fileName === null) {\n            return svgDataUrl;\n        }\n        else {\n            this.downloadImg(svgDataUrl, fileName + '.' + 'svg');\n            return null;\n        }\n    };\n    ImageEditor.prototype.toBlobFn = function (fileName, type) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        showSpinner(this.element);\n        this.element.style.opacity = '0.5';\n        var tempCanvas = this.exportChangesToCanvas();\n        // eslint-disable-next-line @typescript-eslint/tslint/config\n        tempCanvas.toBlob(function (blob) {\n            var blobUrl = URL.createObjectURL(blob);\n            proxy.downloadImg(blobUrl, fileName + '.' + type);\n            hideSpinner(proxy.element);\n            proxy.element.style.opacity = '1';\n        }, 'image/png');\n    };\n    ImageEditor.prototype.exportChangesToCanvas = function () {\n        var ratio = this.calcRatio();\n        var tempContextFilter = this.lowerContext.filter;\n        // Manipulating blur value\n        if (this.lowerContext.filter !== 'none') {\n            var splitWords = this.lowerContext.filter.split(' ');\n            var value = parseFloat(splitWords[5].split('(')[1]);\n            value *= ((ratio.width + ratio.height) / 2);\n            splitWords[5] = 'blur(' + value + 'px)';\n            this.lowerContext.filter = splitWords.join(' ');\n        }\n        var maxDimension;\n        var tempCanvas = this.createElement('canvas', {\n            id: this.element.id + '_tempCanvas', attrs: { name: 'canvasImage' }\n        });\n        var tempContext = tempCanvas.getContext('2d');\n        tempContext.filter = this.lowerContext.filter;\n        if (isNullOrUndefined(this.currSelectionPoint)) {\n            tempCanvas.width = this.baseImg.width;\n            tempCanvas.height = this.baseImg.height;\n            maxDimension = this.calcMaxDimension(this.baseImg.width, this.baseImg.height);\n            tempCanvas.style.maxWidth = maxDimension.width + 'px';\n            tempCanvas.style.maxHeight = maxDimension.height + 'px';\n            tempContext.filter = this.lowerContext.filter;\n            var temp = this.lowerContext.filter;\n            this.updateBrightnessFilter();\n            tempContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, 0, 0, this.baseImg.width, this.baseImg.height);\n            this.lowerContext.filter = temp;\n        }\n        else {\n            tempCanvas.width = this.destWidth;\n            tempCanvas.height = this.destHeight;\n            tempContext.filter = this.lowerContext.filter;\n            var temp = this.lowerContext.filter;\n            this.updateBrightnessFilter();\n            tempContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, 0, 0, this.destWidth, this.destHeight);\n            this.lowerContext.filter = temp;\n        }\n        if (this.degree !== 0 || this.currFlipState !== '') {\n            this.updateSaveContext(tempContext);\n            this.exportTransformedImage(tempContext);\n        }\n        if (this.objColl.length > 0) {\n            var temp = tempContext.filter;\n            tempContext.filter = 'none';\n            var tempObjColl = extend([], this.objColl, [], true);\n            for (var i = 0; i < this.objColl.length; i++) {\n                // Subtracting destination left and top points\n                this.objColl[i].activePoint.startX -= this.destLeft;\n                this.objColl[i].activePoint.startY -= this.destTop;\n                this.objColl[i].activePoint.endX -= this.destLeft;\n                this.objColl[i].activePoint.endY -= this.destTop;\n                this.objColl[i].activePoint.width = this.objColl[i].activePoint.endX -\n                    this.objColl[i].activePoint.startX;\n                this.objColl[i].activePoint.height = this.objColl[i].activePoint.endY -\n                    this.objColl[i].activePoint.startY;\n                // Manipulating points\n                if (isNullOrUndefined(this.currSelectionPoint)) {\n                    this.objColl[i].activePoint.startX *= ratio.width;\n                    this.objColl[i].activePoint.startY *= ratio.height;\n                    this.objColl[i].activePoint.endX *= ratio.width;\n                    this.objColl[i].activePoint.endY *= ratio.height;\n                    this.objColl[i].activePoint.width = this.objColl[i].activePoint.endX -\n                        this.objColl[i].activePoint.startX;\n                    this.objColl[i].activePoint.height = this.objColl[i].activePoint.endY -\n                        this.objColl[i].activePoint.startY;\n                    this.objColl[i].strokeSettings.strokeWidth *= ((ratio.width + ratio.height) / 2);\n                    if (this.objColl[i].shape === 'text') {\n                        this.objColl[i].textSettings.fontSize *= ((ratio.width + ratio.height) / 2);\n                    }\n                }\n                this.drawObject('saveContext', this.objColl[i], null, null, true, tempContext);\n            }\n            tempContext.filter = temp;\n            this.refreshActiveObj();\n            this.objColl = tempObjColl;\n        }\n        if (this.freehandCounter > 0) {\n            // eslint-disable-next-line\n            var tempPointColl = extend({}, this.pointColl, {}, true);\n            for (var n = 0; n < this.freehandCounter; n++) {\n                this.points = extend([], this.pointColl[n].points, []);\n                this.pointCounter = 0;\n                var len = this.points.length;\n                if (isNullOrUndefined(this.currSelectionPoint)) {\n                    this.pointColl[n].strokeWidth *= ((ratio.width + ratio.height) / 2);\n                    for (var l = 0; l < len; l++) {\n                        this.points[l].x = (this.points[l].x - this.destLeft) * ratio.width;\n                        this.points[l].y = (this.points[l].y - this.destTop) * ratio.height;\n                    }\n                }\n                else {\n                    for (var l = 0; l < len; l++) {\n                        this.points[l].x -= this.destLeft;\n                        this.points[l].y -= this.destTop;\n                    }\n                }\n            }\n            this.freehandRedraw(tempContext);\n            this.pointColl = tempPointColl;\n        }\n        if (this.isCircleCrop) {\n            this.cropCircle(tempContext, true);\n        }\n        this.lowerContext.filter = tempContextFilter;\n        return tempCanvas;\n    };\n    ImageEditor.prototype.exportTransformedImage = function (tempContext) {\n        var degree = this.degree;\n        for (var i = 0; i < this.rotateFlipColl.length; i++) {\n            if (typeof (this.rotateFlipColl[i]) === 'number') {\n                this.exportRotate(tempContext, this.rotateFlipColl[i]);\n            }\n            else if (this.rotateFlipColl[i] === 'horizontal') {\n                this.exportHorizontalFlip(tempContext);\n            }\n            else if (this.rotateFlipColl[i] === 'vertical') {\n                this.exportVerticalFlip(tempContext);\n            }\n        }\n        this.degree = degree;\n    };\n    ImageEditor.prototype.exportRotate = function (tempContext, degree) {\n        if (isNullOrUndefined(this.currSelectionPoint)) {\n            this.setMaximumDimension(this.degree, tempContext.canvas);\n            tempContext.translate(tempContext.canvas.width / 2, tempContext.canvas.height / 2);\n            tempContext.rotate(Math.PI / 180 * degree);\n            tempContext.drawImage(this.inMemoryCanvas, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, -tempContext.canvas.height / 2, -tempContext.canvas.width / 2, tempContext.canvas.height, tempContext.canvas.width);\n        }\n        else {\n            tempContext.translate(tempContext.canvas.width / 2, tempContext.canvas.height / 2);\n            tempContext.rotate(Math.PI / 180 * degree);\n            tempContext.drawImage(this.inMemoryCanvas, -tempContext.canvas.height / 2, -tempContext.canvas.width / 2, tempContext.canvas.height, tempContext.canvas.width);\n        }\n        this.updateSaveContext(tempContext);\n    };\n    ImageEditor.prototype.exportHorizontalFlip = function (tempContext) {\n        tempContext.translate(tempContext.canvas.width, 0);\n        tempContext.scale(-1, 1);\n        tempContext.drawImage(this.inMemoryCanvas, 0, 0);\n        this.updateSaveContext(tempContext);\n    };\n    ImageEditor.prototype.exportVerticalFlip = function (tempContext) {\n        tempContext.translate(0, tempContext.canvas.height);\n        tempContext.scale(1, -1);\n        tempContext.drawImage(this.inMemoryCanvas, 0, 0);\n        this.updateSaveContext(tempContext);\n    };\n    ImageEditor.prototype.updateSaveContext = function (tempContext) {\n        tempContext.setTransform(1, 0, 0, 1, 0, 0);\n        var imageData = tempContext.getImageData(0, 0, tempContext.canvas.width, tempContext.canvas.height);\n        this.inMemoryCanvas.width = imageData.width;\n        this.inMemoryCanvas.height = imageData.height;\n        this.inMemoryContext.putImageData(imageData, 0, 0);\n    };\n    ImageEditor.prototype.addLetter = function (letter) {\n        if (this.textArea.style.display === 'none' && (this.currObjType.isText || this.activeObj.shape === 'text')) {\n            if (letter === 'Backspace') {\n                this.keyHistory = this.keyHistory.slice(0, -1);\n            }\n            else {\n                this.keyHistory += letter;\n            }\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.updateFontStyles();\n            var width = this.upperContext.measureText(this.keyHistory + this.tempKeyHistory).width\n                + this.activeObj.textSettings.fontSize * 0.5;\n            var height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n            this.upperContext.fillText(this.keyHistory + this.tempKeyHistory, this.activeObj.activePoint.startX, this.activeObj.activePoint.startY +\n                this.activeObj.textSettings.fontSize);\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.currObjType.isText = true;\n            this.setActivePoint(width, height);\n        }\n    };\n    ImageEditor.prototype.updateFontStyles = function (isTextBox) {\n        this.upperContext.strokeStyle = this.activeObj.strokeSettings.strokeColor;\n        this.upperContext.fillStyle = this.activeObj.strokeSettings.strokeColor;\n        var textStyle = '';\n        if (this.activeObj.textSettings.bold) {\n            textStyle = 'bold ';\n        }\n        if (this.activeObj.textSettings.italic) {\n            textStyle = 'italic ';\n        }\n        if (this.activeObj.textSettings.bold && this.activeObj.textSettings.italic) {\n            textStyle = 'italic bold ';\n        }\n        var fontSize = isTextBox ? parseFloat(this.textArea.style.fontSize) : this.activeObj.textSettings.fontSize;\n        var fontFamily = this.textArea.style.display === 'block' ? this.textArea.style.fontFamily : this.activeObj.textSettings.fontFamily;\n        this.upperContext.font = textStyle + fontSize + 'px' + ' ' + fontFamily;\n    };\n    ImageEditor.prototype.textFlipDegree = function (canvasDraw, startX, startY) {\n        var rows = this.activeObj.keyHistory.split('\\n');\n        var height = this.activeObj.textSettings.fontSize;\n        var lineHeight = ((height * rows.length) - (this.activeObj.textSettings.fontSize * rows.length)) / rows.length;\n        var yPoint = (this.activeObj.textSettings.fontSize * 0.85) + lineHeight;\n        for (var i = 0; i < rows.length; i++) {\n            var text = rows[i];\n            if (i > 0) {\n                if (i === 1) {\n                    yPoint -= (this.activeObj.textSettings.fontSize * 0.85);\n                }\n                yPoint += this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.15;\n            }\n            canvasDraw.fillText(text, startX + this.activeObj.textSettings.fontSize * 0.15, startY +\n                yPoint + (i > 0 ? this.activeObj.textSettings.fontSize * 0.25 : -this.activeObj.textSettings.fontSize * 0.35));\n        }\n    };\n    ImageEditor.prototype.rotateText = function (canvasDraw) {\n        var startX = this.activeObj.activePoint.startX;\n        var startY = this.activeObj.activePoint.startY;\n        var degree;\n        if (this.activeObj.shapeDegree === 0) {\n            degree = this.degree;\n        }\n        else {\n            degree = this.degree - this.activeObj.shapeDegree;\n        }\n        if (degree < 0) {\n            degree = 360 + degree;\n        }\n        if (degree % 360 === 0 && (this.degree !== -360 || this.currFlipState === '')) {\n            startX = this.activeObj.activePoint.startX + this.activeObj.textSettings.fontSize * 0.15;\n            startY = this.activeObj.activePoint.startY + (this.activeObj.activePoint.endY - this.activeObj.activePoint.startY);\n            var rows = this.activeObj.keyHistory.split('\\n');\n            for (var i = 0; i < rows.length; i++) {\n                startY = this.activeObj.activePoint.startY + (i * this.activeObj.textSettings.fontSize +\n                    this.activeObj.textSettings.fontSize * 0.25);\n                canvasDraw.fillText(rows[i], startX, startY);\n            }\n        }\n        else if (degree % 90 === 0 && degree % 180 !== 0) {\n            canvasDraw.translate(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2);\n            canvasDraw.rotate(Math.PI / 180 * degree);\n            canvasDraw.translate(-this.lowerCanvas.height / 2, -this.lowerCanvas.width / 2);\n            if (degree % 90 === 0 && degree % 270 !== 0) {\n                startY = (this.lowerCanvas.width - this.activeObj.activePoint.endX) + this.activeObj.textSettings.fontSize * 0.4;\n                startX = this.activeObj.activePoint.startY;\n            }\n            else if (degree % 270 === 0) {\n                startX = this.lowerCanvas.height - this.activeObj.activePoint.endY;\n                startY = this.activeObj.activePoint.startX + this.activeObj.textSettings.fontSize * 0.4;\n            }\n            this.textFlipDegree(canvasDraw, startX, startY);\n            canvasDraw.translate(this.lowerCanvas.height / 2, this.lowerCanvas.width / 2);\n            canvasDraw.rotate(Math.PI / 180 * -degree);\n            canvasDraw.translate(-this.lowerCanvas.width / 2, -this.lowerCanvas.height / 2);\n        }\n        else {\n            canvasDraw.translate(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2);\n            canvasDraw.rotate(Math.PI / 180 * degree);\n            startX = this.lowerCanvas.width - this.activeObj.activePoint.endX;\n            startY = (this.lowerCanvas.height - this.activeObj.activePoint.endY) + this.activeObj.textSettings.fontSize * 0.4;\n            canvasDraw.translate(-this.lowerCanvas.width / 2, -this.lowerCanvas.height / 2);\n            this.textFlipDegree(canvasDraw, startX, startY);\n            canvasDraw.translate(this.lowerCanvas.width / 2, this.lowerCanvas.height / 2);\n            canvasDraw.rotate(Math.PI / 180 * -degree);\n            canvasDraw.translate(-this.lowerCanvas.width / 2, -this.lowerCanvas.height / 2);\n        }\n        if (this.degree === 360 || this.degree === -360) {\n            this.degree = 0;\n        }\n    };\n    ImageEditor.prototype.redrawObj = function (degree) {\n        if (this.objColl.length > 0) {\n            if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical' ||\n                degree === 'horizontalVertical' || degree === 'verticalHorizontal') {\n                this.updateCurrentActiveObjPoint(degree.toLowerCase());\n            }\n            else if (typeof (degree) === 'number') {\n                this.updateCurrentActiveObjPoint(degree);\n                var tempFilter = this.lowerContext.filter;\n                this.lowerContext.filter = this.getDefaultFilter();\n                for (var i = 0; i < this.objColl.length; i++) {\n                    var splitWords = this.objColl[i].shape.split('-');\n                    if (splitWords[0] !== 'crop') {\n                        this.apply(this.objColl[i].shape, this.objColl[i]);\n                    }\n                }\n                this.lowerContext.filter = tempFilter;\n            }\n        }\n    };\n    ImageEditor.prototype.updateCurrentActiveObjPoint = function (degree) {\n        var currActObjIndex;\n        for (var index = 0; index < this.objColl.length; index++) {\n            if (this.activeObj.shape === this.objColl[index].shape &&\n                this.activeObj.activePoint.startX === this.objColl[index].activePoint.startX &&\n                this.activeObj.activePoint.startY === this.objColl[index].activePoint.startY &&\n                this.activeObj.activePoint.endX === this.objColl[index].activePoint.endX &&\n                this.activeObj.activePoint.endY === this.objColl[index].activePoint.endY &&\n                this.activeObj.currIndex === this.objColl[index].currIndex) {\n                currActObjIndex = index;\n                break;\n            }\n        }\n        if (degree === 'horizontal' || degree === 'vertical' || degree === 'Horizontal' || degree === 'Vertical' ||\n            degree === 'horizontalvertical' || degree === 'verticalhorizontal') {\n            if (degree === 'horizontal' || degree === 'Horizontal') {\n                for (var i = 0; i < this.objColl.length; i++) {\n                    if (this.objColl[i].shapeFlip !== this.currFlipState) {\n                        if (this.objColl[i].activePoint.startX <= this.destLeft + (this.destWidth / 2)) {\n                            this.objColl[i].activePoint.endX = (this.destLeft + this.destWidth) -\n                                (this.objColl[i].activePoint.startX - this.destLeft);\n                            this.objColl[i].activePoint.startX = this.objColl[i].activePoint.endX -\n                                this.objColl[i].activePoint.width;\n                            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n                        }\n                        else if (this.objColl[i].activePoint.startX >= this.destLeft + (this.destWidth / 2)) {\n                            this.objColl[i].activePoint.startX = this.destLeft + (this.destLeft + this.destWidth -\n                                this.objColl[i].activePoint.endX);\n                            this.objColl[i].activePoint.endX = this.objColl[i].activePoint.startX +\n                                this.objColl[i].activePoint.width;\n                            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n                        }\n                        this.objColl[i].imageRatio = { startX: ((this.objColl[i].activePoint.startX -\n                                this.destLeft) / this.destWidth),\n                            startY: ((this.objColl[i].activePoint.startY - this.destTop) / this.destHeight),\n                            endX: ((this.objColl[i].activePoint.endX - this.destLeft) / this.destWidth),\n                            endY: ((this.objColl[i].activePoint.endY - this.destTop) / this.destHeight),\n                            width: this.destWidth / this.objColl[i].activePoint.width,\n                            height: this.destHeight / this.objColl[i].activePoint.height };\n                        this.objColl[i].shapeFlip = this.currFlipState;\n                    }\n                }\n            }\n            else if (degree === 'vertical' || degree === 'Vertical') {\n                for (var i = 0; i < this.objColl.length; i++) {\n                    if (this.objColl[i].shapeFlip !== this.currFlipState) {\n                        if (this.objColl[i].activePoint.startY <= this.destTop + (this.destHeight / 2)) {\n                            this.objColl[i].activePoint.endY = (this.destTop + this.destHeight) -\n                                (this.objColl[i].activePoint.startY - this.destTop);\n                            this.objColl[i].activePoint.startY = this.objColl[i].activePoint.endY -\n                                this.objColl[i].activePoint.height;\n                            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n                        }\n                        else if (this.objColl[i].activePoint.startY >= this.lowerCanvas.height / 2) {\n                            this.objColl[i].activePoint.startY = this.destTop + (this.destTop + this.destHeight -\n                                this.objColl[i].activePoint.endY);\n                            this.objColl[i].activePoint.endY = this.objColl[i].activePoint.startY +\n                                this.objColl[i].activePoint.height;\n                            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n                        }\n                        this.objColl[i].imageRatio = { startX: ((this.objColl[i].activePoint.startX -\n                                this.destLeft) / this.destWidth),\n                            startY: ((this.objColl[i].activePoint.startY - this.destTop) / this.destHeight),\n                            endX: ((this.objColl[i].activePoint.endX - this.destLeft) / this.destWidth),\n                            endY: ((this.objColl[i].activePoint.endY - this.destTop) / this.destHeight),\n                            width: this.destWidth / this.objColl[i].activePoint.width,\n                            height: this.destHeight / this.objColl[i].activePoint.height };\n                        this.objColl[i].shapeFlip = this.currFlipState;\n                    }\n                }\n            }\n            else if (degree === 'verticalhorizontal' || degree === 'horizontalvertical') {\n                for (var i = 0; i < this.objColl.length; i++) {\n                    if (this.objColl[i].shapeFlip !== this.currFlipState) {\n                        if (this.objColl[i].activePoint.startX <= this.destLeft + (this.destWidth / 2)) {\n                            this.objColl[i].activePoint.endX = (this.destLeft + this.destWidth) -\n                                (this.objColl[i].activePoint.startX - this.destLeft);\n                            this.objColl[i].activePoint.startX = this.objColl[i].activePoint.endX -\n                                this.objColl[i].activePoint.width;\n                            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n                        }\n                        else if (this.objColl[i].activePoint.startX >= this.destLeft + (this.destWidth / 2)) {\n                            this.objColl[i].activePoint.startX = this.destLeft + (this.destLeft + this.destWidth -\n                                this.objColl[i].activePoint.endX);\n                            this.objColl[i].activePoint.endX = this.objColl[i].activePoint.startX +\n                                this.objColl[i].activePoint.width;\n                            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n                        }\n                        if (this.objColl[i].activePoint.startY <= this.destTop + (this.destHeight / 2)) {\n                            this.objColl[i].activePoint.endY = (this.destTop + this.destHeight) -\n                                (this.objColl[i].activePoint.startY - this.destTop);\n                            this.objColl[i].activePoint.startY = this.objColl[i].activePoint.endY -\n                                this.objColl[i].activePoint.height;\n                            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n                        }\n                        else if (this.objColl[i].activePoint.startY >= this.lowerCanvas.height / 2) {\n                            this.objColl[i].activePoint.startY = this.destTop + (this.destTop + this.destHeight -\n                                this.objColl[i].activePoint.endY);\n                            this.objColl[i].activePoint.endY = this.objColl[i].activePoint.startY +\n                                this.objColl[i].activePoint.height;\n                            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n                        }\n                        this.objColl[i].imageRatio = { startX: ((this.objColl[i].activePoint.startX -\n                                this.destLeft) / this.destWidth),\n                            startY: ((this.objColl[i].activePoint.startY - this.destTop) / this.destHeight),\n                            endX: ((this.objColl[i].activePoint.endX - this.destLeft) / this.destWidth),\n                            endY: ((this.objColl[i].activePoint.endY - this.destTop) / this.destHeight),\n                            width: this.destWidth / this.objColl[i].activePoint.width,\n                            height: this.destHeight / this.objColl[i].activePoint.height };\n                        this.objColl[i].shapeFlip = this.currFlipState;\n                    }\n                }\n            }\n            if (currActObjIndex !== undefined) {\n                this.activeObj = extend({}, this.objColl[currActObjIndex], {}, true);\n            }\n        }\n        else if (degree === 90) {\n            this.rotateObjColl();\n        }\n        else if (degree === -90) {\n            for (var i = 0; i < 3; i++) {\n                this.rotateObjColl();\n            }\n        }\n        else if (typeof (degree) === 'number') {\n            if (degree > 0) {\n                this.rotateObjColl();\n            }\n            else {\n                for (var i = 0; i < 3; i++) {\n                    this.rotateObjColl();\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.rotateObjColl = function () {\n        for (var i = 0; i < this.objColl.length; i++) {\n            this.objColl[i].activePoint.startY = this.destTop + (this.destHeight * this.objColl[i].imageRatio.startX);\n            this.objColl[i].activePoint.endY = this.destTop + (this.destHeight * this.objColl[i].imageRatio.endX);\n            this.objColl[i].activePoint.startX = (this.destLeft + this.destWidth) -\n                (this.destWidth * this.objColl[i].imageRatio.endY);\n            this.objColl[i].activePoint.endX = (this.destLeft + this.destWidth) -\n                (this.destWidth * this.objColl[i].imageRatio.startY);\n            this.objColl[i].activePoint.width = this.objColl[i].activePoint.endX -\n                this.objColl[i].activePoint.startX;\n            this.objColl[i].activePoint.height = this.objColl[i].activePoint.endY -\n                this.objColl[i].activePoint.startY;\n            this.updateFontSize(this.objColl[i]);\n        }\n        for (var i = 0; i < this.objColl.length; i++) {\n            this.updateActiveObject(this.objColl[i].activePoint, this.objColl[i]);\n        }\n        // Update current image ratio for all objects\n        for (var i = 0; i < this.objColl.length; i++) {\n            this.objColl[i].imageRatio = { startX: ((this.objColl[i].activePoint.startX -\n                    this.destLeft) / this.destWidth),\n                startY: ((this.objColl[i].activePoint.startY - this.destTop) / this.destHeight),\n                endX: ((this.objColl[i].activePoint.endX - this.destLeft) / this.destWidth),\n                endY: ((this.objColl[i].activePoint.endY - this.destTop) / this.destHeight),\n                width: this.destWidth / this.objColl[i].activePoint.width,\n                height: this.destHeight / this.objColl[i].activePoint.height };\n        }\n    };\n    ImageEditor.prototype.redrawShape = function (obj) {\n        for (var i = 0; i < this.objColl.length; i++) {\n            if (JSON.stringify(obj) === JSON.stringify(this.objColl[i])) {\n                this.objColl.splice(i, 1);\n                break;\n            }\n        }\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        if (this.isPreventDragging) {\n            if (this.activeObj.activePoint.startX > this.destLeft) {\n                this.isPreventDragging = false;\n            }\n            this.drawObject('duplicate', null, null, null, true);\n        }\n        else {\n            this.drawObject('duplicate', null, null, null, true);\n        }\n    };\n    ImageEditor.prototype.applyActObj = function () {\n        var isActObj = false;\n        if (this.activeObj.shape !== undefined && this.activeObj.shape === 'text' && this.activeObj.keyHistory === '') {\n            this.refreshActiveObj();\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        }\n        else {\n            var splitWords = void 0;\n            var isCropSelection = false;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && this.currObjType.isCustomCrop) {\n                isCropSelection = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isCropSelection = true;\n            }\n            if (!isNullOrUndefined(this.activeObj.shape) && !isCropSelection) {\n                for (var i = 0; i < this.objColl.length; i++) {\n                    if (JSON.stringify(this.activeObj) === JSON.stringify(this.objColl[i])) {\n                        isActObj = true;\n                        break;\n                    }\n                }\n                if (!isActObj) {\n                    if (isNullOrUndefined(this.activeObj.currIndex)) {\n                        this.activeObj.currIndex = 'shape_' + (this.objColl.length + 1);\n                    }\n                    this.updateImageRatioForActObj();\n                    var splitWords_3 = this.activeObj.currIndex.split('_');\n                    var tempObjColl = this.objColl.splice(0, parseInt(splitWords_3[1], 10) - 1);\n                    tempObjColl.push(extend({}, this.activeObj, {}, true));\n                    for (var i = 0; i < this.objColl.length; i++) {\n                        tempObjColl.push(this.objColl[i]);\n                    }\n                    this.objColl = tempObjColl;\n                    tempObjColl = [];\n                    this.refreshActiveObj();\n                    this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                    this.redrawImgWithObj();\n                    //this.zoomFreehandDrawColl();\n                    this.clearOuterCanvas(this.lowerContext);\n                    this.clearOuterCanvas(this.upperContext);\n                    this.currObjType.shape = '';\n                    this.refreshActiveObj();\n                    if (this.isCircleCrop) {\n                        this.cropCircle(this.lowerContext);\n                    }\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.apply = function (shape, obj, canvas) {\n        if (!this.disabled) {\n            if ((this.togglePen) && !this.currObjType.isCustomCrop) {\n                var destLeft = this.destLeft;\n                var destTop = this.destTop;\n                var destWidth = this.destWidth;\n                var destHeight = this.destHeight;\n                this.callUpdateCurrentTransformedState();\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                this.togglePen = false;\n                this.iterateObjColl();\n                this.freehandRedraw(this.lowerContext);\n                this.togglePen = false;\n                if (this.isCircleCrop || (!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle')) {\n                    this.cropCircle(this.lowerContext);\n                }\n                this.destLeft = destLeft;\n                this.destTop = destTop;\n                this.destWidth = destWidth;\n                this.destHeight = destHeight;\n                this.lowerContext.filter = temp;\n            }\n            else {\n                canvas = canvas ? canvas : 'original';\n                this.currObjType.shape = shape !== undefined ? shape : this.currObjType.shape;\n                if (this.currObjType.shape !== '') {\n                    this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                    this.drawObject(canvas, obj);\n                    this.activeObj.shape = this.currObjType.shape.toLowerCase();\n                    if (!shape && this.currObjType.shape !== '' && !this.currObjType.isCustomCrop) {\n                        this.objColl.push(extend({}, this.activeObj, {}, true));\n                    }\n                    this.keyHistory = '';\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.setCenterPoints = function (text, width, height) {\n        var renderWidth;\n        var renderHeight;\n        if (text && width && height) {\n            renderWidth = width;\n            renderHeight = height;\n        }\n        else {\n            renderWidth = this.activeObj.activePoint.width;\n            renderHeight = this.activeObj.activePoint.height;\n        }\n        this.activeObj.activePoint.startX = (this.lowerCanvas.width / 2) - renderWidth / 2;\n        this.activeObj.activePoint.startY = (this.lowerCanvas.height / 2) - renderHeight / 2;\n        this.activeObj.activePoint.endX = (this.lowerCanvas.width / 2) + renderWidth / 2;\n        this.activeObj.activePoint.endY = (this.lowerCanvas.height / 2) + renderHeight / 2;\n        if (text && width && height) {\n            this.textStartPoints.x = this.activeObj.activePoint.startX;\n            this.textStartPoints.y = this.activeObj.activePoint.startY;\n        }\n    };\n    ImageEditor.prototype.drawShape = function (type, strokeWidth, strokeColor, fillColor, start, width, height) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.redrawActObj();\n            var objColl = extend([], this.objColl, [], true);\n            this.togglePen = false;\n            this.keyHistory = '';\n            this.upperCanvas.style.display = 'block';\n            this.refreshActiveObj();\n            this.currObjType.shape = type;\n            if (this.currObjType.shape.toLowerCase() !== 'freehanddraw' && this.currObjType.shape.toLowerCase() !== '') {\n                this.activeObj.shape = this.currObjType.shape.toLowerCase();\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n                    this.activeObj.strokeSettings = this.strokeSettings;\n                }\n                this.activeObj.strokeSettings.strokeWidth = strokeWidth ? strokeWidth : this.activeObj.strokeSettings.strokeWidth;\n                this.activeObj.strokeSettings.strokeColor = strokeColor ? strokeColor : this.activeObj.strokeSettings.strokeColor;\n                this.activeObj.strokeSettings.fillColor = fillColor ? fillColor : this.activeObj.strokeSettings.fillColor;\n                var tempWidth = this.destWidth > 100 ? 100 : this.destWidth / 2;\n                var tempHeight = this.destHeight > 100 ? 100 : this.destHeight / 2;\n                this.activeObj.activePoint.width = tempWidth;\n                this.activeObj.activePoint.height = tempHeight;\n                if (this.currObjType.shape.toLowerCase() === 'line') {\n                    this.activeObj.lineDraw = 'horizontal';\n                    this.activeObj.activePoint.height /= 2;\n                }\n                else if (this.currObjType.shape.toLowerCase() === 'rectangle') {\n                    this.activeObj.activePoint.width += this.activeObj.activePoint.width / 2;\n                }\n                if (this.currObjType.shape.toLowerCase() === 'ellipse' && width) {\n                    this.activeObj.activePoint.width = 2 * width;\n                    this.activeObj.activePoint.height = 2 * height;\n                }\n                if (width && height) {\n                    this.activeObj.activePoint.width = width;\n                    this.activeObj.activePoint.height = height;\n                }\n                if (!isNullOrUndefined(start)) {\n                    this.activeObj.activePoint.startX = start.x;\n                    this.activeObj.activePoint.startY = start.y;\n                    this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + this.activeObj.activePoint.width;\n                    this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + this.activeObj.activePoint.height;\n                }\n                else {\n                    this.setCenterPoints();\n                }\n                this.currObjType.isDragging = this.currObjType.isCustomCrop = false;\n                this.activeObj.shapeDegree = this.degree;\n                this.activeObj.shapeFlip = this.currFlipState;\n                this.activeObj.flipObjColl = [];\n                var shapeSettings = this.updatePreviousShapeSettings();\n                var shapeChangingArgs = { action: 'insert', previousShapeSettings: shapeSettings,\n                    currentShapeSettings: shapeSettings };\n                this.trigger('shapeChanging', shapeChangingArgs);\n                this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n                this.drawObject('duplicate');\n                this.isShapeInserted = true;\n                this.updateUndoRedoObj(objColl);\n                this.refreshToolbar('shapes');\n            }\n        }\n    };\n    ImageEditor.prototype.drawShapeText = function (text, fontFamily, fontSize, bold, italic, strokeColor, x, y) {\n        if (!this.disabled && this.isImageLoaded) {\n            if (this.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                this.upperCanvas.style.cursor = 'default';\n                this.currObjType.shape = '';\n            }\n            this.togglePen = false;\n            this.redrawActObj();\n            var prevObj = this.getCurrentObj();\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            this.keyHistory = '';\n            this.refreshActiveObj();\n            this.activeObj.shape = 'text';\n            this.currObjType.isCustomCrop = false;\n            this.currObjType.isText = this.currObjType.isInitialText = true;\n            this.upperCanvas.style.display = 'block';\n            this.currObjType.shape = this.activeObj.shape = 'text';\n            if (isNullOrUndefined(this.activeObj.textSettings)) {\n                this.activeObj.textSettings = this.textSettings;\n            }\n            if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n                this.activeObj.strokeSettings = this.strokeSettings;\n            }\n            this.activeObj.strokeSettings.strokeColor = strokeColor ? strokeColor : this.activeObj.strokeSettings.strokeColor;\n            this.activeObj.textSettings.text = text ? text : this.activeObj.textSettings.text;\n            this.activeObj.textSettings.fontFamily = fontFamily ? fontFamily : this.activeObj.textSettings.fontFamily;\n            this.activeObj.textSettings.text = text ? text : this.activeObj.textSettings.text;\n            this.activeObj.textSettings.fontFamily = fontFamily ? fontFamily : this.activeObj.textSettings.fontFamily;\n            this.activeObj.textSettings.fontSize = fontSize ? fontSize : this.activeObj.textSettings.fontSize;\n            this.activeObj.textSettings.bold = bold ? bold : this.activeObj.textSettings.bold;\n            this.activeObj.textSettings.italic = italic ? italic : this.activeObj.textSettings.italic;\n            if (isNullOrUndefined(this.activeObj.textSettings.fontSize)) {\n                if (this.lowerCanvas.width > this.lowerCanvas.height) {\n                    this.activeObj.textSettings.fontSize = Math.floor((this.lowerCanvas.width / 20));\n                }\n                else {\n                    this.activeObj.textSettings.fontSize = Math.floor((this.lowerCanvas.height / 20));\n                }\n                if (this.activeObj.textSettings.fontSize < 20) {\n                    this.activeObj.textSettings.fontSize = 20;\n                }\n            }\n            if (this.destWidth < 100) {\n                this.activeObj.textSettings.fontSize = Math.floor((this.destWidth / 20));\n            }\n            else if (this.destHeight < 100) {\n                this.activeObj.textSettings.fontSize = Math.floor((this.destHeight / 20));\n            }\n            this.activeObj.shapeDegree = this.degree;\n            this.activeObj.shapeFlip = this.currFlipState;\n            this.activeObj.flipObjColl = [];\n            this.updateFontStyles();\n            var width = this.upperContext.measureText(this.activeObj.textSettings.text).width +\n                this.activeObj.textSettings.fontSize * 0.5;\n            var height = this.activeObj.textSettings.fontSize + this.activeObj.textSettings.fontSize * 0.25;\n            if (!isNullOrUndefined(x) && !isNullOrUndefined(y)) {\n                this.activeObj.activePoint.startX = x;\n                this.activeObj.activePoint.startY = y;\n                this.activeObj.activePoint.endX = this.activeObj.activePoint.startX + width;\n                this.activeObj.activePoint.endY = this.activeObj.activePoint.startY + height;\n            }\n            else {\n                this.setCenterPoints(true, width, height);\n            }\n            var shapeSettings = this.updatePreviousShapeSettings();\n            var shapeChangingArgs = { action: 'insert', previousShapeSettings: shapeSettings,\n                currentShapeSettings: shapeSettings };\n            this.trigger('shapeChanging', shapeChangingArgs);\n            this.updateShapeChangeEventArgs(shapeChangingArgs.currentShapeSettings);\n            this.addLetter(this.activeObj.textSettings.text);\n            this.activeObj.textFlip = this.currFlipState;\n            this.updateFontRatio(this.activeObj);\n            this.objColl.push(this.activeObj);\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            this.updateUndoRedoColl('shapeTransform', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n            this.redrawShape(this.objColl[this.objColl.length - 1]);\n            this.isShapeInserted = true;\n            this.refreshToolbar('text');\n        }\n    };\n    ImageEditor.prototype.updateShapeChangeEventArgs = function (shapeSettings) {\n        this.activeObj.currIndex = shapeSettings.id;\n        this.activeObj.activePoint.startX = shapeSettings.startX;\n        this.activeObj.activePoint.startY = shapeSettings.startY;\n        this.activeObj.activePoint.width = shapeSettings.width;\n        this.activeObj.activePoint.height = shapeSettings.height;\n        this.activeObj.strokeSettings.strokeColor = shapeSettings.strokeColor;\n        this.activeObj.strokeSettings.fillColor = shapeSettings.fillColor;\n        this.activeObj.shape === 'ellipse' ? this.activeObj.activePoint.width = shapeSettings.radius / 2 : null;\n        this.activeObj.shape === 'line' ? this.activeObj.activePoint.width = shapeSettings.length : null;\n        this.activeObj.shape === 'text' ? this.activeObj.keyHistory = shapeSettings.text : null;\n        this.activeObj.shape === 'text' ? this.activeObj.textSettings.fontSize = shapeSettings.fontSize : null;\n        this.activeObj.shape === 'text' ? this.activeObj.strokeSettings.strokeColor = shapeSettings.color : null;\n        if (this.activeObj.shape === 'text' && !isNullOrUndefined(this.activeObj.textSettings)) {\n            for (var i = 0; i < shapeSettings.fontStyle.length; i++) {\n                if (shapeSettings.fontStyle[i] === 'bold') {\n                    this.activeObj.textSettings.bold = true;\n                }\n                else if (shapeSettings.fontStyle[i] === 'italic') {\n                    this.activeObj.textSettings.italic = true;\n                }\n                else if (shapeSettings.fontStyle[i] === 'underline') {\n                    this.activeObj.textSettings.underline = true;\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.getObjDetails = function (obj) {\n        var shapeDetails = {};\n        shapeDetails.id = obj.currIndex;\n        shapeDetails.type = this.toPascalCase(obj.shape);\n        shapeDetails.startX = obj.activePoint.startX;\n        shapeDetails.startY = obj.activePoint.startY;\n        if (obj.shape === 'rectangle') {\n            shapeDetails.width = obj.activePoint.width;\n            shapeDetails.height = obj.activePoint.height;\n            shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n            shapeDetails.fillColor = obj.strokeSettings.fillColor;\n            shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n        }\n        else if (obj.shape === 'ellipse') {\n            shapeDetails.radius = obj.activePoint.width / 2;\n            shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n            shapeDetails.fillColor = obj.strokeSettings.fillColor;\n            shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n        }\n        else if (obj.shape === 'line') {\n            shapeDetails.length = obj.activePoint.width;\n            shapeDetails.strokeColor = obj.strokeSettings.strokeColor;\n            shapeDetails.strokeWidth = obj.strokeSettings.strokeWidth;\n        }\n        else if (obj.shape === 'text') {\n            shapeDetails.text = obj.keyHistory;\n            shapeDetails.fontSize = obj.textSettings.fontSize;\n            shapeDetails.color = obj.strokeSettings.strokeColor;\n            shapeDetails.fontStyle = [];\n            if (obj.textSettings.bold) {\n                shapeDetails.fontStyle.push('bold');\n            }\n            if (obj.textSettings.italic) {\n                shapeDetails.fontStyle.push('italic');\n            }\n        }\n        return shapeDetails;\n    };\n    ImageEditor.prototype.getFreehandDrawDetails = function (index) {\n        var shapeDetails = {};\n        shapeDetails.id = this.pointColl[index].id;\n        shapeDetails.type = 'FreehandDraw';\n        shapeDetails.points = extend([], this.pointColl[index].points);\n        shapeDetails.strokeColor = this.pointColl[index].strokeColor;\n        shapeDetails.strokeWidth = this.pointColl[index].strokeWidth;\n        return shapeDetails;\n    };\n    ImageEditor.prototype.isPointsInRange = function (x, y) {\n        var inRange = false;\n        if (x >= 0 && y >= 0 && x <= this.lowerCanvas.width && y <= this.lowerCanvas.width) {\n            inRange = true;\n        }\n        return inRange;\n    };\n    ImageEditor.prototype.clearActObj = function () {\n        if (this.textArea.style.display === 'none') {\n            this.refreshActiveObj();\n            this.applyActObj();\n            this.refreshActiveObj();\n            this.currObjType.isCustomCrop = false;\n        }\n    };\n    ImageEditor.prototype.applyPenDraw = function () {\n        if (this.currObjType.shape === 'freehanddraw') {\n            this.apply();\n            this.upperCanvas.style.cursor = 'default';\n            this.currObjType.shape = '';\n        }\n        this.clearActObj();\n    };\n    ImageEditor.prototype.drawRotatedImage = function (degree) {\n        if (degree === 0) {\n            this.degree = 0;\n        }\n        else {\n            this.degree += degree;\n        }\n        if (this.degree === 360 || this.degree === -360) {\n            this.degree = 0;\n        }\n        this.setDestinationPoints();\n        var tempObjColl = extend([], this.objColl, [], true);\n        var tempActiveObj = extend({}, this.activeObj, {}, true);\n        this.objColl = [];\n        this.refreshActiveObj();\n        if (!this.isReverseRotate) {\n            this.updateCurrentTransformedState('initial');\n        }\n        this.rotateDegree(degree);\n        if (!this.isReverseRotate) {\n            this.updateCurrentTransformedState('reverse');\n            this.rotateFlipColl.push(degree);\n        }\n        if (this.rotateFlipColl.length === 1) {\n            this.setClientTransformedDimension();\n        }\n        this.objColl = extend([], tempObjColl, [], true);\n        this.activeObj = extend({}, tempActiveObj, {}, true);\n        if (this.isCircleCrop) {\n            this.cropCircle(this.lowerContext);\n        }\n        this.redrawObj(degree);\n        this.refreshActiveObj();\n        if (degree > 0) {\n            this.rotateFreehandDrawColl();\n        }\n        else {\n            for (var i = 0; i < 3; i++) {\n                this.rotateFreehandDrawColl();\n            }\n        }\n        this.freehandRedraw(this.lowerContext);\n        this.updateCurrSelectionPoint(degree);\n    };\n    ImageEditor.prototype.updateCurrSelectionPoint = function (degree) {\n        if (!isNullOrUndefined(this.currSelectionPoint) && !isNullOrUndefined(this.currDestinationPoint)) {\n            var activeObj = extend({}, this.activeObj, {}, true);\n            var objColl = extend([], this.objColl, [], true);\n            var srcPoints = { startX: this.srcLeft, startY: this.srcTop, width: this.srcWidth, height: this.srcHeight };\n            var destPoints = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n            this.objColl = [];\n            this.objColl.push(extend({}, this.currSelectionPoint, {}, true));\n            this.srcLeft = 0;\n            this.srcTop = 0;\n            this.srcWidth = this.baseImg.width;\n            this.srcHeight = this.baseImg.height;\n            this.destLeft = this.currDestinationPoint.startX;\n            this.destTop = this.currDestinationPoint.startY;\n            this.destWidth = this.currDestinationPoint.width;\n            this.destHeight = this.currDestinationPoint.height;\n            if (typeof (degree) === 'number') {\n                this.setDestinationPoints();\n                this.setClientTransformedDimension();\n            }\n            this.objColl[0].shapeFlip = '';\n            this.redrawObj(degree);\n            this.currSelectionPoint = extend({}, this.objColl[0], {}, true);\n            this.currDestinationPoint = { startX: this.destLeft, startY: this.destTop, width: this.destWidth, height: this.destHeight };\n            this.objColl = objColl;\n            this.activeObj = activeObj;\n            this.srcLeft = srcPoints.startX;\n            this.srcTop = srcPoints.startY;\n            this.srcWidth = srcPoints.width;\n            this.srcHeight = srcPoints.height;\n            this.destLeft = destPoints.startX;\n            this.destTop = destPoints.startY;\n            this.destWidth = destPoints.width;\n            this.destHeight = destPoints.height;\n        }\n    };\n    ImageEditor.prototype.setClientTransformedDimension = function (isPreventDimension) {\n        if (this.degree % 90 === 0 && this.degree % 180 !== 0) {\n            this.destLeft = (this.lowerCanvas.width - this.destHeight) / 2;\n            this.destTop = (this.lowerCanvas.height - this.destWidth) / 2;\n            var temp = this.destWidth;\n            this.destWidth = this.destHeight;\n            this.destHeight = temp;\n        }\n        else {\n            if (isNullOrUndefined(isPreventDimension)) {\n                this.destLeft = (this.lowerCanvas.width - this.destWidth) / 2;\n                this.destTop = (this.lowerCanvas.height - this.destHeight) / 2;\n            }\n        }\n    };\n    ImageEditor.prototype.popForDefaultTransformedState = function (collection) {\n        var rotateRight = 0;\n        var rotateleft = 0;\n        var horizontal = 0;\n        var vertical = 0;\n        for (var i = 0; i < collection.length; i++) {\n            if (collection[i] === 90 || collection[i] === 'rotateRight') {\n                rotateRight++;\n                rotateleft = 0;\n                horizontal = 0;\n                vertical = 0;\n                if (rotateRight === 4) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === -90 || collection[i] === 'rotateLeft') {\n                rotateleft++;\n                rotateRight = 0;\n                horizontal = 0;\n                vertical = 0;\n                if (rotateleft === 4) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === 'horizontal' || collection[i] === 'horizontalflip') {\n                horizontal++;\n                rotateleft = 0;\n                rotateRight = 0;\n                vertical = 0;\n                if (horizontal === 2) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n            else if (collection[i] === 'vertical' || collection[i] === 'verticalflip') {\n                vertical++;\n                horizontal = 0;\n                rotateleft = 0;\n                rotateRight = 0;\n                if (vertical === 2) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    ImageEditor.prototype.popForDefaultFlipState = function (collection) {\n        for (var i = 0; i < collection.length; i++) {\n            if (!isNullOrUndefined(collection[i + 3])) {\n                if ((collection[i] === 'horizontal' || collection[i] === 'horizontalFlip')\n                    && (collection[i + 1] === 'vertical' || collection[i] === 'verticalFlip') &&\n                    (collection[i + 2] === 'horizontal' || collection[i] === 'horizontalFlip') &&\n                    (collection[i + 3] === 'vertical' || collection[i] === 'verticalFlip')) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n                else if ((collection[i] === 'vertical' || collection[i] === 'verticalFlip')\n                    && (collection[i + 1] === 'horizontal' || collection[i + 1] === 'horizontalFlip') &&\n                    (collection[i + 2] === 'vertical' || collection[i] === 'verticalFlip') &&\n                    (collection[i + 3] === 'horizontal' || collection[i] === 'horizontalFlip')) {\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    ImageEditor.prototype.popForDefaultRotateState = function (collection) {\n        for (var i = 0; i < collection.length; i++) {\n            if (!isNullOrUndefined(collection[i + 1])) {\n                if ((collection[i] === 90 || collection[i] === 'rotateRight') &&\n                    (collection[i + 1] === -90 || collection[i] === 'rotateLeft')) {\n                    collection.pop();\n                    collection.pop();\n                }\n                else if ((collection[i] === -90 || collection[i] === 'rotateLeft') &&\n                    (collection[i + 1] === 90 || collection[i] === 'rotateRight')) {\n                    collection.pop();\n                    collection.pop();\n                }\n            }\n        }\n        return collection;\n    };\n    ImageEditor.prototype.alignRotateFlipColl = function (collection, isRotateFlipCollection) {\n        collection = this.popForDefaultTransformedState(collection);\n        collection = this.popForDefaultFlipState(collection);\n        collection = this.popForDefaultRotateState(collection);\n        if (collection.length === 0 && isRotateFlipCollection) {\n            this.degree = 0;\n            this.currFlipState = '';\n        }\n        return collection;\n    };\n    ImageEditor.prototype.updateFlipColl = function (direction) {\n        if (this.flipColl.length === 0) {\n            this.flipColl.push(direction);\n        }\n        else {\n            if (this.flipColl[this.flipColl.length - 1] === 'direction') {\n                this.flipColl.pop();\n            }\n            else {\n                this.flipColl.push(direction);\n            }\n        }\n        if (this.flipColl.length >= 4) {\n            if (this.flipColl[this.flipColl.length - 1] === 'horizontal' && this.flipColl[this.flipColl.length - 2] === 'vertical' &&\n                this.flipColl[this.flipColl.length - 3] === 'horizontal' && this.flipColl[this.flipColl.length - 4] === 'vertical') {\n                for (var i = 0; i < 4; i++) {\n                    this.flipColl.pop();\n                }\n            }\n            else if (this.flipColl[this.flipColl.length - 1] === 'vertical' && this.flipColl[this.flipColl.length - 2] === 'horizontal' &&\n                this.flipColl[this.flipColl.length - 3] === 'vertical' && this.flipColl[this.flipColl.length - 4] === 'horizontal') {\n                for (var i = 0; i < 4; i++) {\n                    this.flipColl.pop();\n                }\n            }\n        }\n    };\n    ImageEditor.prototype.horizontalFlip = function () {\n        this.lowerContext.translate(this.lowerContext.canvas.width, 0);\n        this.lowerContext.scale(-1, 1);\n        this.upperContext.translate(this.upperContext.canvas.width, 0);\n        this.upperContext.scale(-1, 1);\n    };\n    ImageEditor.prototype.verticalFlip = function () {\n        this.lowerContext.translate(0, this.lowerContext.canvas.height);\n        this.lowerContext.scale(1, -1);\n        this.upperContext.translate(0, this.upperContext.canvas.height);\n        this.upperContext.scale(1, -1);\n    };\n    ImageEditor.prototype.updateFlipState = function (direction) {\n        if (direction === 'horizontal' && this.degree % 90 === 0 && this.degree % 180 !== 0) {\n            this.verticalFlip();\n        }\n        else if (direction === 'vertical' && this.degree % 90 === 0 && this.degree % 180 !== 0) {\n            this.horizontalFlip();\n        }\n        else if (direction === 'horizontal') {\n            this.horizontalFlip();\n        }\n        else if (direction === 'vertical') {\n            this.verticalFlip();\n        }\n    };\n    ImageEditor.prototype.setDestinationPoints = function () {\n        var maxDimension;\n        if (this.degree % 90 === 0 && this.degree % 180 !== 0) {\n            maxDimension = this.calcMaxDimension(this.srcHeight, this.srcWidth);\n            if (this.isRotateZoom) {\n                maxDimension.width += (maxDimension.width * this.zoomFactor);\n                maxDimension.height += (maxDimension.height * this.zoomFactor);\n                this.destWidth = maxDimension.height;\n                this.destHeight = maxDimension.width;\n            }\n            this.destLeft = (this.lowerCanvas.clientWidth - maxDimension.height) / 2;\n            this.destTop = (this.lowerCanvas.clientHeight - maxDimension.width) / 2;\n            this.destWidth = maxDimension.height;\n            this.destHeight = maxDimension.width;\n        }\n        else {\n            maxDimension = this.calcMaxDimension(this.srcWidth, this.srcHeight);\n            if (this.isRotateZoom) {\n                maxDimension.width += (maxDimension.width * this.zoomFactor);\n                maxDimension.height += (maxDimension.height * this.zoomFactor);\n                this.destWidth = maxDimension.width;\n                this.destHeight = maxDimension.height;\n            }\n            this.destLeft = (this.lowerCanvas.clientWidth - maxDimension.width) / 2;\n            this.destTop = (this.lowerCanvas.clientHeight - maxDimension.height) / 2;\n            this.destWidth = maxDimension.width;\n            this.destHeight = maxDimension.height;\n        }\n    };\n    ImageEditor.prototype.rotatedFlip = function () {\n        this.isReverseFlip = true;\n        var tempCurrFlipState = this.currFlipState;\n        var tempFlipColl = this.flipColl;\n        var tempObjColl = extend([], this.objColl, [], true);\n        var tempActiveObj = extend({}, this.activeObj, {}, true);\n        this.flipColl = [];\n        this.objColl = [];\n        this.refreshActiveObj();\n        this.currentTransformedState('initial');\n        var temp = this.lowerContext.filter;\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.lowerContext.filter = temp;\n        this.currentTransformedState('reverse', true);\n        if (tempCurrFlipState === '' && this.currFlipState !== '') {\n            tempCurrFlipState = this.currFlipState;\n        }\n        this.currFlipState = tempCurrFlipState;\n        this.flipColl = tempFlipColl;\n        this.objColl = extend([], tempObjColl, [], true);\n        this.lowerContext.filter = 'none';\n        this.iterateObjColl();\n        this.lowerContext.filter = temp;\n        if (tempActiveObj.activePoint.width !== 0) {\n            this.activeObj = extend({}, tempActiveObj, {}, true);\n        }\n        this.isReverseFlip = false;\n    };\n    ImageEditor.prototype.getFilterValue = function (value) {\n        var filterValue;\n        if (value === 0) {\n            filterValue = 1;\n        }\n        else {\n            filterValue = 1 + ((value * 0.5) / 100);\n        }\n        return filterValue;\n    };\n    ImageEditor.prototype.setFilterValue = function (value) {\n        var filterValue;\n        if (value === 1) {\n            filterValue = 0;\n        }\n        else {\n            filterValue = ((value - 1) * 100) / 0.5;\n        }\n        return Math.round(filterValue);\n    };\n    ImageEditor.prototype.getSaturationFilterValue = function (value) {\n        var filterValue;\n        if (value === 0) {\n            filterValue = 1;\n        }\n        else {\n            filterValue = 1 + (value / 100);\n        }\n        return filterValue;\n    };\n    ImageEditor.prototype.setSaturationFilterValue = function (value) {\n        var filterValue;\n        if (value === 1) {\n            filterValue = 0;\n        }\n        else {\n            filterValue = (value - 1) * 100;\n        }\n        return Math.round(filterValue);\n    };\n    ImageEditor.prototype.getBlackAndWhiteData = function (imageData) {\n        for (var i = 0; i < imageData.data.length; i += 4) {\n            var count = imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2];\n            var colour = 0;\n            if (count > 383) {\n                colour = 255;\n            }\n            imageData.data[i] = colour;\n            imageData.data[i + 1] = colour;\n            imageData.data[i + 2] = colour;\n            imageData.data[i + 3] = 255;\n        }\n        return imageData;\n    };\n    ImageEditor.prototype.setBrightness = function (value) {\n        this.applyPenDraw();\n        this.adjustmentLevel.brightness = value;\n        value = this.getFilterValue(value);\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.updateAdjustment('brightness', value);\n        this.updateUndoRedoColl('brightness', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n    };\n    ImageEditor.prototype.setContrast = function (value) {\n        this.applyPenDraw();\n        this.adjustmentLevel.contrast = value;\n        value = this.getFilterValue(value);\n        value *= 100;\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.updateAdjustment('contrast', value);\n        this.updateUndoRedoColl('contrast', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n    };\n    ImageEditor.prototype.setHue = function (value) {\n        this.applyPenDraw();\n        this.adjustmentLevel.hue = value;\n        value *= 3;\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.updateAdjustment('hue', value);\n        this.updateUndoRedoColl('hue', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n    };\n    ImageEditor.prototype.setSaturation = function (value) {\n        this.applyPenDraw();\n        this.adjustmentLevel.saturation = value;\n        value = this.getSaturationFilterValue(value);\n        value *= 100;\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.updateAdjustment('saturation', value);\n        this.updateUndoRedoColl('saturation', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n    };\n    ImageEditor.prototype.setOpacity = function (value) {\n        this.applyPenDraw();\n        this.adjustmentLevel.opacity = value;\n        if (value >= 50) {\n            value /= 100;\n        }\n        else if (value === 40) {\n            value = 0.45;\n        }\n        else if (value === 30) {\n            value = 0.40;\n        }\n        else if (value === 20) {\n            value = 0.35;\n        }\n        else if (value === 10) {\n            value = 0.30;\n        }\n        else if (value === 0) {\n            value = 0.25;\n        }\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.updateAdjustment('opacity', value);\n        this.updateUndoRedoColl('opacity', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n    };\n    ImageEditor.prototype.setBlur = function (value) {\n        this.applyPenDraw();\n        this.adjustmentLevel.blur = value;\n        value /= 20;\n        // Since 0.5 is not working in blur we consider from 1\n        value += 0.5;\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.updateAdjustment('blur', value);\n        this.updateUndoRedoColl('blur', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n    };\n    ImageEditor.prototype.setExposure = function (value) {\n        this.applyPenDraw();\n        this.adjustmentLevel.exposure = value;\n        value = this.getFilterValue(value);\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.updateAdjustment('exposure', value);\n        this.updateUndoRedoColl('exposure', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n    };\n    ImageEditor.prototype.setFilter = function (type) {\n        type = type.toLowerCase();\n        this.applyPenDraw();\n        var prevFilter = this.currentFilter;\n        var prevCropObj = extend({}, this.cropObj, {}, true);\n        var prevObj = this.getCurrentObj();\n        prevObj.objColl = extend([], this.objColl, [], true);\n        prevObj.pointColl = extend([], this.pointColl, [], true);\n        prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n        this.updateAdjustment(type, null);\n        this.updateUndoRedoColl(type, prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj, null, null, prevFilter);\n    };\n    ImageEditor.prototype.renderImage = function () {\n        var temp = this.lowerContext.filter;\n        this.applyActObj();\n        this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.updateCurrentTransformedState('initial');\n        this.updateBrightnessFilter();\n        this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        this.updateCurrentTransformedState('reverse');\n        this.lowerContext.filter = 'none';\n        this.iterateObjColl();\n        this.freehandRedraw(this.lowerContext);\n        this.lowerContext.filter = temp;\n        if (this.isCircleCrop || (!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle')) {\n            this.cropCircle(this.lowerContext);\n        }\n    };\n    ImageEditor.prototype.updateTextBox = function (obj) {\n        this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.redrawImgWithObj();\n        this.textArea.style.display = 'block';\n        this.textArea.style.fontFamily = obj.textSettings.fontFamily;\n        this.textArea.style.fontSize = obj.textSettings.fontSize + 'px';\n        this.textArea.style.color = obj.strokeSettings.strokeColor;\n        this.textArea.style.fontWeight = obj.textSettings.bold ? 'bold' : 'normal';\n        this.textArea.style.fontStyle = obj.textSettings.italic ? 'italic' : 'normal';\n        this.textArea.style.border = '2px solid ' + this.themeColl[this.theme]['primaryColor'];\n        this.textArea.value = obj.keyHistory;\n        this.activeObj = extend({}, obj, {}, true);\n        this.updateFontStyles();\n        this.textArea.style.width = this.activeObj.activePoint.width + 'px';\n    };\n    ImageEditor.prototype.drawNewSelection = function (type, startX, startY, width, height) {\n        var points;\n        var cropShape = 'crop-' + type;\n        if (cropShape.toLowerCase() === 'crop-custom') {\n            if (this.currObjType.shape === '') {\n                this.drawCustomSelection('crop-custom');\n            }\n            if (startX && startY) {\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                this.currObjType.shape = this.activeObj.shape = cropShape.toLowerCase();\n                this.activeObj.activePoint.startX = startX;\n                this.activeObj.activePoint.startY = startY;\n                this.activeObj.activePoint.endX = this.lowerCanvas.width;\n                this.activeObj.activePoint.endY = this.lowerCanvas.height;\n                this.activeObj.activePoint.width = this.activeObj.activePoint.endX - this.activeObj.activePoint.startX;\n                this.activeObj.activePoint.height = this.activeObj.activePoint.endY - this.activeObj.activePoint.startY;\n                this.drawObject('duplicate');\n            }\n        }\n        else if (cropShape.toLowerCase() === 'crop-canvas') {\n            this.upperCanvas.style.display = 'none';\n            this.dragCanvas = true;\n        }\n        else {\n            this.currObjType.isCustomCrop = false;\n            this.currObjType.shape = cropShape.toLowerCase();\n            if (width && height) {\n                points = { startX: startX, startY: startY, endX: startX + width, endY: startY + height,\n                    width: width, height: height };\n            }\n            else if (width && cropShape === 'crop-circle') {\n                points = { startX: startX, startY: startY, endX: startX + width, endY: startY + width,\n                    width: width, height: width };\n            }\n            this.activeObj.shape = cropShape.toLowerCase();\n            this.drawObject('duplicate', null, true, points);\n        }\n    };\n    ImageEditor.prototype.setDestPointsForFlipState = function (isUpdate) {\n        if (this.getCurrentPanRegion() !== '') {\n            if (this.getCurrentPanRegion() === 'horizontal') {\n                this.destLeft = this.lowerCanvas.clientWidth - (this.destWidth + this.destLeft);\n            }\n            else if (this.getCurrentPanRegion() === 'vertical') {\n                this.destTop = this.lowerCanvas.clientHeight - (this.destHeight + this.destTop);\n            }\n            else {\n                this.destLeft = this.lowerCanvas.clientWidth - (this.destWidth + this.destLeft);\n                this.destTop = this.lowerCanvas.clientHeight - (this.destHeight + this.destTop);\n            }\n        }\n    };\n    ImageEditor.prototype.performUndoDefaultAction = function (obj) {\n        this.lowerContext.filter = obj.previousObj.filter;\n        this.objColl = [];\n        this.pointColl = [];\n        this.freehandCounter = 0;\n        this.setCurrentObj(obj.previousObj);\n        this.destLeft = obj.previousObj.destPoints.startX;\n        this.destTop = obj.previousObj.destPoints.startY;\n        var activeObj = extend({}, this.activeObj, {}, true);\n        this.objColl = extend([], obj.previousObjColl, [], true);\n        this.pointColl = extend([], obj.previousPointColl, [], true);\n        this.freehandCounter = this.pointColl.length;\n        this.lowerContext.filter = 'none';\n        this.iterateObjColl();\n        this.freehandRedraw(this.lowerContext);\n        this.lowerContext.filter = obj.previousObj.filter;\n        this.activeObj = activeObj;\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n        if (this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) {\n            this.drawObject('duplicate');\n        }\n    };\n    ImageEditor.prototype.setAdjustment = function (type) {\n        var splitWords = this.lowerContext.filter.split(' ');\n        var value;\n        var valueArr;\n        switch (type) {\n            case 'brightness':\n                valueArr = splitWords[0].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                this.adjustmentLevel.brightness = this.setFilterValue(value);\n                break;\n            case 'contrast':\n                valueArr = splitWords[1].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 100;\n                this.adjustmentLevel.contrast = this.setFilterValue(value);\n                break;\n            case 'hue':\n                valueArr = splitWords[2].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 3;\n                this.adjustmentLevel.hue = value;\n                break;\n            case 'saturation':\n                valueArr = splitWords[3].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value /= 100;\n                this.adjustmentLevel.saturation = this.setSaturationFilterValue(value);\n                break;\n            case 'opacity':\n                valueArr = splitWords[4].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                if (value === 0.45) {\n                    value = 40;\n                }\n                else if (value === 0.40) {\n                    value = 30;\n                }\n                else if (value === 0.35) {\n                    value = 20;\n                }\n                else if (value === 0.30) {\n                    value = 10;\n                }\n                else if (value === 0.25) {\n                    value = 0;\n                }\n                else {\n                    value *= 100;\n                }\n                this.adjustmentLevel.opacity = value;\n                break;\n            case 'blur':\n                valueArr = splitWords[5].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                value *= 20;\n                this.adjustmentLevel.blur = value;\n                break;\n            case 'exposure':\n                valueArr = splitWords[0].split('(');\n                value = parseFloat(valueArr[1].split(')')[0]);\n                this.adjustmentLevel.exposure = this.setFilterValue(value);\n                break;\n        }\n    };\n    ImageEditor.prototype.updateFilter = function (type, previousFilter) {\n        if (type === 'default' || type === 'chrome' || type === 'cold' ||\n            type === 'warm' || type === 'grayscale' || type === 'blackandwhite' ||\n            type === 'sepia' || type === 'invert' || type === 'sharpen') {\n            var selEle = this.element.querySelector('.e-contextual-toolbar-wrapper .e-toolbar-item.e-selected');\n            if (selEle) {\n                selEle.classList.remove('e-selected');\n            }\n            var filterCanvas = document.getElementById(this.element.id + '_' + type + 'Canvas');\n            if (filterCanvas) {\n                filterCanvas.parentElement.classList.add('e-selected');\n            }\n            if (!isNullOrUndefined(previousFilter)) {\n                this.currentFilter = previousFilter;\n            }\n            else {\n                this.currentFilter = this.element.id + '_' + type;\n            }\n        }\n    };\n    /**\n     * Clear a current selection.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.clearSelection = function () {\n        if (!this.disabled && this.isImageLoaded) {\n            this.togglePen = false;\n            this.refreshActiveObj();\n            this.dragElement = '';\n            this.dragPoint.startX = this.dragPoint.startY = this.dragPoint.endX = this.dragPoint.endY = 0;\n            this.currObjType.shape = '';\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.currObjType.isActiveObj = true;\n            this.currObjType.isCustomCrop = false;\n            this.upperCanvas.style.cursor = 'default';\n        }\n    };\n    /**\n     * Crops an image based on the selection.\n     * The selection can be done through programmatically using the select method or through UI interactions.\n     *\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.crop = function () {\n        var isCrop = false;\n        if (!this.disabled && this.isImageLoaded) {\n            if (this.currObjType.isUndoAction) {\n                this.refreshUndoRedoColl();\n            }\n            var splitWords = void 0;\n            var transitionArgs = { startPoint: { x: this.activeObj.activePoint.startX, y: this.activeObj.activePoint.startY }, endPoint: { x: this.activeObj.activePoint.endX, y: this.activeObj.activePoint.endY } };\n            this.trigger('cropping', transitionArgs);\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (!this.disabled && this.activeObj.horTopLine !== undefined && (this.currObjType.isCustomCrop || splitWords[0] === 'crop')) {\n                isCrop = true;\n                var prevCropObj = extend({}, this.cropObj, {}, true);\n                var prevObj = this.getCurrentObj();\n                prevObj.objColl = extend([], this.objColl, [], true);\n                prevObj.pointColl = extend([], this.pointColl, [], true);\n                prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n                this.cropImg();\n                this.zoomFactor = 0;\n                this.enableDisableToolbarBtn();\n                this.updateUndoRedoColl('crop', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n            }\n        }\n        return isCrop;\n    };\n    /**\n     * Flips an image by horizontally or vertically.\n     *\n     * @param {Direction } direction - Specifies the direction to flip the image.\n     * @returns {void}.\n     */\n    ImageEditor.prototype.flip = function (direction) {\n        if (!this.disabled && this.isImageLoaded) {\n            var transitionArgs = { direction: direction };\n            this.trigger('flipping', transitionArgs);\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var prevObj = void 0;\n            if (isNullOrUndefined(this.transformCurrentObj)) {\n                prevObj = this.getCurrentObj();\n                prevObj.objColl = extend([], this.objColl, null, true);\n                prevObj.pointColl = extend({}, this.pointColl, null, true);\n                prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            }\n            this.afterCropActions.push(direction.toLowerCase() === 'horizontal' ? 'horizontalflip' : 'verticalflip');\n            var splitWords = [];\n            var activeObjShape = void 0;\n            if (!isNullOrUndefined(this.activeObj.activePoint)) {\n                if (this.activeObj.shape !== undefined) {\n                    splitWords = this.activeObj.shape.split('-');\n                }\n                if (this.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                    activeObjShape = this.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                    this.updateImageRatioForActObj();\n                    this.objColl.push(this.activeObj);\n                    this.refreshActiveObj();\n                }\n            }\n            this.redrawActObj();\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            var tempObjColl = extend([], this.objColl, [], true);\n            var tempActiveObj = extend({}, this.activeObj, {}, true);\n            this.objColl = [];\n            this.refreshActiveObj();\n            if (!this.isReverseFlip) {\n                this.updateCurrentTransformedState('initial');\n            }\n            if (direction.toLowerCase() === 'horizontal') {\n                this.updateFlipState(direction.toLowerCase());\n                if (this.currFlipState.toLowerCase() === 'horizontal') {\n                    this.currFlipState = '';\n                }\n                else {\n                    this.currFlipState = 'horizontal';\n                }\n            }\n            else {\n                this.updateFlipState(direction.toLowerCase());\n                if (this.currFlipState.toLowerCase() === 'vertical') {\n                    this.currFlipState = '';\n                }\n                else {\n                    this.currFlipState = 'vertical';\n                }\n            }\n            if (this.rotatedFlipCropSelection) {\n                this.destLeft += this.totalPannedInternalPoint.x;\n                this.destTop += this.totalPannedInternalPoint.y;\n            }\n            var temp = this.lowerContext.filter;\n            this.updateBrightnessFilter();\n            this.lowerContext.drawImage(this.baseImg, this.srcLeft, this.srcTop, this.srcWidth, this.srcHeight, this.destLeft, this.destTop, this.destWidth, this.destHeight);\n            this.lowerContext.filter = temp;\n            this.updateFlipState(direction.toLowerCase());\n            if (!this.isReverseFlip) {\n                this.updateCurrentTransformedState('reverse');\n                this.updateFlipColl(direction.toLocaleLowerCase());\n                this.rotateFlipColl.push(direction.toLowerCase());\n            }\n            if (this.rotateFlipColl.length === 1) {\n                if (this.getCurrentPanRegion() === '') {\n                    this.setClientTransformedDimension();\n                }\n                else {\n                    this.setDestPointsForFlipState();\n                }\n            }\n            if (this.isCircleCrop) {\n                this.cropCircle(this.lowerContext);\n            }\n            this.objColl = extend([], tempObjColl, [], true);\n            this.activeObj = extend({}, tempActiveObj, {}, true);\n            for (var i = 0, len = this.objColl.length; i < len; i++) {\n                if (this.objColl[i].flipObjColl.length === 0) {\n                    this.objColl[i].flipObjColl.push(direction);\n                }\n                else if (this.objColl[i].flipObjColl[this.objColl[i].flipObjColl.length - 1] === direction) {\n                    this.objColl[i].flipObjColl.pop();\n                }\n                else {\n                    this.objColl[i].flipObjColl.push(direction);\n                }\n            }\n            this.redrawObj(direction.toLowerCase());\n            var tempFilter = this.lowerContext.filter;\n            this.lowerContext.filter = this.getDefaultFilter();\n            this.iterateObjColl();\n            if (!isNullOrUndefined(this.currSelectionPoint)) {\n                tempObjColl = extend([], this.objColl, [], true);\n                this.objColl = [];\n                this.objColl.push(this.currSelectionPoint);\n                this.redrawObj(direction.toLowerCase());\n                this.currSelectionPoint = extend({}, this.objColl[0], {}, true);\n                this.objColl = tempObjColl;\n            }\n            if (direction.toLowerCase() === 'horizontal' || direction.toLowerCase() === 'vertical') {\n                this.flipFreehandrawColl(direction.toLowerCase());\n                this.freehandRedraw(this.lowerContext);\n            }\n            else {\n                this.freehandRedraw(this.lowerContext);\n            }\n            this.lowerContext.filter = tempFilter;\n            this.refreshActiveObj();\n            this.updateCurrSelectionPoint(direction.toLowerCase());\n            if (!this.isUndoRedo && isNullOrUndefined(this.transformCurrentObj)) {\n                this.updateUndoRedoColl('flip', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n            }\n            this.isUndoRedo = false;\n            this.clearOuterCanvas(this.lowerContext);\n            this.clearOuterCanvas(this.upperContext);\n            if (!isNullOrUndefined(activeObjShape)) {\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                this.activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n                this.objColl.pop();\n                this.drawObject('duplicate', this.activeObj);\n                if (!this.isReverseFlip) {\n                    this.refreshToolbar('main', true, true);\n                }\n            }\n            if (isNullOrUndefined(this.activeObj.shape) && !this.isReverseFlip) {\n                this.refreshToolbar('main');\n            }\n            else if (!this.isReverseFlip) {\n                this.refreshToolbar('main', true, true);\n            }\n            this.rotateFlipColl = this.alignRotateFlipColl(this.rotateFlipColl, true);\n        }\n    };\n    /**\n     * Return an image as ImageData.\n     *\n     * @returns {ImageData}.\n     */\n    ImageEditor.prototype.getImageData = function () {\n        var data = this.lowerContext.getImageData(this.destLeft, this.destTop, this.destWidth, this.destHeight);\n        return data;\n    };\n    /**\n     *  Load/opens an image for editing within an image editor.\n     *\n     * @param {string | ImageData } data - Specifies url of the Image or image data.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.open = function (data) {\n        if (!this.disabled) {\n            showSpinner(this.element);\n            this.element.style.opacity = '0.5';\n            var toolbar_11 = document.querySelector('#' + this.element.id + '_currPos');\n            if (toolbar_11) {\n                toolbar_11.style.display = 'none';\n            }\n            if (this.defToolbarItems.length === 0 &&\n                (isNullOrUndefined(document.getElementById(this.element.id + '_toolbar')))) {\n                this.toolbarHeight = 0;\n            }\n            if (isNullOrUndefined(this.toolbarTemplate)) {\n                this.reset();\n                this.update();\n            }\n            this.degree = 0;\n            this.zoomFactor = 0;\n            this.isImageLoaded = false;\n            this.currSelectionPoint = null;\n            var type = typeof (data);\n            if (type === 'string') {\n                var fileName = data.split('.');\n                if (fileName.length > 1) {\n                    fileName = fileName[fileName.length - 2].split('/');\n                    this.fileName = fileName[fileName.length - 1];\n                }\n                else {\n                    this.fileName = 'ImageEditor';\n                }\n                this.imageOnLoad(data);\n            }\n            else {\n                this.fileName = 'ImageEditor';\n                this.lowerCanvas = document.querySelector('#' + this.element.id + '_lowerCanvas');\n                this.upperCanvas = document.querySelector('#' + this.element.id + '_upperCanvas');\n                this.lowerContext = this.lowerCanvas.getContext('2d');\n                this.upperContext = this.upperCanvas.getContext('2d');\n                this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                this.inMemoryContext.clearRect(0, 0, this.inMemoryCanvas.width, this.inMemoryCanvas.height);\n                this.inMemoryCanvas.width = this.baseImg.width = data.width;\n                this.inMemoryCanvas.height = this.baseImg.height = data.height;\n                this.inMemoryContext.putImageData(data, 0, 0);\n                this.baseImg.src = this.inMemoryCanvas.toDataURL();\n            }\n        }\n    };\n    /**\n     * Reset all the changesand revert to original image.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.reset = function () {\n        if (!this.disabled) {\n            this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.inMemoryContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.height, this.lowerCanvas.width);\n            this.lowerContext.filter = this.getDefaultFilter();\n            this.refreshActiveObj();\n            this.refreshToolbar('main');\n            if (Browser.isDevice && document.getElementById(this.element.id + '_bottomToolbar')) {\n                getComponent(document.getElementById(this.element.id + '_bottomToolbar'), 'toolbar').destroy();\n                this.createBottomToolbar();\n            }\n            this.objColl = [];\n            this.isImageLoaded = false;\n            this.degree = this.undoRedoStep = 0;\n            this.keyHistory = this.currFlipState = '';\n            this.upperCanvas.style.display = 'none';\n            this.togglePan = this.togglePen = false;\n            this.upperCanvas.style.cursor = this.lowerCanvas.style.cursor = 'default';\n            this.undoRedoColl = [];\n            this.dragCanvas = this.isUndoRedo = false;\n            this.tempKeyHistory = '';\n            this.lowerContext.lineWidth = this.upperContext.lineWidth = undefined;\n            this.touchEndPoint = {};\n            this.currentToolbar = 'main';\n            this.textStartPoints = { x: 0, y: 0 };\n            this.fontSizeColl = [];\n            this.textArea.value = this.textArea.textContent = '';\n            this.textArea.style.display = 'none';\n            this.strokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n            this.textSettings =\n                { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n            this.tempStrokeSettings = { strokeColor: '#fff', fillColor: '', strokeWidth: null };\n            this.tempTextSettings =\n                { text: 'Enter Text', fontFamily: 'Arial', fontSize: null, fontRatio: null, bold: false, italic: false, underline: false };\n            this.timer = undefined;\n            this.penStrokeWidth = undefined;\n            this.currObjType.isUndoAction = false;\n            this.undoRedoStep = 0;\n            this.tempObjColl = undefined;\n            this.adjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0,\n                blur: 0, exposure: 0, sharpen: false, bw: false };\n            this.tempAdjustmentLevel = { brightness: 0, contrast: 0, hue: 0, opacity: 100, saturation: 0,\n                blur: 0, exposure: 0, sharpen: false, bw: false };\n            this.canvasFilter = this.currentFilter = this.tempAdjustmentValue = '';\n            this.lowerContext.filter = this.initialAdjustmentValue = this.adjustmentValue = this.getDefaultFilter();\n            this.destLeft = this.destTop = this.srcLeft = this.srcTop = 0;\n            this.destWidth = this.destHeight = this.srcWidth = this.srcHeight = null;\n            this.currSelectionPoint = null;\n            this.cropDestPoints = { startX: 0, startY: 0, width: 0, height: 0 };\n            this.panDown = null;\n            this.panMove = null;\n            this.tempPanMove = null;\n            this.flipColl = [];\n            this.freehandDrawObj.time = this.freehandDrawObj.lastVelocity = 0;\n            this.freehandDrawObj.pointX = this.freehandDrawObj.pointY = 0;\n            this.points = [];\n            this.pointColl = {};\n            this.pointCounter = this.freehandCounter = this.tempFreehandCounter = this.tempCurrentFreehandDrawIndex = 0;\n            this.isFreehandDrawing = false;\n            this.isReverseRotate = this.isReverseFlip = this.isPreventDragging = this.isRotateZoom = false;\n            this.currentPannedPoint = null;\n            this.fileType = undefined;\n            this.rotateFlipColl = [];\n            this.isCircleCrop = false;\n            this.isCropTab = false;\n            this.rotatedDestPoints = { startX: 0, startY: 0, width: 0, height: 0 };\n            this.croppedDegree = 0;\n            this.freehandDrawHoveredIndex = this.freehandDrawSelectedIndex = null;\n            this.isFreehandDrawingPoint = this.isFreehandDrawEditing = false;\n            this.tempFreeHandDrawEditingStyles = { strokeColor: null, fillColor: null, strokeWidth: null };\n            this.totalPannedInternalPoint = { x: 0, y: 0 };\n            this.totalPannedClientPoint = { x: 0, y: 0 };\n            this.lowerCanvas.style.left = this.upperCanvas.style.left = '';\n            this.lowerCanvas.style.top = this.upperCanvas.style.top = '';\n            this.lowerCanvas.style.maxWidth = this.upperCanvas.style.maxWidth = '';\n            this.lowerCanvas.style.maxHeight = this.upperCanvas.style.maxHeight = '';\n            this.currentSelectionPoint = null;\n            this.totalPannedPoint = { x: 0, y: 0 };\n            this.fileName = '';\n            this.isBrightnessAdjusted = this.isInitialLoading = false;\n            this.defaultZoomFactor = this.cropZoomFactor = this.zoomFactor = 0;\n            this.tempActObj = null;\n            this.lastPan = { x: 0, y: 0 };\n            this.selectedFreehandColor = '#42a5f5';\n            this.isFreehandDrawCustomized = false;\n            this.isShapeInserted = false;\n            this.isAllowCropPan = false;\n            this.tempPannedPoint = { x: 0, y: 0 };\n            this.currObjType = { shape: '', isDragging: false, isActiveObj: false, isText: false, isInitialText: false, isLine: false,\n                isInitialLine: false, isCustomCrop: false, isZoomed: false, isUndoZoom: false,\n                isUndoAction: false, isFiltered: false, isSave: false };\n            this.cropObj = { cropZoom: 0, defaultZoom: 0, totalPannedPoint: { x: 0, y: 0 }, totalPannedClientPoint: { x: 0, y: 0 },\n                totalPannedInternalPoint: { x: 0, y: 0 }, tempFlipPanPoint: { x: 0, y: 0 }, activeObj: {},\n                rotateFlipColl: [], degree: 0, currFlipState: '',\n                destPoints: { startX: 0, startY: 0, width: 0, height: 0 },\n                srcPoints: { startX: 0, startY: 0, width: 0, height: 0 }, filter: '' };\n            this.afterCropActions = [];\n            this.isCancelAction = this.preventZoomBtn = this.isFreehandPointMoved = false;\n            this.isTouch = false;\n            this.freehandDownPoint = { x: 0, y: 0 };\n            this.tempFlipPanPoint = { x: 0, y: 0 };\n            this.currentFreehandDrawIndex = 0;\n            this.tempCurrentFreehandDrawIndex = 0;\n            this.cancelObjColl = [];\n            this.cancelPointColl = [];\n            this.freehandDrawSelectedId = null;\n            this.transformCurrentObj = null;\n            this.rotatedFlipCropSelection = false;\n            this.panStartObj = null;\n            this.currDestinationPoint = null;\n            this.updateCanvas();\n            this.refreshDropDownBtn(false);\n            this.enableDisableToolbarBtn();\n        }\n    };\n    /**\n     * Rotate an image to clockwise and anti-clockwise.\n     *\n     * @param {number} degree - Specifies a degree to rotate an image.\n     * positive integer value for clockwise and negative integer value for anti-clockwise rotation.\n     *\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.rotate = function (degree) {\n        var isRotate = false;\n        if (!this.disabled && this.isImageLoaded && (degree % 90 === 0)) {\n            isRotate = true;\n            var transitionArgs = { degree: degree };\n            this.trigger('rotating', transitionArgs);\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var prevObj = void 0;\n            if (isNullOrUndefined(this.transformCurrentObj)) {\n                prevObj = this.getCurrentObj();\n                prevObj.objColl = extend([], this.objColl, null, true);\n                prevObj.pointColl = extend({}, this.pointColl, null, true);\n                prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            }\n            this.afterCropActions.push(degree === 90 ? 'rotateRight' : 'rotateLeft');\n            var splitWords = [];\n            var activeObjShape = void 0;\n            if (!isNullOrUndefined(this.activeObj.activePoint) && !isNullOrUndefined(this.activeObj.shape)) {\n                if (this.activeObj.shape !== undefined) {\n                    splitWords = this.activeObj.shape.split('-');\n                }\n                if (this.currObjType.isCustomCrop || splitWords[0] === 'crop') {\n                    activeObjShape = this.currObjType.isCustomCrop ? 'custom' : splitWords[1];\n                    this.updateImageRatioForActObj();\n                    this.objColl.push(this.activeObj);\n                    this.refreshActiveObj();\n                }\n            }\n            this.redrawActObj();\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.drawRotatedImage(degree);\n            this.clearOuterCanvas(this.lowerContext);\n            this.clearOuterCanvas(this.upperContext);\n            if (!isNullOrUndefined(activeObjShape)) {\n                this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                this.activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n                this.objColl.pop();\n                this.drawObject('duplicate', this.activeObj);\n                if (!this.isReverseRotate) {\n                    this.refreshToolbar('main', true, true);\n                }\n            }\n            if (!this.isUndoRedo && isNullOrUndefined(this.transformCurrentObj)) {\n                this.updateUndoRedoColl('rotate', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n            }\n            this.isUndoRedo = false;\n            if (isNullOrUndefined(this.activeObj.shape) && !this.isReverseRotate) {\n                this.refreshToolbar('main');\n            }\n            else if (!this.isReverseRotate) {\n                this.refreshToolbar('main', true, true);\n            }\n            this.rotateFlipColl = this.alignRotateFlipColl(this.rotateFlipColl, true);\n        }\n        return isRotate;\n    };\n    /**\n     * Export an image using the specified file name and the extension.\n     *\n     * @param {string} type - Specifies a format of image to be saved.\n     * @param {string} fileName  Specifies a file name to be saved\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.export = function (type, fileName) {\n        var _this = this;\n        if (!this.disabled && this.isImageLoaded) {\n            if (this.isFreehandDrawEditing) {\n                this.applyFreehandDraw();\n            }\n            if (this.togglePen) {\n                this.currObjType.isZoomed = true;\n                this.apply();\n            }\n            if (this.textArea.style.display === 'block') {\n                this.redrawActObj();\n            }\n            this.applyActObj();\n            this.lowerContext.filter = this.canvasFilter;\n            type = type ? type : 'Png';\n            this.redrawActObj();\n            var beforeSave = { cancel: false, fileName: fileName ? fileName : this.fileName,\n                fileType: type };\n            var saved_1 = { fileName: fileName ? fileName : this.fileName, fileType: type };\n            this.trigger('beforeSave', beforeSave, function (observableSaveArgs) {\n                if (!observableSaveArgs.cancel) {\n                    _this.currObjType.isSave = true;\n                    fileName = observableSaveArgs.fileName ? observableSaveArgs.fileName : fileName;\n                    if (type.toLowerCase() === 'svg') {\n                        fileName = fileName || _this.fileName;\n                        _this.toSVGImg(fileName);\n                    }\n                    else if (type.toLowerCase() === 'jpeg') {\n                        fileName = fileName || _this.fileName;\n                        _this.toBlobFn(fileName, type.toLowerCase());\n                    }\n                    else {\n                        fileName = fileName || _this.fileName;\n                        _this.toBlobFn(fileName, type.toLowerCase());\n                    }\n                    _this.trigger('saved', saved_1);\n                    _this.refreshToolbar('main');\n                    _this.lowerCanvas.style.left = _this.upperCanvas.style.left = '';\n                    _this.lowerCanvas.style.top = _this.upperCanvas.style.top = '';\n                    _this.lowerCanvas.style.maxWidth = _this.upperCanvas.style.maxWidth = '';\n                    _this.lowerCanvas.style.maxHeight = _this.upperCanvas.style.maxHeight = '';\n                }\n            });\n        }\n    };\n    /**\n     * Perform selection in an image editor. The selection helps to crop an image.\n     *\n     * @param {string} type - Specifies the shape - circle / square / custom selection / pre-defined ratios.\n     * @param {number} startX  Specifies the start x-coordinate point of the selection.\n     * @param {number} startY  Specifies the start y-coordinate point of the selection.\n     * @param {number} width - Specifies the width of the selection area.\n     * @param {number} height - Specifies the height of the selection area.\n     * @returns {void}.\n     *   ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     *   created : () => {\n     *     imageObj.select('16:9', 10, 10);\n     *  }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    ImageEditor.prototype.select = function (type, startX, startY, width, height) {\n        if (!this.disabled && this.isImageLoaded) {\n            if (this.zoomFactor > 0 && !isNullOrUndefined(this.activeObj.shape) && this.activeObj.shape.split('-')[0] === 'crop' && isNullOrUndefined(this.currentSelectionPoint)) {\n                this.currentSelectionPoint = extend({}, this.activeObj, {}, true);\n            }\n            var isPrevent = false;\n            var splitWords = void 0;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (splitWords === undefined && this.currObjType.isCustomCrop) {\n                isPrevent = true;\n            }\n            else if (splitWords !== undefined && splitWords[0] === 'crop') {\n                isPrevent = true;\n            }\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var prevObj = this.getCurrentObj();\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            this.redrawActObj();\n            this.refreshActiveObj();\n            this.keyHistory = '';\n            this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n            this.upperCanvas.style.display = 'block';\n            if (!isNullOrUndefined(this.currSelectionPoint) || this.defaultZoomFactor > 0 ||\n                (this.degree !== 0 && this.totalPannedInternalPoint.x !== 0 && this.totalPannedInternalPoint.y !== 0 && !isPrevent)) {\n                this.isCircleCrop = false;\n                if (this.defaultZoomFactor > 0) {\n                    var zoomFactor = this.zoomFactor = this.defaultZoomFactor;\n                    this.isCropTab = false;\n                    var isUndoRedo = this.isUndoRedo;\n                    for (var i = 0; i < (zoomFactor * 10); i++) {\n                        this.isUndoRedo = true;\n                        this.zoom(-0.1);\n                    }\n                    this.isUndoRedo = isUndoRedo;\n                    this.resetPanPoints();\n                }\n                this.cancelObjColl = extend([], this.objColl, [], true);\n                this.cancelPointColl = extend([], this.pointColl, [], true);\n                this.updateObjAndFreeHandDrawColl();\n                this.isCropTab = true;\n                this.setCurrSelectionPoints(true);\n                this.zoomFactor = this.cropZoomFactor;\n                if (isNullOrUndefined(this.cropObj.activeObj.shape)) {\n                    this.drawNewSelection(type, startX, startY, width, height);\n                }\n                else {\n                    this.updateUndoRedoColl('crop-selection', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n                }\n            }\n            else {\n                if (type === 'custom') {\n                    this.currObjType.shape = '';\n                }\n                this.drawNewSelection(type, startX, startY, width, height);\n            }\n        }\n    };\n    /**\n     * Enable or disable a freehand drawing in an Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether enable or disable freehand drawing.\n     *\n     * @returns {void}.\n     * @private\n     */\n    ImageEditor.prototype.freeHandDraw = function (value) {\n        if (value) {\n            this.points = [];\n            this.refreshActiveObj();\n            this.togglePen = true;\n            this.upperCanvas.style.cursor = 'crosshair';\n            this.upperCanvas.style.display = 'block';\n            if (isNullOrUndefined(this.activeObj.strokeSettings)) {\n                this.activeObj.strokeSettings = this.strokeSettings;\n            }\n            if (isNullOrUndefined(this.activeObj.strokeSettings.strokeWidth)) {\n                this.activeObj.strokeSettings.strokeWidth = 4;\n            }\n            this.refreshToolbar('pen');\n        }\n        else {\n            this.upperCanvas.style.cursor = 'default';\n            this.apply();\n            this.refreshToolbar('main');\n            this.currentToolbar = 'main';\n            this.isFreehandDrawCustomized = false;\n        }\n    };\n    /**\n     * Enable or disable a freehand drawing in an Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether enable or disable freehand drawing.\n     *\n     *  @returns {void}.\n     */\n    ImageEditor.prototype.freehandDraw = function (value) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.freeHandDraw(value);\n        }\n    };\n    /**\n     * Enable or disable a panning on the Image Editor.\n     *\n     * @param {boolean} value - Specifies a value whether enable or disable panning.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.pan = function (value) {\n        if (!this.disabled && this.isImageLoaded) {\n            if (value) {\n                this.togglePan = true;\n                this.redrawActObj();\n                this.dragCanvas = true;\n                this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'grab';\n                this.panDown = null;\n            }\n            else {\n                this.dragCanvas = this.togglePan = this.currObjType.isCustomCrop = false;\n                this.lowerCanvas.style.cursor = this.upperCanvas.style.cursor = 'default';\n            }\n        }\n    };\n    /**\n     * Increase / Decrease the magnification of an image.\n     *\n     * @param {boolean} value - Specifies a value to be zoomed on the image.\n     * @returns {void}.\n     */\n    ImageEditor.prototype.zoom = function (value) {\n        if (!this.disabled && this.isImageLoaded) {\n            if ((this.zoomFactor === 0 && value < 0) || (this.zoomFactor > 2 && value > 0 ||\n                (this.zoomFactor > 0 && value < 0 && this.disableZoomOutBtn()))) {\n                return;\n            }\n            var splitWords = void 0;\n            var tempActiveObj = void 0;\n            var isShape = false;\n            if (this.activeObj.shape !== undefined) {\n                splitWords = this.activeObj.shape.split('-');\n            }\n            if (splitWords !== undefined && splitWords[0] === 'crop') {\n                tempActiveObj = extend({}, this.activeObj, {}, true);\n                this.isCropTab = true;\n            }\n            else if (!isNullOrUndefined(this.activeObj.shape) && splitWords[0] !== 'crop') {\n                isShape = true;\n            }\n            var zoomPoint = void 0;\n            var zoomLevel = void 0;\n            if (this.isCropTab && !isNullOrUndefined(tempActiveObj)) {\n                zoomLevel = this.cropZoomFactor;\n                zoomPoint = { x: this.activeObj.activePoint.startX + (this.activeObj.activePoint.width / 2),\n                    y: this.activeObj.activePoint.startY + (this.activeObj.activePoint.height / 2) };\n            }\n            else {\n                zoomLevel = this.defaultZoomFactor;\n                zoomPoint = { x: this.lowerCanvas.clientWidth / 2, y: this.lowerCanvas.clientHeight / 2 };\n            }\n            var zoomEventArgs = { zoomPoint: zoomPoint, zoomLevel: zoomLevel };\n            this.trigger('zooming', zoomEventArgs);\n            var prevCropObj = extend({}, this.cropObj, {}, true);\n            var prevObj = this.getCurrentObj();\n            prevObj.objColl = extend([], this.objColl, [], true);\n            prevObj.pointColl = extend([], this.pointColl, [], true);\n            prevObj.afterCropActions = extend([], this.afterCropActions, [], true);\n            this.redrawActObj();\n            this.refreshActiveObj();\n            this.upperContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.lowerContext.filter = this.canvasFilter;\n            this.upperCanvas.style.cursor = 'default';\n            var zoomState = void 0;\n            var objColl = extend([], this.objColl, [], true);\n            if (value === 3.75 || value === 1) {\n                zoomState = 0.1;\n            }\n            else if (value === -3.75) {\n                zoomState = -0.1;\n            }\n            else {\n                zoomState = value;\n            }\n            if (!this.isCropTab) {\n                if (this.degree !== 0) {\n                    this.redrawActObj();\n                    this.currentPannedPoint = { x: 0, y: 0 };\n                    this.rotatePan(true, true);\n                }\n                this.updateObjAndFreeHandDrawColl();\n            }\n            if (this.degree === 0) {\n                this.drawZoomImgToCanvas(value, tempActiveObj);\n                if (this.getCurrentPanRegion() !== '') {\n                    this.tempFlipPanPoint.x += this.totalPannedPoint.x;\n                    this.tempFlipPanPoint.y += this.totalPannedPoint.y;\n                    objColl = extend([], this.objColl, [], true);\n                    this.objColl = [];\n                    var destLeft = this.destLeft;\n                    var destTop = this.destTop;\n                    this.setDestPointsForFlipState();\n                    this.rotatedFlip();\n                    this.destLeft = destLeft;\n                    this.destTop = destTop;\n                    this.objColl = objColl;\n                    this.zoomObjColl();\n                    this.zoomFreehandDrawColl();\n                    this.updateObjAndFreeHandDrawColl();\n                }\n                if (this.zoomFactor === 0 && !this.isCropTab) {\n                    this.totalPannedPoint = { x: 0, y: 0 };\n                }\n            }\n            else {\n                this.updateObjAndFreeHandDrawColl();\n                this.totalPannedClientPoint = { x: 0, y: 0 };\n                this.totalPannedInternalPoint = { x: 0, y: 0 };\n                this.rotateZoom(value);\n                if (this.getCurrentPanRegion() !== '') {\n                    var temp = this.lowerContext.filter;\n                    this.lowerContext.filter = 'none';\n                    this.zoomObjColl();\n                    this.zoomFreehandDrawColl();\n                    this.lowerContext.filter = temp;\n                }\n            }\n            if (this.getCurrentPanRegion() === '') {\n                var temp = this.lowerContext.filter;\n                this.lowerContext.filter = 'none';\n                this.zoomObjColl();\n                this.zoomFreehandDrawColl();\n                this.lowerContext.filter = temp;\n            }\n            if ((!isNullOrUndefined(this.currSelectionPoint) && this.currSelectionPoint.shape === 'crop-circle') || this.isCircleCrop) {\n                this.cropCircle(this.lowerContext);\n            }\n            this.clearOuterCanvas(this.lowerContext);\n            this.refreshActiveObj();\n            if (!isNullOrUndefined(tempActiveObj)) {\n                this.activeObj = extend({}, tempActiveObj, {}, true);\n                this.drawObject('duplicate', this.activeObj);\n                if (this.zoomFactor === 0) {\n                    this.currSelectionPoint = null;\n                }\n            }\n            if (!this.isUndoRedo) {\n                this.updateUndoRedoColl('zoom', prevObj, prevObj.objColl, prevObj.pointColl, prevCropObj);\n            }\n            this.isUndoRedo = false;\n            var zoomOut = document.querySelector('#' + this.element.id + '_zoomOut');\n            if (!isNullOrUndefined(zoomOut) && this.zoomFactor === 0) {\n                zoomOut.classList.add('e-disabled');\n                zoomOut.parentElement.classList.add('e-overlay');\n            }\n            else if (!isNullOrUndefined(zoomOut)) {\n                zoomOut.classList.remove('e-disabled');\n                zoomOut.parentElement.classList.remove('e-overlay');\n            }\n            this.autoEnablePan();\n            if (!isNullOrUndefined(tempActiveObj)) {\n                this.activeObj = extend({}, tempActiveObj, {}, true);\n            }\n            if (this.activeObj.shape === 'crop-custom') {\n                this.currObjType.isCustomCrop = true;\n            }\n            var panBtn = this.element.querySelector('.e-img-pan .e-btn');\n            if (!isNullOrUndefined(panBtn) && this.togglePan) {\n                panBtn.classList.add('e-selected-btn');\n            }\n            else if (!isNullOrUndefined(panBtn)) {\n                panBtn.classList.remove('e-selected-btn');\n            }\n            if (isShape) {\n                this.activeObj = extend({}, this.objColl[this.objColl.length - 1], {}, true);\n                this.objColl.pop();\n                this.drawObject('duplicate', this.activeObj);\n                this.updateToolbarItems();\n            }\n        }\n    };\n    /**\n     * Draw ellipse on an image.\n     *\n     * @param {number} x - Specifies x-coordinate of ellipse.\n     * @param {number} y - Specifies y-coordinate of ellipse.\n     * @param {number} radiusX - the radius x point for the ellipse.\n     * @param {number} radiusY - the radius y point for the ellipse.\n     * @param {number} strokeWidth - the stroke width of ellipse.\n     * @param {string} strokeColor - the stroke color of ellipse.\n     * @param {string} fillColor - the fill color of the ellipse.\n     * @returns {boolean}.\n     *\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * * var imageObj = new ImageEditor({\n     * created: () => {\n     * imageObj.drawEllipse(10, 10, 40, 60);\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    ImageEditor.prototype.drawEllipse = function (x, y, radiusX, radiusY, strokeWidth, strokeColor, fillColor) {\n        var isEllipse = false;\n        var inRange = this.isPointsInRange(x, y);\n        if (!this.disabled && this.isImageLoaded && inRange) {\n            isEllipse = true;\n            this.redrawActObj();\n            this.activeObj.shape = 'ellipse';\n            if (this.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                this.upperCanvas.style.cursor = 'default';\n                this.currObjType.shape = '';\n            }\n            this.currObjType.isCustomCrop = false;\n            var start = { x: x, y: y };\n            this.drawShape('ellipse', strokeWidth, strokeColor, fillColor, start, radiusX, radiusY);\n        }\n        return isEllipse;\n    };\n    /**\n     * Draw line on an image.\n     *\n     * @param {number} startX  Specifies start point x-coordinate of line.\n     * @param {number} startY  Specifies start point y-coordinate of line.\n     * @param {number} endX - Specifies end point x-coordinates of line.\n     * @param {number} endY - Specifies end point y-coordinates of the line.\n     * @param {number} strokeWidth - Specifies the stroke width of line.\n     * @param {string} strokeColor - Specifies the stroke color of line.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawLine = function (startX, startY, endX, endY, strokeWidth, strokeColor) {\n        var isLine = false;\n        var inRange = this.isPointsInRange(startX, startY);\n        if (!this.disabled && this.isImageLoaded && inRange) {\n            isLine = true;\n            this.redrawActObj();\n            this.activeObj.shape = 'line';\n            if (this.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                this.upperCanvas.style.cursor = 'default';\n                this.currObjType.shape = '';\n            }\n            this.currObjType.isCustomCrop = false;\n            var start = { x: startX, y: startY };\n            var width = endX - startX;\n            var height = endY - startY;\n            this.drawShape('line', strokeWidth, strokeColor, null, start, width, height);\n        }\n        return isLine;\n    };\n    /**\n     * Draw a rectangle on an image.\n     *\n     * @param {number} x - Specifies x-coordinate of rectangle.\n     * @param {number} y - Specifies y-coordinate of rectangle.\n     * @param {number} width - Specifies the width of the rectangle.\n     * @param {number} height - Specifies the height of the rectangle.\n     * @param {number} strokeWidth - Specifies the stroke width of rectangle.\n     * @param {string} strokeColor - Specifies the stroke color of rectangle.\n     * @param {string} fillColor - the fill color of the rectangle.\n     * @returns {boolean}.\n     */\n    ImageEditor.prototype.drawRectangle = function (x, y, width, height, strokeWidth, strokeColor, fillColor) {\n        var isRectangle = false;\n        var inRange = this.isPointsInRange(x, y);\n        if (!this.disabled && this.isImageLoaded && inRange) {\n            isRectangle = true;\n            this.redrawActObj();\n            this.activeObj.shape = 'rectangle';\n            if (this.currObjType.shape === 'freehanddraw') {\n                this.apply();\n                this.upperCanvas.style.cursor = 'default';\n                this.currObjType.shape = '';\n            }\n            this.currObjType.isCustomCrop = false;\n            var start = { x: x, y: y };\n            this.drawShape('rectangle', strokeWidth, strokeColor, fillColor, start, width, height);\n        }\n        return isRectangle;\n    };\n    /**\n     * Draw a text on an image.\n     *\n     * @param {number} x - Specifies x-coordinate of text.\n     * @param {number} y - Specifies y-coordinate of text.\n     * @param {string} text - Specifies the text to add on an image.\n     * @param {string} fontFamily - Specifies the font family of the text.\n     * @param {number} fontSize - Specifies the font size of the text.\n     * @param {boolean} bold - Specifies whether the text is bold or not.\n     * @param {boolean} italic - Specifies whether the text is italic or not.\n     * @param {string} color - Specifies font color of the text.\n     * @returns {boolean}.\n     *\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     * created: () => {\n     *  imageObj.drawText(10, 10, 'Syncfusion', 'Arial', 12, true, true, '#000');\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     *\n     * </script>\n     * ```\n     */\n    ImageEditor.prototype.drawText = function (x, y, text, fontFamily, fontSize, bold, italic, color) {\n        var isText = false;\n        var inRange = this.isPointsInRange(x, y);\n        if (!this.disabled && this.isImageLoaded && inRange) {\n            isText = true;\n            this.drawShapeText(text, fontFamily, fontSize, bold, italic, color, x, y);\n        }\n        return isText;\n    };\n    /**\n     * Selects a shape based on the given shape id. The id can be got from the public method getShapeSettings.\n     *\n     * @param {string} id - Specifies the shape id to select a shape on an image.\n     * @returns {boolean}.\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     * created: () => {\n     *  imageObj.selectShape('shape_1');\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    ImageEditor.prototype.selectShape = function (id) {\n        var isSelected = false;\n        if (!this.disabled && this.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                var obj = void 0;\n                for (var i = 0; i < this.objColl.length; i++) {\n                    if (this.objColl[i].currIndex === id) {\n                        obj = extend({}, this.objColl[i], {}, true);\n                        break;\n                    }\n                }\n                if (isNullOrUndefined(obj)) {\n                    isSelected = false;\n                }\n                else {\n                    isSelected = true;\n                    this.activeObj = obj;\n                    this.lowerContext.filter = this.canvasFilter;\n                    this.redrawShape(this.activeObj);\n                    if (this.activeObj.shape === 'text') {\n                        this.refreshToolbar('text');\n                    }\n                    else if (this.activeObj.shape === 'pen') {\n                        this.refreshToolbar('pen');\n                    }\n                    else {\n                        this.refreshToolbar('shapes');\n                    }\n                    this.updateToolbarItems();\n                }\n            }\n            else if (id.split('_')[0] === 'pen') {\n                if (this.isFreehandDrawEditing) {\n                    this.okBtn();\n                }\n                if (this.isFreehandDrawIndex(parseInt(id.split('_')[1], 10) - 1)) {\n                    isSelected = true;\n                    this.selectFreehandDraw(parseInt(id.split('_')[1], 10) - 1);\n                    this.updateToolbarItems();\n                }\n                else {\n                    isSelected = false;\n                }\n            }\n        }\n        return isSelected;\n    };\n    /**\n     * Deletes a shape based on the given shape id.The id can be got from the public method getShapeSettings.\n     *\n     * @param {string} id - Specifies the shape id to delete the shape on an image.\n     * @returns {void}.\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     * created: () => {\n     *  imageObj.deleteShape('shape_1');\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    ImageEditor.prototype.deleteShape = function (id) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                for (var i = 0; i < this.objColl.length; i++) {\n                    if (this.objColl[i].currIndex === id) {\n                        this.objColl.splice(i, 1);\n                        break;\n                    }\n                }\n            }\n            else if (id.split('_')[0] === 'pen') {\n                if (this.isFreehandDrawIndex(parseInt(id.split('_')[1], 10) - 1)) {\n                    this.deleteFreehandDraw(parseInt(id.split('_')[1], 10) - 1, true);\n                }\n            }\n            this.lowerContext.filter = this.canvasFilter;\n            this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n            this.redrawImgWithObj();\n            this.refreshToolbar('main');\n        }\n    };\n    /**\n     * Get particular shapes details based on id of the shape which is drawn on an image editor.\n     *\n     * @param {string} id - Specifies the shape id on an image.\n     * @returns {ShapeSettings}.\n     * ```html\n     * <div id='imageeditor'></div>\n     * ```\n     * ```typescript\n     * <script>\n     * var imageObj = new ImageEditor({\n     * created: () => {\n     *  imageObj.getShapeSetting('shape_1');\n     * }\n     * });\n     * imageObj.appendTo(\"#imageeditor\");\n     * </script>\n     * ```\n     */\n    ImageEditor.prototype.getShapeSetting = function (id) {\n        var shapeDetails;\n        if (!this.disabled && this.isImageLoaded) {\n            this.applyActObj();\n            if (id.split('_')[0] === 'shape') {\n                var obj = void 0;\n                for (var i = 0; i < this.objColl.length; i++) {\n                    if (this.objColl[i].currIndex === id) {\n                        obj = extend({}, this.objColl[i], {}, true);\n                        break;\n                    }\n                }\n                shapeDetails = this.getObjDetails(obj);\n            }\n            else if (id.split('_')[0] === 'pen') {\n                shapeDetails = this.getFreehandDrawDetails(parseInt(id.split('_')[1], 10) - 1);\n            }\n        }\n        return shapeDetails;\n    };\n    /**\n     * Get all the shapes details which is drawn on an image editor.\n     *\n     * @returns {ShapeSettings[]}.\n     */\n    ImageEditor.prototype.getShapeSettings = function () {\n        var shapeDetailsColl = [];\n        if (!this.disabled && this.isImageLoaded) {\n            this.applyActObj();\n            for (var i = 0; i < this.objColl.length; i++) {\n                var shapeDetails = this.getObjDetails(this.objColl[i]);\n                shapeDetailsColl.push(shapeDetails);\n            }\n            for (var i = 0; i < this.freehandCounter; i++) {\n                var shapeDetails = this.getFreehandDrawDetails(i);\n                shapeDetailsColl.push(shapeDetails);\n            }\n        }\n        return shapeDetailsColl;\n    };\n    /**\n     * To refresh the Canvas Wrapper.\n     *\n     * @returns {void}.\n     */\n    ImageEditor.prototype.update = function () {\n        var canvasWrapper = document.querySelector('#' + this.element.id + '_canvasWrapper');\n        if (!isNullOrUndefined(canvasWrapper)) {\n            canvasWrapper.style.width = this.element.offsetWidth - 2 + 'px';\n        }\n        this.lowerCanvas.width = this.upperCanvas.width = this.element.offsetWidth - 2;\n        if (Browser.isDevice) {\n            if (!isNullOrUndefined(canvasWrapper)) {\n                canvasWrapper.style.height = this.element.offsetHeight - (2 * this.toolbarHeight) - 5 + 'px';\n            }\n            this.lowerCanvas.height = this.upperCanvas.height = this.element.offsetHeight - (2 * this.toolbarHeight) - 5;\n        }\n        else {\n            if (!isNullOrUndefined(canvasWrapper)) {\n                canvasWrapper.style.height = this.element.offsetHeight - this.toolbarHeight - 3 + 'px';\n            }\n            this.lowerCanvas.height = this.upperCanvas.height = this.element.offsetHeight - this.toolbarHeight - 3;\n        }\n        this.lowerContext.filter = this.canvasFilter = this.initialAdjustmentValue = this.adjustmentValue = this.getDefaultFilter();\n        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n    };\n    /**\n     * To apply the filters to an image\n     *\n     * @param {ImageFinetuneOptions } finetuneOption - Specifies the finetune options to the image.\n     * @param {number } value - Specifies the value for finetuning the image.\n     * @returns {void}.\n     *\n     */\n    ImageEditor.prototype.finetuneImage = function (finetuneOption, value) {\n        if (!this.disabled && this.isImageLoaded) {\n            switch (finetuneOption.toLowerCase()) {\n                case 'brightness':\n                    this.setBrightness(value);\n                    break;\n                case 'contrast':\n                    this.setContrast(value);\n                    break;\n                case 'hue':\n                    this.setHue(value);\n                    break;\n                case 'saturation':\n                    this.setSaturation(value);\n                    break;\n                case 'opacity':\n                    this.setOpacity(value);\n                    break;\n                case 'blur':\n                    this.setBlur(value);\n                    break;\n                case 'exposure':\n                    this.setExposure(value);\n                    break;\n            }\n            this.canvasFilter = this.lowerContext.filter;\n        }\n    };\n    /**\n     * To apply the filters to an image\n     *\n     * @param {ImageFilterOptions } filterOption - Specifies the filter options to the image.\n     * @returns {void}.\n     */\n    ImageEditor.prototype.applyImageFilter = function (filterOption) {\n        if (!this.disabled && this.isImageLoaded) {\n            this.setFilter(filterOption.toString());\n            this.canvasFilter = this.lowerContext.filter;\n        }\n    };\n    /**\n     * Undo the last user action.\n     *\n     * @private\n     * @returns {void}.\n     */\n    ImageEditor.prototype.undo = function () {\n        if (!this.disabled && this.isImageLoaded) {\n            if (this.undoRedoStep > 0) {\n                if (!isNullOrUndefined(this.activeObj.shape)) {\n                    this.refreshToolbar('shapes');\n                }\n                else {\n                    this.refreshToolbar('main');\n                }\n                if (!isNullOrUndefined(this.activeObj.activePoint) && this.activeObj.activePoint.width !== 0) {\n                    this.tempActObj = this.activeObj;\n                }\n                this.refreshActiveObj();\n                this.undoRedoStep--;\n                this.enableDisableToolbarBtn();\n                this.isUndoRedo = true;\n                var obj = this.undoRedoColl[this.undoRedoStep];\n                if (this.undoRedoColl.length === this.undoRedoStep) {\n                    this.currObjType.isUndoAction = false;\n                }\n                else {\n                    this.currObjType.isUndoAction = true;\n                }\n                if (obj.operation !== 'textAreaCustomization' && this.textArea.style.display === 'block') {\n                    this.textArea.style.display = 'none';\n                }\n                this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                this.isCancelAction = true;\n                var activeObj = void 0;\n                this.cropObj = extend({}, obj.previousCropObj, {}, true);\n                this.afterCropActions = obj.previousObj.afterCropActions;\n                this.lowerContext.filter = this.canvasFilter = obj.previousObj.filter;\n                switch (obj.operation) {\n                    case 'shapeTransform':\n                        this.objColl = extend([], obj.previousObjColl, [], true);\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        this.refreshActiveObj();\n                        break;\n                    case 'freehanddraw':\n                        this.pointColl = obj.previousPointColl;\n                        this.freehandCounter = this.pointColl.length;\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        break;\n                    case 'freehanddrawCustomized':\n                        this.pointColl = obj.previousPointColl;\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        break;\n                    case 'deleteFreehandDrawing':\n                    case 'deleteObj':\n                        if (obj.operation === 'deleteFreehandDrawing') {\n                            this.pointColl = obj.previousPointColl;\n                            this.freehandCounter = this.pointColl.length;\n                        }\n                        else if (obj.operation === 'deleteObj') {\n                            this.objColl = obj.previousObjColl;\n                        }\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        break;\n                    case 'selectionTransform':\n                        this.activeObj = extend({}, obj.previousObj.activeObj, {}, true);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        if (this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) {\n                            this.drawObject('duplicate', this.activeObj);\n                            this.refreshToolbar('main', true, true);\n                        }\n                        else {\n                            this.refreshToolbar('main');\n                            this.performUndoDefaultAction(obj);\n                        }\n                        this.currObjType.isCustomCrop = false;\n                        break;\n                    case 'textAreaCustomization':\n                        this.objColl = extend([], obj.previousObjColl, [], true);\n                        for (var i = 0; i < obj.previousObjColl.length; i++) {\n                            if (!isNullOrUndefined(this.tempActObj)) {\n                                if (this.tempActObj.currIndex === obj.previousObjColl[i].currIndex) {\n                                    activeObj = extend({}, obj.previousObjColl[i], {}, true);\n                                    this.objColl.splice(i, 1);\n                                    break;\n                                }\n                            }\n                            else {\n                                activeObj = extend({}, obj.previousObjColl[obj.previousObjColl.length - 1], {}, true);\n                                this.objColl.splice(i, 1);\n                                break;\n                            }\n                        }\n                        if (!isNullOrUndefined(activeObj)) {\n                            this.updateTextBox(activeObj);\n                        }\n                        break;\n                    case 'text':\n                        if (!isNullOrUndefined(this.tempActObj)) {\n                            this.activeObj = extend({}, this.tempActObj, {}, true);\n                        }\n                        if (obj.previousObjColl.length === 0 && this.objColl.length === 1) {\n                            this.tempActObj = extend({}, this.objColl[0], {}, true);\n                        }\n                        else {\n                            for (var i = 0; i < this.objColl.length; i++) {\n                                if (!isNullOrUndefined(this.objColl[i]) &&\n                                    isNullOrUndefined(obj.previousObjColl[i])) {\n                                    this.tempActObj = extend({}, this.objColl[i], {}, true);\n                                    break;\n                                }\n                                if (obj.previousObjColl[i].currIndex !== this.objColl[i].currIndex) {\n                                    this.tempActObj = extend({}, this.objColl[i], {}, true);\n                                    break;\n                                }\n                            }\n                        }\n                        this.activeObj = extend({}, this.tempActObj, {}, true);\n                        this.objColl = extend([], obj.previousObjColl, [], true);\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        if (!isNullOrUndefined(this.activeObj) && this.activeObj.activePoint.width !== 0\n                            && this.activeObj.activePoint.height !== 0) {\n                            this.drawObject('duplicate');\n                        }\n                        else {\n                            this.textArea.style.display = 'block';\n                            this.textArea.value = obj.previousText;\n                        }\n                        break;\n                    default:\n                        this.performUndoDefaultAction(obj);\n                        this.setAdjustment(obj.operation);\n                        this.updateFilter(obj.operation, obj.filter);\n                        break;\n                }\n                this.clearOuterCanvas(this.lowerContext);\n                if (this.isCircleCrop && obj.operation !== 'crop') {\n                    this.cropCircle(this.lowerContext);\n                }\n                if (this.zoomFactor > 0) {\n                    this.dragCanvas = true;\n                }\n                this.isCancelAction = false;\n                if (!isNullOrUndefined(this.activeObj.shape) && this.activeObj.shape.split('-')[0] === 'crop') {\n                    this.refreshToolbar('main', true, true);\n                }\n                else {\n                    this.refreshToolbar('main');\n                }\n            }\n        }\n    };\n    /**\n     * Redo the last user action.\n     *\n     * @private\n     * @returns {void}.\n     */\n    ImageEditor.prototype.redo = function () {\n        if (!this.disabled && this.isImageLoaded) {\n            if (this.undoRedoStep < this.undoRedoColl.length) {\n                if (!isNullOrUndefined(this.activeObj.shape)) {\n                    this.refreshToolbar('shapes');\n                }\n                else {\n                    this.refreshToolbar('main');\n                }\n                this.undoRedoStep++;\n                this.enableDisableToolbarBtn();\n                this.isUndoRedo = true;\n                var obj = this.undoRedoColl[this.undoRedoStep - 1];\n                if (this.undoRedoColl.length === this.undoRedoStep) {\n                    this.currObjType.isUndoAction = false;\n                }\n                else {\n                    this.currObjType.isUndoAction = true;\n                }\n                if (obj.operation !== 'textAreaCustomization' && this.textArea.style.display === 'block') {\n                    this.textArea.style.display = 'none';\n                }\n                this.element.querySelector('.e-contextual-toolbar-wrapper').classList.add('e-hide');\n                this.isCancelAction = true;\n                this.cropObj = extend({}, obj.currentCropObj, {}, true);\n                this.afterCropActions = obj.currentObj.afterCropActions;\n                this.lowerContext.filter = this.canvasFilter = obj.currentObj.filter;\n                var activeObj = void 0;\n                var tempUndoRedoColl = void 0;\n                var tempUndoRedoStep = void 0;\n                switch (obj.operation) {\n                    case 'shapeTransform':\n                        this.objColl = extend([], obj.currentObjColl, [], true);\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        this.refreshActiveObj();\n                        break;\n                    case 'freehanddraw':\n                        this.pointColl = obj.currentPointColl;\n                        this.freehandCounter = this.pointColl.length;\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        break;\n                    case 'freehanddrawCustomized':\n                        this.pointColl = obj.currentPointColl;\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        break;\n                    case 'deleteFreehandDrawing':\n                    case 'deleteObj':\n                        if (obj.operation === 'deleteFreehandDrawing') {\n                            this.pointColl = obj.currentPointColl;\n                            this.freehandCounter = this.pointColl.length;\n                        }\n                        else if (obj.operation === 'deleteObj') {\n                            this.objColl = obj.currentObjColl;\n                        }\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        break;\n                    case 'selectionTransform':\n                        this.activeObj = extend({}, obj.currentObj.activeObj, {}, true);\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        if (this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) {\n                            this.drawObject('duplicate', this.activeObj);\n                            this.refreshToolbar('main', true, true);\n                        }\n                        else {\n                            this.refreshToolbar('main');\n                        }\n                        this.currObjType.isCustomCrop = false;\n                        break;\n                    case 'textAreaCustomization':\n                        this.objColl = extend([], obj.currentObjColl, [], true);\n                        for (var i = 0; i < obj.currentObjColl.length; i++) {\n                            if (!isNullOrUndefined(this.tempActObj)) {\n                                if (this.tempActObj.currIndex === obj.currentObjColl[i].currIndex) {\n                                    activeObj = extend({}, obj.currentObjColl[i], {}, true);\n                                    this.objColl.splice(i, 1);\n                                    break;\n                                }\n                            }\n                            else {\n                                activeObj = extend({}, obj.currentObjColl[obj.currentObjColl.length - 1], {}, true);\n                                this.objColl.splice(i, 1);\n                                break;\n                            }\n                        }\n                        if (!isNullOrUndefined(activeObj)) {\n                            this.updateTextBox(activeObj);\n                        }\n                        break;\n                    case 'text':\n                        if (!isNullOrUndefined(this.tempActObj)) {\n                            this.activeObj = extend({}, this.tempActObj, {}, true);\n                        }\n                        if (obj.previousObjColl.length === 0 && this.objColl.length === 1) {\n                            this.tempActObj = extend({}, this.objColl[0], {}, true);\n                        }\n                        else {\n                            for (var i = 0; i < this.objColl.length; i++) {\n                                if (!isNullOrUndefined(this.objColl[i]) &&\n                                    isNullOrUndefined(obj.previousObjColl[i])) {\n                                    this.tempActObj = extend({}, this.objColl[i], {}, true);\n                                    break;\n                                }\n                                if (obj.previousObjColl[i].currIndex !== this.objColl[i].currIndex) {\n                                    this.tempActObj = extend({}, this.objColl[i], {}, true);\n                                    break;\n                                }\n                            }\n                        }\n                        this.objColl = extend([], obj.currentObjColl, [], true);\n                        this.lowerContext.clearRect(0, 0, this.lowerCanvas.width, this.lowerCanvas.height);\n                        this.isUndoRedo = true;\n                        this.redrawImgWithObj();\n                        if (!isNullOrUndefined(this.tempActObj)) {\n                            this.activeObj = extend({}, this.tempActObj, {}, true);\n                        }\n                        this.textArea.style.display = 'block';\n                        this.textArea.value = obj.currentText;\n                        tempUndoRedoColl = extend([], this.undoRedoColl, [], true);\n                        tempUndoRedoStep = this.undoRedoStep;\n                        this.redrawActObj();\n                        this.undoRedoColl = tempUndoRedoColl;\n                        this.undoRedoStep = tempUndoRedoStep;\n                        this.textArea.style.display = 'none';\n                        this.textArea.value = '';\n                        this.redrawActObj();\n                        break;\n                    default:\n                        this.objColl = [];\n                        this.pointColl = [];\n                        this.freehandCounter = 0;\n                        this.setCurrentObj(obj.currentObj);\n                        this.destLeft = obj.currentObj.destPoints.startX;\n                        this.destTop = obj.currentObj.destPoints.startY;\n                        activeObj = extend({}, this.activeObj, {}, true);\n                        this.objColl = extend([], obj.currentObjColl, [], true);\n                        this.pointColl = extend([], obj.currentPointColl, [], true);\n                        this.freehandCounter = this.pointColl.length;\n                        this.lowerContext.filter = 'none';\n                        this.iterateObjColl();\n                        this.freehandRedraw(this.lowerContext);\n                        this.lowerContext.filter = obj.currentObj.filter;\n                        this.activeObj = activeObj;\n                        this.upperContext.clearRect(0, 0, this.upperCanvas.width, this.upperCanvas.height);\n                        if (this.activeObj.activePoint.width !== 0 && this.activeObj.activePoint.height !== 0) {\n                            this.drawObject('duplicate');\n                        }\n                        this.setAdjustment(obj.operation);\n                        this.updateFilter(obj.operation);\n                        break;\n                }\n                this.clearOuterCanvas(this.lowerContext);\n                if (this.isCircleCrop) {\n                    this.cropCircle(this.lowerContext);\n                }\n                if (this.zoomFactor > 0) {\n                    this.dragCanvas = true;\n                }\n                this.isCancelAction = false;\n                if (this.undoRedoStep === this.undoRedoColl.length) {\n                    this.isUndoRedo = false;\n                }\n                if (!isNullOrUndefined(this.activeObj.shape) && this.activeObj.shape.split('-')[0] === 'crop') {\n                    this.refreshToolbar('main', true, true);\n                }\n                else {\n                    this.refreshToolbar('main');\n                }\n            }\n        }\n    };\n    var ImageEditor_1;\n    __decorate([\n        Property('')\n    ], ImageEditor.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('100%')\n    ], ImageEditor.prototype, \"height\", void 0);\n    __decorate([\n        Property('Bootstrap5')\n    ], ImageEditor.prototype, \"theme\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], ImageEditor.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property('100%')\n    ], ImageEditor.prototype, \"width\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"allowUndoRedo\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"isReadOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"enableRtl\", void 0);\n    __decorate([\n        Property(false)\n    ], ImageEditor.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Complex({}, FinetuneSettings)\n    ], ImageEditor.prototype, \"finetuneSettings\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"beforeSave\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"zooming\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"panning\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"cropping\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"rotating\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"flipping\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"shapeChanging\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"fileOpened\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"saved\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarCreated\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarUpdating\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"toolbarItemClicked\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"imageFiltering\", void 0);\n    __decorate([\n        Event()\n    ], ImageEditor.prototype, \"finetuneValueChanging\", void 0);\n    ImageEditor = ImageEditor_1 = __decorate([\n        NotifyPropertyChanges\n    ], ImageEditor);\n    return ImageEditor;\n}(Component));\nexport { ImageEditor };\n"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","FinetuneSettings","_super","apply","Property","ChildProperty","ImageEditor","options","element","_this","call","degree","isUndoRedo","dragCanvas","dragElement","keyHistory","tempKeyHistory","mouseDownPoint","x","y","previousPoint","dragPoint","startX","startY","endX","endY","diffPoint","oldPoint","objColl","undoRedoColl","isImageLoaded","strokeSettings","strokeColor","fillColor","strokeWidth","tempStrokeSettings","textSettings","text","fontFamily","fontSize","fontRatio","bold","italic","underline","tempTextSettings","toolbarHeight","togglePan","disablePan","currFlipState","touchEndPoint","undoRedoStep","togglePen","currentToolbar","textStartPoints","fontSizeColl","textRow","activeObj","activePoint","width","height","flipObjColl","tempActiveObj","currObjType","shape","isDragging","isActiveObj","isText","isInitialText","isLine","isInitialLine","isCustomCrop","isZoomed","isUndoZoom","isUndoAction","isFiltered","isSave","defToolbarItems","isTimer","isFirstMove","startTouches","tempTouches","adjustmentLevel","brightness","contrast","hue","opacity","saturation","blur","exposure","sharpen","bw","tempAdjustmentLevel","adjustmentValue","initialAdjustmentValue","tempAdjustmentValue","currentFilter","tempFilter","canvasFilter","tempUndoRedoColl","tempUndoRedoStep","zoomFactor","tempZoomFactor","destLeft","destTop","srcLeft","srcTop","cropDestPoints","flipColl","isReverseRotate","isReverseFlip","isPreventDragging","isRotateZoom","rotateFlipColl","isCircleCrop","rotatedDestPoints","croppedDegree","isFreehandDrawingPoint","isFreehandDrawEditing","tempFreeHandDrawEditingStyles","totalPannedInternalPoint","totalPannedClientPoint","totalPannedPoint","isCropTab","cropZoomFactor","defaultZoomFactor","fileName","isBrightnessAdjusted","isInitialLoading","freehandDrawObj","lastWidth","lastVelocity","time","pointX","pointY","points","pointColl","pointCounter","freehandCounter","isFreehandDrawing","tempFreehandCounter","lastPan","selectedFreehandColor","isFreehandDrawCustomized","isShapeInserted","isAllowCropPan","tempPannedPoint","cropObj","cropZoom","defaultZoom","tempFlipPanPoint","destPoints","srcPoints","filter","afterCropActions","isCancelAction","isFreehandPointMoved","isTouch","freehandDownPoint","currentFreehandDrawIndex","tempCurrentFreehandDrawIndex","preventZoomBtn","cancelObjColl","cancelPointColl","rotatedFlipCropSelection","ImageEditor_1","preRender","id","getUniqueID","Browser","isDevice","classList","add","themeColl","Bootstrap5","primaryColor","secondaryColor","Bootstrap5Dark","Tailwind","TailwindDark","Fluent","FluentDark","Bootstrap4","Bootstrap","BootstrapDark","Material","MaterialDark","Fabric","FabricDark","Highcontrast","defaultLocale","Crop","ZoomIn","ZoomOut","Undo","Redo","Transform","Annotation","Finetune","Brightness","Contrast","Hue","Saturation","Opacity","Blur","Sharpen","Exposure","Filter","Default","Chrome","Cold","Warm","Grayscale","BlackAndWhite","Sepia","Invert","Text","Pen","Reset","Save","Select","RotateLeft","RotateRight","HorizontalFlip","VerticalFlip","OK","Cancel","FillColor","StrokeColor","StrokeWidth","FontFamily","FontStyle","FontSize","FontColor","Pan","Move","Load","Custom","Square","Circle","Ellipse","Rectangle","Line","Bold","Italic","BoldItalic","XSmall","Small","Medium","Large","XLarge","ABC","Browse","l10n","L10n","locale","render","initialize","getModuleName","getPersistData","addOnPersist","onPropertyChanged","newProperties","oldProperties","_i","_a","keys","cssClass","removeClass","replace","trim","split","addClass","disabled","unwireEvent","remove","wireEvent","style","theme","updateTheme","upperContext","strokeStyle","fillStyle","finetuneSettings","updateFinetunes","setLocale","refreshToolbar","allowUndoRedo","destroy","removeAttribute","concat","getAttribute","destroySubComponents","innerHTML","createToolbar","createContextualToolbar","createCanvas","lowerContext","getDefaultFilter","createSpinner","defaultValue","initializeFilter","setBrightness","setContrast","setHue","setSaturation","setExposure","setOpacity","setBlur","EventHandler","document","keyDownEventHandler","keyUpEventHandler","upperCanvas","mouseDownEventHandler","mouseMoveEventHandler","mouseUpEventHandler","lowerCanvas","canvasMouseDownHandler","canvasMouseMoveHandler","canvasMouseUpHandler","touchStartHandler","findTextPoint","textArea","handleScroll","window","addEventListener","windowResizeHandler","bind","isIos","info","name","screen","orientation","screenOrientation","inputElement","querySelectorAll","btnElement","len","contains","getComponent","detach","select","toPascalCase","str","strArr","isNullOrUndefined","toLowerCase","charAt","toUpperCase","slice","join","boxSizing","canvasWrapper","appendChild","createElement","className","attrs","offsetHeight","offsetWidth","inMemoryCanvas","setAttribute","position","backgroundColor","display","resize","getContext","baseImg","crossorigin","cursor","inMemoryContext","toolbar","toolbarTemplate","toolbarTemplateFn","toolbarItems","align","type","tooltipText","getConstant","template","Uploader","allowedExtensions","push","toolbarArea","getElementById","toolbar_1","uploadItems","selected","initToolbarItem","createBottomToolbar","Toolbar","items","created","trigger","toolbarType","clicked","defToolbarClicked","createLeftToolbarControls","clientHeight","toolbar_2","updateContextualToolbar","cType","querySelector","contextualToolbarArea","left","offsetLeft","refreshSlider","initFilterToolbarItem","renderSlider","cHt","ht","top","toolbarElem","initBottomToolbar","getMainToolbarItem","renderAnnotationBtn","renderCropBtn","renderTransformBtn","refreshOverflow","templateID","toolbarFn","templateParser","isReact","isAngular","templateColl","nodeType","renderReactTemplates","templateCompiler","compile","error","getLeftToolbarItem","isOkBtn","visible","indexOf","prefixIcon","tempToolbarItems","processToolbar","getRightToolbarItem","isApplyOption","getZoomToolbarItem","processSubToolbar","isToolbar","leftItem","rightItem","mainItem","zoomItem","renderSaveBtn","enableDisableToolbarBtn","undo","parentElement","redo","zoomIn","zoomOut","pan","undefined","uploadDiv","uploadElem","getElementsByTagName","uploadBtnElem","onchange","fileSelect","cropSelectedState","okBtn","proxy","iconCss","drpDownBtn","DropDownButton","open","args","refreshUndoRedoColl","getBoundingClientRect","splitWords","isCropSelection","refreshActiveObj","clearRect","item","freeHandDraw","drawShapeText","drawShape","updateToolbarItems","appendTo","cancelPan","cropSelect","transformSelect","imageEditorObj","getInstance","export","prevCropObj","extend","previousObj","getCurrentObj","currSelectionPoint","refreshDropDownBtn","updateUndoRedoColl","currentSelectionPoint","performTransformation","transformCurrentObj","zoom","Math","abs","updateTransform","state","rotate","flip","getShapesToolbarItem","initShapesToolbarItem","createShapeColor","createShapeBtn","ColorPicker","modeSwitcher","noColor","value","showButtons","mode","change","pushActItemIntoObj","prevObj","pop","currentValue","hex","redrawShape","rgba","fillDDB_1","children","toggle","inline","strokeDDB_1","background","strokeWidthItems","strokeWidthBtn","spanElem_1","drpDownBtn_1","activeBtn","textContent","parseInt","getTextToolbarItem","getFontFamilyItems","getFontSizeItems","initTextToolbarItem","createTextColor","createTextBtn","fontColor","color","temp","strokeDDB_2","setTextBoxStylesToActObj","fontNameBtn","spanElem_2","fontFamilyBtn_1","createPopupOnClick","beforeItemRender","updateFontRatio","redrawText","updateFontStyles","fontStyleBtnElem","span1Elem_1","fontStyleBtn_1","fontStyle","fontWeight","applyFontStyle","fontSizeBtnElem","fontSizeSpanElem_1","fontSizes","getFontSizes","fontSizeBtn_1","textStyle","font","rows","getMaxText","measureText","parseFloat","setTextSelection","updateActiveObject","destWidth","destHeight","round","toString","getTextAreaWidth","tempBold","tempItalic","updateUndoRedoObj","obj","operation","currentObj","previousObjColl","currentObjColl","previousPointColl","currentPointColl","previousCropObj","currentCropObj","updateObjColl","initZoomToolbarItem","applyPreviewFilter","contextualToolbarClicked","selEle","imageFiltering","setFilter","isContextualToolbar","panBtn","isDisabledZoomOut","isDisabledFilter","isDisabledAdjustment","adjustment","applyFreehandDraw","performCancel","reset","setTempFilterProperties","openSlider","cancelFreehandDraw","transform","redrawImgWithObj","callMainToolbar","cancelItems","applyShape","redrawActObj","freehandDrawSelectedIndex","renderImage","isSelected","freehandDrawHoveredIndex","n","freehandDrawSelectedId","unselectBtn","selElem","crop","applyActObj","updateBrightnessFilter","opacityValue","isFreehandDrawIndex","index","isIndex","deleteFreehandDraw","isId","tempPointColl","count","callUndo","callRedo","sliderWrapper","slider","hdrWrapper","ej2_instances","iterateObjColl","updateAdjustment","isPreview","brightnessValue","values","getFilterValue","temp_1","freehandRedraw","saturate","bright","saturatePercent","saturatePercentage","getSaturationFilterValue","getDefaultCurrentFilter","setTempFilterValue","updateCurrentTransformedState","drawImage","srcWidth","srcHeight","tempFilter_1","cropCircle","autoEnablePan","tempSplitWords","labelWrapper","styles","min","max","getCurrAdjustmentValue","createSlider","Slider","tooltip","isVisible","placement","showOn","step","setCurrAdjustmentValue","finetuneValueChanging","finetune","isApplyBtn","isZooming","setCurrSelectionPoints","isSetDimension","setDestinationPoints","currentTransformedState","cropObjColl_1","cropPointColl_1","zoomObjColl","zoomFreehandDrawColl","updatePannedRegion","updateObjAndFreeHandDrawColl","cropObjColl","cropPointColl","setCurrentObj","drawPannImage","drawObject","pannedPoint","panObjColl","panFreehandDrawColl","imageRatio","l","ratioX","ratioY","tempPointsColl","currIndex","topLeftCircle","clearSelection","length_1","updateFlipPan","rotatePan","currentPannedPoint","cropImg","clearOuterCanvas","freehandDownHandler","e","canvas","Date","getTime","clientX","clientY","touches","freehandMoveHandler","freehandUpHandler","context","rect","processPoint","closePath","penStrokeWidth","flipState","mouseDown","controlPoint1","controlPoint2","startPoint","endPoint","lastPoint","point","isLastPointTooClose","distanceTo","calcCurveControlPoints","minStrokeWidth","maxStrokeWidth","startDraw","p1","p2","p3","dx1","dy1","dx2","dy2","m1","m2","l1","sqrt","l2","k","cm","tx","ty","tempVelocity","pointVelocity","newWidth","drawCurve","start","pow","startWidth","endWidth","t1","t2","t3","u1","u2","u3","widthValue","bezierLength","drawSteps","ceil","beginPath","drawArc","fill","t","pointx1","pointy1","pointx2","pointy2","pointx3","pointy3","bezierPoint","startpoint","cp1","cp2","endpoint","size","moveTo","arc","PI","getCurrentFlipState","isCropping","initPenToolbarItem","initAdjustmentToolbarItem","getAdjustmentToolbarItem","getFilterToolbarItem","getPenToolbarItem","createPenColor","createPenBtn","penColor","updateFreehandDrawColorChange","hoverFreehandraw","strokeDDB_3","spanElem_3","getPenStroke","drpDownBtn_2","setPenStroke","createCanvasFilter","getCurrentCanvasData","data","getImageData","imageData","putImageData","noFilter","ctx","chrome","cold","warm","grayscale","sepia","invert","callUpdateCurrentTransformedState","tempObjColl","setDestPointsForFlipState","tempTogglePen","isPreventDestination","isRotatePan","reverseTransformedState","setTransform","isPreventDimension","isPreventCircleCrop","iterateRotateFlipColl","setClientTransformedDimension","isReverse","translate","scale","isObjInsideCropRegion","isInside","xDiff","yDiff","panRegion","cropFreehandDrawColl","idx","pointsHorizontalFlip","shapeFlip","pointsVerticalFlip","flipFreehandrawColl","rotateFreehandDrawColl","isPreventApply","zoomX","zoomY","preventApply","updateFontSize","calcRatio","widthRatio","heightRatio","drawCustomSelection","cropShape","clientWidth","top_1","isFlip","globalCompositeOperation","restore","updateCropObj","isObj","drawCropSelectionImage","isAfterCropAction","alignRotateFlipColl","isRotateCrop","currDestinationPoint","rotateCrop","flipCrop","ratio","resetPanPoints","updateImageRatioForActObj","maxDimension","calcMaxDimension","drawImgToCanvas","limitPan","updatePanPoints","tempDestLeft","tempDestTop","panMove","tempPanMove","tempActObj","updateFlipActiveObj","setCurrentPanRegion","region","getCurrentPanRegion","drawPannedImage","panEventArgs","panDown","isObjCreated","tempSelectionObj","tempFlipState","rotatedFlip","tempCurrFlipState","tempFlipColl","redrawObj","tempDegree","rotateObjColl","getCurrentCropState","isAllowInvert","isInitialRotate","isRotate","updateRotatePanPoints","isDefaultZoom","rotatePanActiveObj","initialDestLeft","initialDestTop","rotateZoom","powerOften","drawZoomImgToCanvas","selectionObj","setZoomDimension","updateCanvas","fileOpened","fileType","imageOnLoad","src","onload","hideSpinner","shapeDegree","previousText","currentText","previousFilter","splice","showSpinner","filesData","files","update","url","URL","createObjectURL","transformOrigin","findTextTarget","getStrokeWidth","selFillElem","selStrokeElem","selTextStrokeElem","selPenStrokeElem","strokeWidthElem","fontFamilyElem","fontSizeElem","fontStyleElem","setTimer","timer","targetTouches","pageX","pageY","calculateScale","endTouches","startDistance","getDistance","a","setXYPoints","preventDefault","bbox","setTimeout","isShapeTouch","isShape","findTargetObj","isFreehandDrawTouch","isFreehandDraw","setCursor","selectFreehandDraw","closeContextualToolbar","currentTarget","isPan","tempHoveredIndex","findTarget","setActivePoint","splitWords_1","isCropSelection_1","disableZoomOutBtn","updateActivePoint","offsetTop","firstFingerX","firstFingerY","secondFingerX","secondFingerY","JSON","stringify","applyCurrActObj","shapeChangingArgs","beforeSave","cancel","ctrlKey","observableSaveArgs","stopImmediatePropagation","action","previousShapeSettings","updatePreviousShapeSettings","currentShapeSettings","horTopLine","textKeyDown","offsetX","offsetY","panStartObj","isInsideCanvas","String","fromCharCode","which","scrollHeight","setTextBoxWidth","adjustToScreen","isSelectionCrop","radius","isDisabled","actObj","floor","updateTextFromTextArea","widthColl","setTextBoxPos","setTextBoxPoints","selectedText","textFlip","border","overflow","focus","setTextBoxHeight","selectionStart","finish","selectionEnd","substring","textAreaTop","maxHeight","textAreaWidth","letterWidth","textWidth","textHeight","selectInfo","setDragWidth","tempWidth","setDragHeight","tempHeight","triggerShapeChange","shapeResizingArgs","shapeMovingArgs","updateShapeChangeEventArgs","updateNWPoints","updateNPoints","updateNEPoints","updateWPoints","updateEPoints","updateSWPoints","updateSPoints","updateSEPoints","preventDraggingInvertly","percentage","prevDiffX","prevDiffY","newScale","getScaleRatio","top_2","top_3","preventInverseResize","isTextArea","isTextBox","maxi","maxStr","maxText","setDragLimit","lineDraw","shapeCircle","canvasDraw","selectionWidth","selectionHeight","fillRect","lineWidth","ellipse","stroke","save","clip","drawOuterSelection","isCropCircle","tempObj","topRightCircle","bottomLeftCircle","bottomRightCircle","drawCenterCircles","isCropRatio","isPreventDrag","saveContext","drawCropRatio","isCrop","drawShapeObj","rotateShape","lineTo","horBottomLine","verLeftLine","verRightLine","actPoint","isMouseMove","horCircleWidth","verCircleHeight","topCenterCircle","centerLeftCircle","centerRightCircle","bottomCenterCircle","currentShape","horLineWidth","verLineHeight","drawSquareLines","shapeLine","shapeText","drawSelection","tempLineWidth","lineHeight","yPoint","j","updateActPoint","rotateText","fillText","horTopInnerLine","horBottomInnerLine","verLeftInnerLine","verRightInnerLine","updateCursorStyles","diffX","temp_2","shapeSettings","rotateDegree","isResize","setDragDirection","calcShapeRatio","updatePoints","diff","imgWidth","imgHeight","originalWidth","originalHeight","standardSize","scaleWidth","getScale","snippetArray","scaleHeight","snippetArray1","originalValue","canvasMaxWidth","canvasMaxHeight","widthScale","heightScale","cssMaxWidth","cssMaxHeight","setMaximumDimension","tempCanvas","newHeight","maxWidth","setCursorFromObj","setCursorForFreehandDrawing","isEntered","z1","z2","z3","z4","x1","x2","y1","y2","annotation","downloadImg","blob","href","download","body","documentElement","click","parentNode","removeChild","toSVGImg","exportChangesToCanvas","dataUrl","toDataURL","svg","createElementNS","img","setAttributeNS","svgDataUrl","btoa","toBlobFn","toBlob","blobUrl","tempContextFilter","tempContext","updateSaveContext","exportTransformedImage","exportRotate","exportHorizontalFlip","exportVerticalFlip","addLetter","letter","textFlipDegree","updateCurrentActiveObjPoint","currActObjIndex","isActObj","splitWords_3","setCenterPoints","renderWidth","renderHeight","getObjDetails","shapeDetails","getFreehandDrawDetails","isPointsInRange","inRange","clearActObj","applyPenDraw","drawRotatedImage","updateCurrSelectionPoint","popForDefaultTransformedState","collection","rotateRight","rotateleft","horizontal","vertical","popForDefaultFlipState","popForDefaultRotateState","isRotateFlipCollection","updateFlipColl","direction","horizontalFlip","verticalFlip","updateFlipState","setFilterValue","filterValue","setSaturationFilterValue","getBlackAndWhiteData","colour","prevFilter","updateTextBox","drawNewSelection","isUpdate","performUndoDefaultAction","setAdjustment","valueArr","updateFilter","filterCanvas","transitionArgs","activeObjShape","toLocaleLowerCase","toolbar_11","saved_1","isPrevent","freehandDraw","zoomPoint","zoomLevel","zoomEventArgs","drawEllipse","radiusX","radiusY","isEllipse","drawLine","drawRectangle","isRectangle","drawText","selectShape","deleteShape","getShapeSetting","getShapeSettings","shapeDetailsColl","finetuneImage","finetuneOption","applyImageFilter","filterOption","Complex","Event","NotifyPropertyChanges","Component"],"mappings":"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"}