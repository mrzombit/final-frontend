{"ast":null,"code":"import _slicedToArray from \"/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/src/pages/bizTools/miscellaneousPage/miscellaneousPage.jsx\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport BizSidebar from \"../../../components/bizTools/bizSidebar/bizSidebar\";\nimport BiztoolHeader from \"../../../components/investmentProject/biztoolHeader/biztoolHeader\";\nimport BiztoolBody from \"../../../components/investmentProject/biztoolBody/biztoolBody\";\nimport BIZTOOL_PAGE_CONFIG from \"../pageConfig\";\nimport BIZTOOL_PAGE_MOCKDATA from \"../pageMockData\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchUserByUsername } from \"../../../features/usersSlice\";\nimport { fetchProjectsByUserId, setSelectedProject, fetchProjectById } from \"../../../features/projectsSlice\";\nfunction MiscellaneousPage() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    newProjectPopupState = _useState2[0],\n    setNewProjectPopupState = _useState2[1];\n  var dispatch = useDispatch();\n  var navigate = useNavigate();\n  var auth = useSelector(function (state) {\n    return state.users.auth;\n  });\n  var user = useSelector(function (state) {\n    return state.users.user;\n  });\n  var projects = useSelector(function (state) {\n    return state.projects.projects;\n  });\n  var selectedProject = useSelector(function (state) {\n    return state.projects.selectedProject;\n  });\n  var _useState3 = useState({\n      user: false,\n      projects: false\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoaded = _useState4[0],\n    setIsLoaded = _useState4[1];\n  var isAlert = useRef(false);\n  useEffect(function () {\n    if (auth.username) {\n      if (auth.token != \"\") {\n        if (!isLoaded.user) {\n          dispatch(fetchUserByUsername({\n            username: auth.username,\n            token: auth.token\n          }));\n          setIsLoaded({\n            user: true,\n            projects: false\n          });\n        }\n      }\n\n      // if(isLoaded) console.log(JSON.stringify(user));\n      if (isLoaded.user) {\n        if (isLoaded.projects) {\n          // dispatch(fetchProjectsByUserId(user._id))\n          dispatch(fetchProjectById(selectedProject));\n          setIsLoaded({\n            user: true,\n            project: true\n          });\n        }\n        // else console.log(JSON.stringify(projects))\n        console.log(JSON.stringify(selectedProject.revenue.service_tables));\n        // console.log(JSON.stringify(selectedProject.expense.investment_tables));\n      }\n    } else navigate(\"/login\");\n  }, [auth.token, user, newProjectPopupState]);\n\n  // const [tableData, setTableData] = useState(BIZTOOL_PAGE_MOCKDATA.miscellaneous.data)\n  var _useState5 = useState({\n      equity_contribution_tables: [{\n        equity_contributions: selectedProject.miscellaneous.equity_contribution\n      }],\n      equity_repayment_tables: [{\n        equity_repayments: selectedProject.miscellaneous.equity_repayment\n      }],\n      debt_issuance_tables: [{\n        debt_issuances: selectedProject.miscellaneous.debt_issuance\n      }]\n    }),\n    _useState6 = _slicedToArray(_useState5, 2),\n    tableData = _useState6[0],\n    setTableData = _useState6[1];\n  var _useState7 = useState(BIZTOOL_PAGE_CONFIG.miscellaneous),\n    _useState8 = _slicedToArray(_useState7, 2),\n    config = _useState8[0],\n    setConfig = _useState8[1];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BizSidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4 biztool-body-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BiztoolHeader, {\n    type: config.type,\n    title: config.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BiztoolBody, {\n    type: config.type,\n    tableStyle: config.tableStyle,\n    tableData: tableData,\n    onChangeHandle: config.onChangeHandle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  })));\n}\nexport default MiscellaneousPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","BizSidebar","BiztoolHeader","BiztoolBody","BIZTOOL_PAGE_CONFIG","BIZTOOL_PAGE_MOCKDATA","Link","useNavigate","useDispatch","useSelector","fetchUserByUsername","fetchProjectsByUserId","setSelectedProject","fetchProjectById","MiscellaneousPage","_useState","_useState2","_slicedToArray","newProjectPopupState","setNewProjectPopupState","dispatch","navigate","auth","state","users","user","projects","selectedProject","_useState3","_useState4","isLoaded","setIsLoaded","isAlert","username","token","project","console","log","JSON","stringify","revenue","service_tables","_useState5","equity_contribution_tables","equity_contributions","miscellaneous","equity_contribution","equity_repayment_tables","equity_repayments","equity_repayment","debt_issuance_tables","debt_issuances","debt_issuance","_useState6","tableData","setTableData","_useState7","_useState8","config","setConfig","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","title","tableStyle","onChangeHandle"],"sources":["/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/src/pages/bizTools/miscellaneousPage/miscellaneousPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport BizSidebar from \"../../../components/bizTools/bizSidebar/bizSidebar\";\nimport BiztoolHeader from \"../../../components/investmentProject/biztoolHeader/biztoolHeader\";\nimport BiztoolBody from \"../../../components/investmentProject/biztoolBody/biztoolBody\";\nimport BIZTOOL_PAGE_CONFIG from \"../pageConfig\";\nimport BIZTOOL_PAGE_MOCKDATA from \"../pageMockData\";\n\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchUserByUsername } from \"../../../features/usersSlice\";\nimport {\n  fetchProjectsByUserId,\n  setSelectedProject,\n  fetchProjectById,\n} from \"../../../features/projectsSlice\";\n\nfunction MiscellaneousPage() {\n  const [newProjectPopupState, setNewProjectPopupState] = useState(false);\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const auth = useSelector((state) => state.users.auth);\n  const user = useSelector((state) => state.users.user);\n  const projects = useSelector((state) => state.projects.projects);\n  const selectedProject = useSelector(\n    (state) => state.projects.selectedProject\n  );\n  const [isLoaded, setIsLoaded] = useState({ user: false, projects: false });\n  const isAlert = useRef(false);\n\n  useEffect(() => {\n    if (auth.username) {\n      if (auth.token != \"\") {\n        if (!isLoaded.user) {\n          dispatch(\n            fetchUserByUsername({ username: auth.username, token: auth.token })\n          );\n          setIsLoaded({ user: true, projects: false });\n        }\n      }\n\n      // if(isLoaded) console.log(JSON.stringify(user));\n      if (isLoaded.user) {\n        if (isLoaded.projects) {\n          // dispatch(fetchProjectsByUserId(user._id))\n          dispatch(fetchProjectById(selectedProject));\n\n          setIsLoaded({ user: true, project: true });\n        }\n        // else console.log(JSON.stringify(projects))\n        console.log(JSON.stringify(selectedProject.revenue.service_tables));\n        // console.log(JSON.stringify(selectedProject.expense.investment_tables));\n      }\n    } else navigate(\"/login\");\n  }, [auth.token, user, newProjectPopupState]);\n\n  // const [tableData, setTableData] = useState(BIZTOOL_PAGE_MOCKDATA.miscellaneous.data)\n  const [tableData, setTableData] = useState({\n    equity_contribution_tables: [\n      {\n        equity_contributions: selectedProject.miscellaneous.equity_contribution,\n      },\n    ],\n    equity_repayment_tables: [\n      {\n        equity_repayments: selectedProject.miscellaneous.equity_repayment,\n      },\n    ],\n    debt_issuance_tables: [\n      {\n        debt_issuances: selectedProject.miscellaneous.debt_issuance,\n      },\n    ],\n  });\n  const [config, setConfig] = useState(BIZTOOL_PAGE_CONFIG.miscellaneous);\n\n  return (\n    <div className=\"d-flex \">\n      <BizSidebar />\n      <div className=\"p-4 biztool-body-width\">\n        <BiztoolHeader type={config.type} title={config.title} />\n        <BiztoolBody\n          type={config.type}\n          tableStyle={config.tableStyle}\n          tableData={tableData}\n          onChangeHandle={config.onChangeHandle}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default MiscellaneousPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}