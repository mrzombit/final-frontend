{"ast":null,"code":"import _objectSpread from \"/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/src/pages/checkBiz/statementsPage/chartPages/cashflowChartPage.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport CombinationCharts from \"../../../../components/statement/charts/combinationCharts\";\nimport BizSidebar from \"../../../../components/bizTools/bizSidebar/bizSidebar\";\nimport StatementHearder from \"../../../../components/statement/statementHearder\";\nimport \"./chartPages.css\";\nimport { AiOutlineDoubleLeft } from \"react-icons/ai\";\nimport \"./../../../../components/sensitivity/sensitivityEdit/sidebar/sensitivityEditSidebar.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchProjectById, projectUpdated, updateProject } from \"../../../../features/projectsSlice\";\nimport EditInputOnSidebar from \"../../../../components/checkbiz/sidebarEditdata/editInputOnSidebar\";\nimport checkbizFormula from \"../../../../components/checkbiz/checkbizFormula/checkbizFormula\";\n\n// import * as cbf from \"../../../../components/checkbiz/checkbizFormula/checkbizFormula_try\";\n// import BarChart from \"../../../../components/statement/charts/barChart\";\n// import CombinationChartsMinMax from \"../../../../components/statement/charts/combinationChartsMinMax\";\n// import StackedBar from \"../../../../components/statement/charts/stackedBar\";\n// import DoughnutChart from \"../../../../components/statement/charts/doughnutChart\";\n// import SensitivityEditSidebar from \"../../../../components/sensitivity/sensitivityEdit/sidebar/sensitivityEditSidebar\";\n// import BIZTOOL_PAGE_CONFIG from \"../../../bizTools/pageConfig\";\n\nvar cashflowChartPage = function cashflowChartPage(props) {\n  var cbf = checkbizFormula();\n  var _cbf$calculateRevenue = cbf.calculateRevenue(),\n    totalRevenue = _cbf$calculateRevenue.totalRevenue,\n    totalRevenue_MIN = _cbf$calculateRevenue.totalRevenue_MIN;\n  var totalFixedCost = cbf.calculateTotalFixdcost();\n  var yearRange = cbf.calculateYearRange();\n  var totalCFO = cbf.calculateCFO();\n  var totalCFI = cbf.calculateCFI();\n  var totalCFF = cbf.calculateCFF();\n\n  // const [newRevenuePerService, setNewRevenuePerService] = useState(null);\n  // const config = BIZTOOL_PAGE_CONFIG.revenue\n  // const [tableService, setTableService] = useState();\n  // const [service, setService] = useState();\n  // const [revenuePerService, setRevenuePerService] = useState();\n  // const yearRange = [1, 2, 3, 4];\n  // const [message, setMessage] = useState(\"\");\n\n  // const handleChange = (event) => {\n  //   setMessage(event.target.value);\n  //   console.log(\"value is:\", event.target.value);\n  // };\n\n  // const totalRevenue = [15000,17000,15000];\n  // const totalFixedCost = [17000,15000,10000];\n\n  // const totalFixedCost = [];\n  // const totalCFO = [];\n  // const totalCFI = [0, 0, 0];\n  // const totalCFF = [];\n  // const yearRange = [];\n\n  var dispatch = useDispatch();\n  var selectedProject = useSelector(function (state) {\n    return state.projects.selectedProject;\n  });\n  var _useState = useState({\n      user: false,\n      projects: false\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoaded = _useState2[0],\n    setIsLoaded = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    reload = _useState4[0],\n    setReload = _useState4[1];\n  useEffect(function () {\n    if (isLoaded.projects) {\n      dispatch(fetchProjectById(selectedProject._id));\n      setIsLoaded({\n        user: true,\n        project: true\n      });\n    }\n    if (!reload) {\n      dispatch(fetchProjectById(selectedProject._id));\n      setReload(true);\n    }\n    setModelConfig(selectedProject.model_config);\n    setTableRevenueData(selectedProject.revenue);\n    setTableExpenseData(selectedProject.expense);\n    setTableMiscellaneousData(selectedProject.miscellaneous);\n  }, [selectedProject]);\n  var _useState5 = useState(selectedProject.model_config),\n    _useState6 = _slicedToArray(_useState5, 2),\n    modelConfig = _useState6[0],\n    setModelConfig = _useState6[1];\n  var _useState7 = useState(selectedProject.revenue),\n    _useState8 = _slicedToArray(_useState7, 2),\n    tableRevenueData = _useState8[0],\n    setTableRevenueData = _useState8[1];\n  var _useState9 = useState(selectedProject.expense),\n    _useState10 = _slicedToArray(_useState9, 2),\n    tableExpenseData = _useState10[0],\n    setTableExpenseData = _useState10[1];\n  var _useState11 = useState(selectedProject.miscellaneous),\n    _useState12 = _slicedToArray(_useState11, 2),\n    tableMiscellaneousData = _useState12[0],\n    setTableMiscellaneousData = _useState12[1];\n  var onValChange = function onValChange(tableID, unitID, amountPerUnit) {\n    var shallowServiceTables = JSON.parse(JSON.stringify(selectedProject.revenue.service_tables));\n    var shallowProductTables = JSON.parse(JSON.stringify(selectedProject.revenue.product_tables));\n    var shallowFixedCostTables = JSON.parse(JSON.stringify(selectedProject.expense.fixed_cost_tables));\n    var shallowInvestmentTables = JSON.parse(JSON.stringify(selectedProject.expense.investment_tables));\n    shallowServiceTables = shallowServiceTables.map(function (eachTableService) {\n      if (eachTableService._id === tableID) {\n        eachTableService.services = eachTableService.services.map(function (eachService) {\n          if (eachService._id === unitID) {\n            if (eachService.revenue_per_service !== amountPerUnit) {\n              eachService.revenue_per_service = amountPerUnit;\n            }\n          }\n          return eachService;\n        });\n      }\n      return eachTableService;\n    });\n    shallowProductTables = shallowProductTables.map(function (eachTableProduct) {\n      if (eachTableProduct._id === tableID) {\n        eachTableProduct.products = eachTableProduct.products.map(function (eachProduct) {\n          if (eachProduct._id === unitID) {\n            if (eachProduct.revenue_per_unit !== amountPerUnit) {\n              eachProduct.revenue_per_unit = amountPerUnit;\n            }\n          }\n          return eachProduct;\n        });\n      }\n      return eachTableProduct;\n    });\n    shallowFixedCostTables = shallowFixedCostTables.map(function (eachTableFixedCost) {\n      if (eachTableFixedCost._id === tableID) {\n        eachTableFixedCost.fixed_costs = eachTableFixedCost.fixed_costs.map(function (eachFixedCost) {\n          if (eachFixedCost._id === unitID) {\n            if (eachFixedCost.amount !== amountPerUnit) {\n              eachFixedCost.amount = amountPerUnit;\n            }\n          }\n          return eachFixedCost;\n        });\n      }\n      return eachTableFixedCost;\n    });\n\n    // shallowInvestmentTables = shallowInvestmentTables.map(\n    //   (eachTableInvestment) => {\n    //     if (eachTableInvestment._id === tableID) {\n    //       eachTableInvestment.investments = eachTableInvestment.investments.map(\n    //         (eachInvestment) => {\n    //           if (eachInvestment._id === unitID) {\n    //             if (eachInvestment.amount !== amountPerUnit) {\n    //               eachInvestment.amount = amountPerUnit;\n    //             }\n    //           }\n    //           return eachInvestment;\n    //         }\n    //       );\n    //     }\n    //     return eachTableInvestment;\n    //   }\n    // );\n\n    // Find the index of the table with the matching ID\n    var tableIndex = shallowInvestmentTables.findIndex(function (table) {\n      return table._id === tableID;\n    });\n\n    // Update the investment table if found\n    if (tableIndex !== -1) {\n      shallowInvestmentTables[tableIndex] = _objectSpread({}, shallowInvestmentTables[tableIndex], {\n        investments: shallowInvestmentTables[tableIndex].investments.map(function (eachInvestment) {\n          if (eachInvestment._id === unitID) {\n            if (eachInvestment.amount !== amountPerUnit) {\n              eachInvestment.amount = amountPerUnit;\n            }\n          }\n          return eachInvestment;\n        })\n      });\n    }\n    var shallowSelectedProject = _objectSpread({}, selectedProject, {\n      revenue: {\n        service_tables: shallowServiceTables,\n        product_tables: shallowProductTables\n      },\n      expense: {\n        fixed_cost_tables: shallowFixedCostTables,\n        investment_tables: shallowInvestmentTables\n      }\n    });\n    dispatch(projectUpdated(shallowSelectedProject));\n    dispatch(updateProject({\n      id: selectedProject._id,\n      data: shallowSelectedProject\n    }));\n  };\n  var _useState13 = useState(true),\n    _useState14 = _slicedToArray(_useState13, 2),\n    sidebar = _useState14[0],\n    setSidebar = _useState14[1];\n  var showSidebar = function showSidebar() {\n    return setSidebar(!sidebar);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex sen-sidebar-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BizSidebar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: sidebar ? \"p-4 chart-pages-body2\" : \"p-4 chart-pages-body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(StatementHearder, {\n    title: \"Cashflow Statement\",\n    type: \"chart\",\n    sensitivityPath: \"/Sensitivity/income\",\n    listPath: \"/CashFlowStatements\",\n    chartPath: \"/Chart/cashflow\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CombinationCharts, {\n    data_type: \"cashflow\",\n    totalCFO: totalCFO,\n    totalCFI: totalCFI,\n    totalCFF: totalCFF,\n    yearRange: yearRange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, sidebar ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sen-sidebar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sen-sidebar-show\",\n    onClick: showSidebar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-name-side-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 15\n    }\n  }, \"\\u0E01\\u0E23\\u0E30\\u0E41\\u0E2A\\u0E40\\u0E07\\u0E34\\u0E19\\u0E2A\\u0E14\\u0E08\\u0E32\\u0E01\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\\u0E14\\u0E33\\u0E40\\u0E19\\u0E34\\u0E19\\u0E07\\u0E32\\u0E19 (CFO)\"), tableRevenueData.service_tables.map(function (tableService) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: tableService._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }\n    }, tableService.services.map(function (eachService) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: eachService._id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }\n      }, eachService.name !== \"\" && /*#__PURE__*/React.createElement(EditInputOnSidebar, {\n        name: eachService.name,\n        type: \"text\",\n        defaultValue: eachService.revenue_per_service,\n        className: \"chart-input\",\n        onChange: function onChange(event) {\n          return onValChange(tableService._id, eachService._id, event.target.value);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 25\n        }\n      }));\n    }));\n  }), tableRevenueData.product_tables.map(function (tableProduct) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: tableProduct._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 17\n      }\n    }, tableProduct.products.map(function (eachProduct) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: eachProduct._id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 21\n        }\n      }, eachProduct.name !== \"\" && /*#__PURE__*/React.createElement(EditInputOnSidebar, {\n        name: eachProduct.name,\n        type: \"text\",\n        defaultValue: eachProduct.revenue_per_unit,\n        className: \"chart-input\",\n        onChange: function onChange(event) {\n          return onValChange(tableProduct._id, eachProduct._id, event.target.value);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 25\n        }\n      }));\n    }));\n  }), tableExpenseData.fixed_cost_tables.map(function (tableFixedCost) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: tableFixedCost._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }\n    }, tableFixedCost.fixed_costs.map(function (eachFixedCost) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: eachFixedCost._id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 21\n        }\n      }, eachFixedCost.name !== \"\" && /*#__PURE__*/React.createElement(EditInputOnSidebar, {\n        name: eachFixedCost.name,\n        type: \"text\",\n        defaultValue: eachFixedCost.amount,\n        className: \"chart-input\",\n        onChange: function onChange(event) {\n          return onValChange(tableFixedCost._id, eachFixedCost._id, event.target.value);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 25\n        }\n      }));\n    }));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-name-side-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 15\n    }\n  }, \"\\u0E01\\u0E23\\u0E30\\u0E41\\u0E2A\\u0E40\\u0E07\\u0E34\\u0E19\\u0E2A\\u0E14\\u0E08\\u0E32\\u0E01\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\\u0E25\\u0E07\\u0E17\\u0E38\\u0E19 (CFI)\"),\n  // tableExpenseData.investment_tables.forEach((table) => {\n  //   table.investments.forEach((eachData) => {\n  //     sum_investment += eachData.amount\n  //   })\n  // })\n\n  tableExpenseData.investment_tables.map(function (table) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: table._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 19\n      }\n    }, table.investments.map(function (eachData) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: eachData._id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 23\n        }\n      }, eachData.name !== \"\" && /*#__PURE__*/React.createElement(EditInputOnSidebar, {\n        name: eachData.name,\n        type: \"text\",\n        defaultValue: eachData.amount,\n        className: \"chart-input\",\n        onChange: function onChange(event) {\n          return onValChange(table._id, eachData._id, event.target.value);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 27\n        }\n      }));\n    }));\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-name-side-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 15\n    }\n  }, \"\\u0E01\\u0E23\\u0E30\\u0E41\\u0E2A\\u0E40\\u0E07\\u0E34\\u0E19\\u0E2A\\u0E14\\u0E08\\u0E32\\u0E01\\u0E01\\u0E34\\u0E08\\u0E01\\u0E23\\u0E23\\u0E21\\u0E08\\u0E31\\u0E14\\u0E2B\\u0E32\\u0E40\\u0E07\\u0E34\\u0E19 (CFF)\"), tableMiscellaneousData.debt_issuance.map(function (table) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: table._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 19\n      }\n    }, table.payments.map(function (eachData) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: eachData._id,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(EditInputOnSidebar, {\n        name: \"\\u0E0A\\u0E33\\u0E23\\u0E30\\u0E2B\\u0E19\\u0E35\\u0E49 \\u0E1B\\u0E35\\u0E17\\u0E35\\u0E48 \".concat(eachData.year),\n        type: \"text\",\n        defaultValue: eachData.amount,\n        className: \"chart-input\"\n        // onChange={(event) =>\n        //   onValChange(\n        //     table._id,\n        //     eachData._id,\n        //     event.target.value\n        //   )\n        // }\n        ,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 25\n        }\n      }));\n    }));\n  }), tableMiscellaneousData.equity_contribution.map(function (table) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: table._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(EditInputOnSidebar, {\n      name: \"\\u0E40\\u0E07\\u0E34\\u0E19\\u0E2A\\u0E14\\u0E23\\u0E31\\u0E1A\\u0E08\\u0E32\\u0E01\\u0E32\\u0E23\\u0E01\\u0E39\\u0E49\\u0E22\\u0E37\\u0E21 \\u0E42\\u0E14\\u0E22\".concat(table.name),\n      type: \"text\",\n      defaultValue: table.amount,\n      className: \"chart-input\"\n      // onChange={(event) =>\n      //   onValChange(\n      //     table._id,\n      //     eachData._id,\n      //     event.target.value\n      //   )\n      // }\n      ,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 21\n      }\n    }));\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sen-sidebar2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sen-sidebar-show2\",\n    onClick: showSidebar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(AiOutlineDoubleLeft, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 17\n    }\n  }))))));\n};\nexport default cashflowChartPage;","map":{"version":3,"names":["React","useEffect","useState","CombinationCharts","BizSidebar","StatementHearder","AiOutlineDoubleLeft","useDispatch","useSelector","fetchProjectById","projectUpdated","updateProject","EditInputOnSidebar","checkbizFormula","cashflowChartPage","props","cbf","_cbf$calculateRevenue","calculateRevenue","totalRevenue","totalRevenue_MIN","totalFixedCost","calculateTotalFixdcost","yearRange","calculateYearRange","totalCFO","calculateCFO","totalCFI","calculateCFI","totalCFF","calculateCFF","dispatch","selectedProject","state","projects","_useState","user","_useState2","_slicedToArray","isLoaded","setIsLoaded","_useState3","_useState4","reload","setReload","_id","project","setModelConfig","model_config","setTableRevenueData","revenue","setTableExpenseData","expense","setTableMiscellaneousData","miscellaneous","_useState5","_useState6","modelConfig","_useState7","_useState8","tableRevenueData","_useState9","_useState10","tableExpenseData","_useState11","_useState12","tableMiscellaneousData","onValChange","tableID","unitID","amountPerUnit","shallowServiceTables","JSON","parse","stringify","service_tables","shallowProductTables","product_tables","shallowFixedCostTables","fixed_cost_tables","shallowInvestmentTables","investment_tables","map","eachTableService","services","eachService","revenue_per_service","eachTableProduct","products","eachProduct","revenue_per_unit","eachTableFixedCost","fixed_costs","eachFixedCost","amount","tableIndex","findIndex","table","_objectSpread","investments","eachInvestment","shallowSelectedProject","id","data","_useState13","_useState14","sidebar","setSidebar","showSidebar","createElement","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","title","type","sensitivityPath","listPath","chartPath","data_type","onClick","tableService","key","name","defaultValue","onChange","event","target","value","tableProduct","tableFixedCost","eachData","debt_issuance","payments","concat","year","equity_contribution"],"sources":["/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/src/pages/checkBiz/statementsPage/chartPages/cashflowChartPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport CombinationCharts from \"../../../../components/statement/charts/combinationCharts\";\nimport BizSidebar from \"../../../../components/bizTools/bizSidebar/bizSidebar\";\nimport StatementHearder from \"../../../../components/statement/statementHearder\";\nimport \"./chartPages.css\";\nimport { AiOutlineDoubleLeft } from \"react-icons/ai\";\nimport \"./../../../../components/sensitivity/sensitivityEdit/sidebar/sensitivityEditSidebar.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  fetchProjectById,\n  projectUpdated,\n  updateProject,\n} from \"../../../../features/projectsSlice\";\nimport EditInputOnSidebar from \"../../../../components/checkbiz/sidebarEditdata/editInputOnSidebar\";\nimport checkbizFormula from \"../../../../components/checkbiz/checkbizFormula/checkbizFormula\";\n\n// import * as cbf from \"../../../../components/checkbiz/checkbizFormula/checkbizFormula_try\";\n// import BarChart from \"../../../../components/statement/charts/barChart\";\n// import CombinationChartsMinMax from \"../../../../components/statement/charts/combinationChartsMinMax\";\n// import StackedBar from \"../../../../components/statement/charts/stackedBar\";\n// import DoughnutChart from \"../../../../components/statement/charts/doughnutChart\";\n// import SensitivityEditSidebar from \"../../../../components/sensitivity/sensitivityEdit/sidebar/sensitivityEditSidebar\";\n// import BIZTOOL_PAGE_CONFIG from \"../../../bizTools/pageConfig\";\n\nconst cashflowChartPage = (props) => {\n\n  const cbf = checkbizFormula();\n  const { totalRevenue, totalRevenue_MIN} = cbf.calculateRevenue();\n  const totalFixedCost = cbf.calculateTotalFixdcost();\n  const yearRange = cbf.calculateYearRange();\n  const totalCFO = cbf.calculateCFO();\n  const totalCFI = cbf.calculateCFI();\n  const totalCFF = cbf.calculateCFF();\n\n\n  // const [newRevenuePerService, setNewRevenuePerService] = useState(null);\n  // const config = BIZTOOL_PAGE_CONFIG.revenue\n  // const [tableService, setTableService] = useState();\n  // const [service, setService] = useState();\n  // const [revenuePerService, setRevenuePerService] = useState();\n  // const yearRange = [1, 2, 3, 4];\n  // const [message, setMessage] = useState(\"\");\n\n  // const handleChange = (event) => {\n  //   setMessage(event.target.value);\n  //   console.log(\"value is:\", event.target.value);\n  // };\n\n  // const totalRevenue = [15000,17000,15000];\n  // const totalFixedCost = [17000,15000,10000];\n  \n  // const totalFixedCost = [];\n  // const totalCFO = [];\n  // const totalCFI = [0, 0, 0];\n  // const totalCFF = [];\n  // const yearRange = [];\n\n  const dispatch = useDispatch();\n  const selectedProject = useSelector(\n    (state) => state.projects.selectedProject\n  );\n  const [isLoaded, setIsLoaded] = useState({ user: false, projects: false });\n  const [reload, setReload] = useState(false);\n\n\n  useEffect(() => {\n\n    if (isLoaded.projects) {\n      dispatch(fetchProjectById(selectedProject._id));\n      setIsLoaded({ user: true, project: true });\n    }\n    if (!reload) {\n      dispatch(fetchProjectById(selectedProject._id));\n      setReload(true);\n    }\n    setModelConfig(selectedProject.model_config);\n    setTableRevenueData(selectedProject.revenue);\n    setTableExpenseData(selectedProject.expense);\n    setTableMiscellaneousData(selectedProject.miscellaneous);\n  }, [selectedProject]);\n\n  const [modelConfig, setModelConfig] = useState(\n    selectedProject.model_config\n  );\n  const [tableRevenueData, setTableRevenueData] = useState(\n    selectedProject.revenue\n  );\n  const [tableExpenseData, setTableExpenseData] = useState(\n    selectedProject.expense\n  );\n  const [tableMiscellaneousData, setTableMiscellaneousData] = useState(\n    selectedProject.miscellaneous\n  );\n\n  const onValChange = (tableID, unitID, amountPerUnit) => {\n    let shallowServiceTables = JSON.parse(\n      JSON.stringify(selectedProject.revenue.service_tables)\n    );\n    let shallowProductTables = JSON.parse(\n      JSON.stringify(selectedProject.revenue.product_tables)\n    );\n    let shallowFixedCostTables = JSON.parse(\n      JSON.stringify(selectedProject.expense.fixed_cost_tables)\n    );\n    let shallowInvestmentTables = JSON.parse(\n      JSON.stringify(selectedProject.expense.investment_tables)\n    );\n\n    shallowServiceTables = shallowServiceTables.map((eachTableService) => {\n      if (eachTableService._id === tableID) {\n        eachTableService.services = eachTableService.services.map(\n          (eachService) => {\n            if (eachService._id === unitID) {\n              if (eachService.revenue_per_service !== amountPerUnit) {\n                eachService.revenue_per_service = amountPerUnit;\n              }\n            }\n            return eachService;\n          }\n        );\n      }\n      return eachTableService;\n    });\n\n    shallowProductTables = shallowProductTables.map((eachTableProduct) => {\n      if (eachTableProduct._id === tableID) {\n        eachTableProduct.products = eachTableProduct.products.map(\n          (eachProduct) => {\n            if (eachProduct._id === unitID) {\n              if (eachProduct.revenue_per_unit !== amountPerUnit) {\n                eachProduct.revenue_per_unit = amountPerUnit;\n              }\n            }\n            return eachProduct;\n          }\n        );\n      }\n      return eachTableProduct;\n    });\n\n    shallowFixedCostTables = shallowFixedCostTables.map(\n      (eachTableFixedCost) => {\n        if (eachTableFixedCost._id === tableID) {\n          eachTableFixedCost.fixed_costs = eachTableFixedCost.fixed_costs.map(\n            (eachFixedCost) => {\n              if (eachFixedCost._id === unitID) {\n                if (eachFixedCost.amount !== amountPerUnit) {\n                  eachFixedCost.amount = amountPerUnit;\n                }\n              }\n              return eachFixedCost;\n            }\n          );\n        }\n        return eachTableFixedCost;\n      }\n    );\n\n    // shallowInvestmentTables = shallowInvestmentTables.map(\n    //   (eachTableInvestment) => {\n    //     if (eachTableInvestment._id === tableID) {\n    //       eachTableInvestment.investments = eachTableInvestment.investments.map(\n    //         (eachInvestment) => {\n    //           if (eachInvestment._id === unitID) {\n    //             if (eachInvestment.amount !== amountPerUnit) {\n    //               eachInvestment.amount = amountPerUnit;\n    //             }\n    //           }\n    //           return eachInvestment;\n    //         }\n    //       );\n    //     }\n    //     return eachTableInvestment;\n    //   }\n    // );\n\n    // Find the index of the table with the matching ID\n    const tableIndex = shallowInvestmentTables.findIndex((table) => table._id === tableID);\n\n    // Update the investment table if found\n    if (tableIndex !== -1) {\n      shallowInvestmentTables[tableIndex] = {\n        ...shallowInvestmentTables[tableIndex],\n        investments: shallowInvestmentTables[tableIndex].investments.map((eachInvestment) => {\n          if (eachInvestment._id === unitID) {\n            if (eachInvestment.amount !== amountPerUnit) {\n              eachInvestment.amount = amountPerUnit;\n            }\n          }\n          return eachInvestment;\n        }),\n      };\n    }\n\n\n\n    let shallowSelectedProject = {\n      ...selectedProject,\n      revenue: {\n        service_tables: shallowServiceTables,\n        product_tables: shallowProductTables,\n      },\n      expense: {\n        fixed_cost_tables: shallowFixedCostTables,\n        investment_tables: shallowInvestmentTables,\n      },\n    };\n    dispatch(projectUpdated(shallowSelectedProject));\n    dispatch(\n      updateProject({ id: selectedProject._id, data: shallowSelectedProject })\n    );\n  };\n\n\n  const [sidebar, setSidebar] = useState(true);\n  const showSidebar = () => setSidebar(!sidebar);\n\n\n\n  return (\n    <div>\n\n      <div className=\"d-flex sen-sidebar-container\">\n        <BizSidebar />\n        <div\n          className={sidebar ? \"p-4 chart-pages-body2\" : \"p-4 chart-pages-body\"}\n        >\n          <StatementHearder\n            title=\"Cashflow Statement\"\n            type=\"chart\"\n            sensitivityPath=\"/Sensitivity/income\"\n            listPath=\"/CashFlowStatements\"\n            chartPath=\"/Chart/cashflow\"\n          />\n          <div>\n \n            <CombinationCharts\n              data_type=\"cashflow\"\n              totalCFO={totalCFO}\n              totalCFI={totalCFI}\n              totalCFF={totalCFF}\n              yearRange={yearRange}\n            />\n          </div>\n        </div>\n\n        <div className=\"\">\n          {sidebar ? (\n            <div className=\"sen-sidebar\">\n              <div className=\"sen-sidebar-show\" onClick={showSidebar}>\n                {/* <AiOutlineDoubleLeft /> */}\n              </div>\n\n              {/* <div className=\"total-text\">\n                <div className=\"d-flex justify-content-between\">\n                  <div>CFO</div>\n                  <div>{total_income()}</div>\n                  <div>{total_CFO()}</div>\n                  <div>{total_CFI()}</div>\n                  <div>{total_CFF()}</div>\n                  <div>{calculateTotalFixdcost()}</div>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <div>CFI</div>\n              \n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <div>CFF</div>         \n                </div>\n\n              </div>\n              \n              <div className=\"total-text\">\n                <div className=\"d-flex justify-content-between\">\n                  <div>กระแสเงินสดสุทธิ</div>\n                  <div>{total_income()}</div>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <div>เงินสดต้นงวด</div>\n                  <div></div>\n                </div>\n                <div className=\"d-flex justify-content-between\">\n                  <div>เงืนสดปลายงวด</div>\n                  <div></div>\n                </div>\n\n              </div> */}\n\n              <div className=\"table-name-side-text\">กระแสเงินสดจากกิจกรรมดำเนินงาน (CFO)</div>\n              {tableRevenueData.service_tables.map((tableService) => (\n                <div key={tableService._id}>\n                  {/* <div className=\"total-text\">{tableService.name}</div> */}\n                  {tableService.services.map((eachService) => (\n                    <div key={eachService._id}>\n                      {eachService.name !== \"\" && (\n                        <EditInputOnSidebar\n                          name={eachService.name}\n                          type=\"text\"\n                          defaultValue={eachService.revenue_per_service}\n                          className=\"chart-input\"\n                          onChange={(event) =>\n                            onValChange(\n                              tableService._id,\n                              eachService._id,\n                              event.target.value\n                            )\n                          }\n                        />\n                      )}\n                    </div>\n                  ))}\n                </div>\n              ))}\n              {tableRevenueData.product_tables.map((tableProduct) => (\n                <div key={tableProduct._id}>\n                  {/* <div className=\"total-text\">{tableProduct.name}</div> */}\n                  {tableProduct.products.map((eachProduct) => (\n                    <div key={eachProduct._id}>\n                      {eachProduct.name !== \"\" && (\n                        <EditInputOnSidebar\n                          name={eachProduct.name}\n                          type=\"text\"\n                          defaultValue={eachProduct.revenue_per_unit}\n                          className=\"chart-input\"\n                          onChange={(event) =>\n                            onValChange(\n                              tableProduct._id,\n                              eachProduct._id,\n                              event.target.value\n                            )\n                          }\n                        />\n                      )}\n                    </div>\n                  ))}\n                </div>\n              ))}\n              {tableExpenseData.fixed_cost_tables.map((tableFixedCost) => (\n                <div key={tableFixedCost._id}>\n                  {/* <div className=\"total-text\">{tableFixedCost.name}</div> */}\n                  {tableFixedCost.fixed_costs.map((eachFixedCost) => (\n                    <div key={eachFixedCost._id}>\n                      {eachFixedCost.name !== \"\" && (\n                        <EditInputOnSidebar\n                          name={eachFixedCost.name}\n                          type=\"text\"\n                          defaultValue={eachFixedCost.amount}\n                          className=\"chart-input\"\n                          onChange={(event) =>\n                            onValChange(\n                              tableFixedCost._id,\n                              eachFixedCost._id,\n                              event.target.value\n                            )\n                          }\n                        />\n                      )}\n                    </div>\n                  ))}\n                </div>\n              ))}\n              <div className=\"\">\n                <div>\n                  {/* <EditInputOnSidebar\n                    name=\"รวมรายได้จากการบริการ/วัน\"\n                    type=\"text\"\n                    defaultValue={calculateRevenue_service()}\n                    className=\"chart-input\"\n                    resultDisplay={true}\n                  /> */}\n                </div>\n              </div>\n\n              <div className=\"table-name-side-text\">กระแสเงินสดจากกิจกรรมลงทุน (CFI)</div>\n              {\n                // tableExpenseData.investment_tables.forEach((table) => {\n                //   table.investments.forEach((eachData) => {\n                //     sum_investment += eachData.amount\n                //   })\n                // })\n\n                tableExpenseData.investment_tables.map((table) => (\n                  <div key={table._id}>\n                    {/* <div className=\"total-text\">{tableProduct.name}</div> */}\n                    {table.investments.map((eachData) => (\n                      <div key={eachData._id}>\n                        {eachData.name !== \"\" && (\n                          <EditInputOnSidebar\n                            name={eachData.name}\n                            type=\"text\"\n                            defaultValue={eachData.amount}\n                            className=\"chart-input\"\n                            onChange={(event) =>\n                              onValChange(\n                                table._id,\n                                eachData._id,\n                                event.target.value\n                              )\n                            }\n                          />\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                ))\n\n              }\n              {/* tableMiscellaneousData */}\n              <div className=\"table-name-side-text\">กระแสเงินสดจากกิจกรรมจัดหาเงิน (CFF)</div>\n              {\n                tableMiscellaneousData.debt_issuance.map((table) => (\n                  <div key={table._id}>\n                    {/* <div className=\"total-text\">{table.name}</div> */}\n                    {table.payments.map((eachData) => (\n                      <div key={eachData._id}>\n                        <EditInputOnSidebar\n                          name={`ชำระหนี้ ปีที่ ${eachData.year}`}\n                          type=\"text\"\n                          defaultValue={eachData.amount}\n                          className=\"chart-input\"\n                        // onChange={(event) =>\n                        //   onValChange(\n                        //     table._id,\n                        //     eachData._id,\n                        //     event.target.value\n                        //   )\n                        // }\n                        />\n                      </div>\n                    ))}\n                  </div>\n                ))\n\n              }\n              {\n                tableMiscellaneousData.equity_contribution.map((table) => (\n                  <div key={table._id}>\n                    <EditInputOnSidebar\n                      name={`เงินสดรับจาการกู้ยืม โดย${table.name}`}\n                      type=\"text\"\n                      defaultValue={table.amount}\n                      className=\"chart-input\"\n                    // onChange={(event) =>\n                    //   onValChange(\n                    //     table._id,\n                    //     eachData._id,\n                    //     event.target.value\n                    //   )\n                    // }\n                    />\n                  </div>\n                ))\n\n              }\n\n            </div>\n          ) : (\n            <div className=\"sen-sidebar2\">\n              <div className=\"sen-sidebar-show2\" onClick={showSidebar}>\n                <AiOutlineDoubleLeft />\n              </div>\n            </div>\n          )}\n        </div>\n\n      </div>\n    </div>\n  );\n};\n\nexport default cashflowChartPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}