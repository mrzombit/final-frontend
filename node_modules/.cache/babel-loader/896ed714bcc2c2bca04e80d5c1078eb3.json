{"ast":null,"code":"import _slicedToArray from \"/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/src/pages/bizTools/totalInvestmentPage/totalInvestmentPage.jsx\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport BizSidebar from \"../../../components/bizTools/bizSidebar/bizSidebar\";\nimport \"../biztools.css\";\nimport BiztoolHeader from \"../../../components/investmentProject/biztoolHeader/biztoolHeader\";\nimport BiztoolBody from \"../../../components/investmentProject/biztoolBody/biztoolBody\";\nimport BIZTOOL_PAGE_CONFIG from \"../pageConfig\";\nimport BIZTOOL_PAGE_MOCKDATA from \"../pageMockData\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchUserByUsername } from \"../../../features/usersSlice\";\nimport { fetchProjectsByUserId, setSelectedProject, fetchProjectById } from \"../../../features/projectsSlice\";\nfunction TotalInvestmentPage() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    newProjectPopupState = _useState2[0],\n    setNewProjectPopupState = _useState2[1];\n  var dispatch = useDispatch();\n  var navigate = useNavigate();\n  var auth = useSelector(function (state) {\n    return state.users.auth;\n  });\n  var user = useSelector(function (state) {\n    return state.users.user;\n  });\n  var projects = useSelector(function (state) {\n    return state.projects.projects;\n  });\n  var selectedProject = useSelector(function (state) {\n    return state.projects.selectedProject;\n  });\n  var _useState3 = useState({\n      user: false,\n      projects: false\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoaded = _useState4[0],\n    setIsLoaded = _useState4[1];\n  var isAlert = useRef(false);\n  useEffect(function () {\n    if (auth.username) {\n      if (auth.token != \"\") {\n        if (!isLoaded.user) {\n          dispatch(fetchUserByUsername({\n            username: auth.username,\n            token: auth.token\n          }));\n          setIsLoaded({\n            user: true,\n            projects: false\n          });\n        }\n      }\n\n      // if(isLoaded) console.log(JSON.stringify(user));\n      if (isLoaded.user) {\n        if (isLoaded.projects) {\n          // dispatch(fetchProjectsByUserId(user._id))\n          dispatch(fetchProjectById(selectedProject));\n          setIsLoaded({\n            user: true,\n            project: true\n          });\n        }\n        // else console.log(JSON.stringify(projects))\n        console.log(JSON.stringify(selectedProject));\n        // console.log(JSON.stringify(selectedProject.expense.investment_tables));\n      }\n    } else navigate(\"/login\");\n  }, [auth.token, user, newProjectPopupState]);\n\n  // const [tableData, setTableData] = useState( BIZTOOL_PAGE_MOCKDATA.totalInvestment.data);\n  var _useState5 = useState(selectedProject.expense.investment_tables),\n    _useState6 = _slicedToArray(_useState5, 2),\n    tableData = _useState6[0],\n    setTableData = _useState6[1];\n  var _useState7 = useState(BIZTOOL_PAGE_CONFIG.totalInvestment),\n    _useState8 = _slicedToArray(_useState7, 2),\n    config = _useState8[0],\n    setConfig = _useState8[1];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BizSidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4 biztool-body-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BiztoolHeader, {\n    type: config.type,\n    title: config.title,\n    handleFunction: config.addTableHandleFunction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(BiztoolBody, {\n    type: config.type,\n    tableStyle: config.tableStyle,\n    tableData: tableData,\n    onChangeHandle: config.onChangeHandle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  })));\n}\nexport default TotalInvestmentPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","BizSidebar","BiztoolHeader","BiztoolBody","BIZTOOL_PAGE_CONFIG","BIZTOOL_PAGE_MOCKDATA","Link","useNavigate","useDispatch","useSelector","fetchUserByUsername","fetchProjectsByUserId","setSelectedProject","fetchProjectById","TotalInvestmentPage","_useState","_useState2","_slicedToArray","newProjectPopupState","setNewProjectPopupState","dispatch","navigate","auth","state","users","user","projects","selectedProject","_useState3","_useState4","isLoaded","setIsLoaded","isAlert","username","token","project","console","log","JSON","stringify","_useState5","expense","investment_tables","_useState6","tableData","setTableData","_useState7","totalInvestment","_useState8","config","setConfig","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","title","handleFunction","addTableHandleFunction","tableStyle","onChangeHandle"],"sources":["/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/src/pages/bizTools/totalInvestmentPage/totalInvestmentPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport BizSidebar from \"../../../components/bizTools/bizSidebar/bizSidebar\";\nimport \"../biztools.css\";\nimport BiztoolHeader from \"../../../components/investmentProject/biztoolHeader/biztoolHeader\";\nimport BiztoolBody from \"../../../components/investmentProject/biztoolBody/biztoolBody\";\nimport BIZTOOL_PAGE_CONFIG from \"../pageConfig\";\nimport BIZTOOL_PAGE_MOCKDATA from \"../pageMockData\";\n\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchUserByUsername } from \"../../../features/usersSlice\";\nimport {\n  fetchProjectsByUserId,\n  setSelectedProject,\n  fetchProjectById,\n} from \"../../../features/projectsSlice\";\n\nfunction TotalInvestmentPage() {\n  const [newProjectPopupState, setNewProjectPopupState] = useState(false);\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const auth = useSelector((state) => state.users.auth);\n  const user = useSelector((state) => state.users.user);\n  const projects = useSelector((state) => state.projects.projects);\n  const selectedProject = useSelector(\n    (state) => state.projects.selectedProject\n  );\n  const [isLoaded, setIsLoaded] = useState({ user: false, projects: false });\n  const isAlert = useRef(false);\n\n  useEffect(() => {\n    if (auth.username) {\n      if (auth.token != \"\") {\n        if (!isLoaded.user) {\n          dispatch(\n            fetchUserByUsername({ username: auth.username, token: auth.token })\n          );\n          setIsLoaded({ user: true, projects: false });\n        }\n      }\n      \n      // if(isLoaded) console.log(JSON.stringify(user));\n      if (isLoaded.user) {\n        if (isLoaded.projects) {\n          // dispatch(fetchProjectsByUserId(user._id))\n          dispatch(fetchProjectById(selectedProject));\n\n          setIsLoaded({ user: true, project: true });\n        }\n        // else console.log(JSON.stringify(projects))\n        console.log(JSON.stringify(selectedProject));\n        // console.log(JSON.stringify(selectedProject.expense.investment_tables));\n      }\n    } else navigate(\"/login\");\n  }, [auth.token, user, newProjectPopupState]);\n\n  // const [tableData, setTableData] = useState( BIZTOOL_PAGE_MOCKDATA.totalInvestment.data);\n  const [tableData, setTableData] = useState(selectedProject.expense.investment_tables)\n  const [config, setConfig] = useState(BIZTOOL_PAGE_CONFIG.totalInvestment);\n\n  return (\n    <div className=\"d-flex \">\n      <BizSidebar />\n      {/* {tableData.map((table) => ( */}\n        <div className=\"p-4 biztool-body-width\">\n          <BiztoolHeader\n            type={config.type}\n            title={config.title}\n            handleFunction={config.addTableHandleFunction}\n          />\n          <BiztoolBody\n            type={config.type}\n            tableStyle={config.tableStyle}\n            tableData={tableData}\n            onChangeHandle={config.onChangeHandle}\n          />\n          {/* {console.log(table.data)} */}\n        </div>\n      {/* ))} */}\n\n\n    </div>\n  );\n}\n\nexport default TotalInvestmentPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}