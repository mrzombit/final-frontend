{"ast":null,"code":"import _slicedToArray from \"/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/src/pages/bizTools/revenuePage/revenuePage.jsx\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport BizSidebar from \"../../../components/bizTools/bizSidebar/bizSidebar\";\nimport BiztoolBody from \"../../../components/investmentProject/biztoolBody/biztoolBody\";\nimport BiztoolHeader from \"../../../components/investmentProject/biztoolHeader/biztoolHeader\";\nimport '../biztools.css';\nimport BIZTOOL_PAGE_CONFIG from \"../pageConfig\";\nimport BIZTOOL_PAGE_MOCKDATA from \"../pageMockData\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchUserByUsername } from \"../../../features/usersSlice\";\nimport { fetchProjectsByUserId, setSelectedProject, fetchProjectById } from \"../../../features/projectsSlice\";\nfunction RevenuePage() {\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    newProjectPopupState = _useState2[0],\n    setNewProjectPopupState = _useState2[1];\n  var dispatch = useDispatch();\n  var navigate = useNavigate();\n  var auth = useSelector(function (state) {\n    return state.users.auth;\n  });\n  var user = useSelector(function (state) {\n    return state.users.user;\n  });\n  var projects = useSelector(function (state) {\n    return state.projects.projects;\n  });\n  var selectedProject = useSelector(function (state) {\n    return state.projects.selectedProject;\n  });\n  var _useState3 = useState({\n      user: false,\n      projects: false\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isLoaded = _useState4[0],\n    setIsLoaded = _useState4[1];\n  var isAlert = useRef(false);\n  useEffect(function () {\n    if (auth.username) {\n      if (auth.token != \"\") {\n        if (!isLoaded.user) {\n          dispatch(fetchUserByUsername({\n            username: auth.username,\n            token: auth.token\n          }));\n          setIsLoaded({\n            user: true,\n            projects: false\n          });\n        }\n      }\n\n      // if(isLoaded) console.log(JSON.stringify(user));\n      if (isLoaded.user) {\n        if (isLoaded.projects) {\n          // dispatch(fetchProjectsByUserId(user._id))\n          dispatch(fetchProjectById(selectedProject));\n          setIsLoaded({\n            user: true,\n            project: true\n          });\n        }\n        // else console.log(JSON.stringify(projects))\n        console.log(JSON.stringify(selectedProject.revenue.service_tables));\n        // console.log(JSON.stringify(selectedProject.expense.investment_tables));\n      }\n    } else navigate(\"/login\");\n  }, [auth.token, user, newProjectPopupState]);\n\n  // const [tableData, setTableData] = useState(BIZTOOL_PAGE_MOCKDATA.revenue)\n  // const [tableData, setTableData] = useState(selectedProject.revenue)\n  var _useState5 = useState(BIZTOOL_PAGE_CONFIG.revenue),\n    _useState6 = _slicedToArray(_useState5, 2),\n    config = _useState6[0],\n    setConfig = _useState6[1];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BizSidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-4 biztool-body-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(BiztoolHeader, {\n    type: config.type,\n    title: config.title,\n    handleFunction: config.addTableHandleFunction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(BiztoolBody, {\n    type: config.type,\n    tableStyle: config.tableStyle,\n    tableData: selectedProject.revenue,\n    onChangeHandle: config.onChangeHandle,\n    handleFunction: config.addTableHandleFunction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  })));\n}\nexport default RevenuePage;","map":{"version":3,"names":["React","useState","useEffect","useRef","BizSidebar","BiztoolBody","BiztoolHeader","BIZTOOL_PAGE_CONFIG","BIZTOOL_PAGE_MOCKDATA","Link","useNavigate","useDispatch","useSelector","fetchUserByUsername","fetchProjectsByUserId","setSelectedProject","fetchProjectById","RevenuePage","_useState","_useState2","_slicedToArray","newProjectPopupState","setNewProjectPopupState","dispatch","navigate","auth","state","users","user","projects","selectedProject","_useState3","_useState4","isLoaded","setIsLoaded","isAlert","username","token","project","console","log","JSON","stringify","revenue","service_tables","_useState5","_useState6","config","setConfig","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","type","title","handleFunction","addTableHandleFunction","tableStyle","tableData","onChangeHandle"],"sources":["/Users/koonk/Documents/GitHub/CE65-20/packages/frontend/src/pages/bizTools/revenuePage/revenuePage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport BizSidebar from \"../../../components/bizTools/bizSidebar/bizSidebar\";\nimport BiztoolBody from \"../../../components/investmentProject/biztoolBody/biztoolBody\";\nimport BiztoolHeader from \"../../../components/investmentProject/biztoolHeader/biztoolHeader\";\nimport '../biztools.css'\nimport BIZTOOL_PAGE_CONFIG from \"../pageConfig\";\nimport BIZTOOL_PAGE_MOCKDATA from \"../pageMockData\";\n\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchUserByUsername } from \"../../../features/usersSlice\";\nimport {\n  fetchProjectsByUserId,\n  setSelectedProject,\n  fetchProjectById,\n} from \"../../../features/projectsSlice\";\n\nfunction RevenuePage() {\n\n  const [newProjectPopupState, setNewProjectPopupState] = useState(false);\n\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const auth = useSelector((state) => state.users.auth);\n  const user = useSelector((state) => state.users.user);\n  const projects = useSelector((state) => state.projects.projects);\n  const selectedProject = useSelector(\n    (state) => state.projects.selectedProject\n  );\n  const [isLoaded, setIsLoaded] = useState({ user: false, projects: false });\n  const isAlert = useRef(false);\n\n  useEffect(() => {\n    if (auth.username) {\n      if (auth.token != \"\") {\n        if (!isLoaded.user) {\n          dispatch(\n            fetchUserByUsername({ username: auth.username, token: auth.token })\n          );\n          setIsLoaded({ user: true, projects: false });\n        }\n      }\n      \n      // if(isLoaded) console.log(JSON.stringify(user));\n      if (isLoaded.user) {\n        if (isLoaded.projects) {\n          // dispatch(fetchProjectsByUserId(user._id))\n          dispatch(fetchProjectById(selectedProject));\n\n          setIsLoaded({ user: true, project: true });\n        }\n        // else console.log(JSON.stringify(projects))\n        console.log(JSON.stringify(selectedProject.revenue.service_tables));\n        // console.log(JSON.stringify(selectedProject.expense.investment_tables));\n      }\n    } else navigate(\"/login\");\n  }, [auth.token, user, newProjectPopupState]);\n\n\n  // const [tableData, setTableData] = useState(BIZTOOL_PAGE_MOCKDATA.revenue)\n  // const [tableData, setTableData] = useState(selectedProject.revenue)\n  const [config, setConfig] = useState(BIZTOOL_PAGE_CONFIG.revenue)\n\n  return (\n    <div className=\"d-flex \">\n      <BizSidebar />\n      <div className=\"p-4 biztool-body-width\">\n        <BiztoolHeader\n          type={config.type}\n          title={config.title}\n          handleFunction={config.addTableHandleFunction}\n        />\n        <BiztoolBody\n          type={config.type}\n          tableStyle={config.tableStyle}\n          tableData={selectedProject.revenue}\n          onChangeHandle={config.onChangeHandle}\n          handleFunction={config.addTableHandleFunction}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default RevenuePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}